<html lang="en">
<head>
<title>GNU GRUB Manual 0.97</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="GNU GRUB Manual 0.97">
<meta name="generator" content="makeinfo 4.8">
<link title="Top" rel="top" href="#Top">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
This manual is for GNU GRUB (version 0.97,
8 May 2005).

Copyright (C) 1999,2000,2001,2002,2004,2006 Free Software Foundation, Inc.

     Permission is granted to copy, distribute and/or modify this
     document under the terms of the GNU Free Documentation License,
     Version 1.2 or any later version published by the Free Software
     Foundation; with no Invariant Sections, with the Front-Cover Texts
     being "A GNU Manual," and with the Back-Cover Texts as in (a)
     below.  A copy of the license is included in the section entitled
     "GNU Free Documentation License."

     (a) The FSF's Back-Cover Text is: "You have freedom to copy and
     modify this GNU Manual, like GNU software.  Copies published by
     the Free Software Foundation raise funds for GNU development."
   -->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<h1 class="settitle">GNU GRUB Manual 0.97</h1>
   <div class="contents">
<h2>Table of Contents</h2>
<ul>
<li><a name="toc_Top" href="#Top">GNU GRUB manual</a>
<li><a name="toc_Introduction" href="#Introduction">1 Introduction to GRUB</a>
<ul>
<li><a href="#Overview">1.1 Overview</a>
<li><a href="#History">1.2 History of GRUB</a>
<li><a href="#Features">1.3 GRUB features</a>
<li><a href="#Role-of-a-boot-loader">1.4 The role of a boot loader</a>
</li></ul>
<li><a name="toc_Naming-convention" href="#Naming-convention">2 Naming convention</a>
<li><a name="toc_Installation" href="#Installation">3 Installation</a>
<ul>
<li><a href="#Creating-a-GRUB-boot-floppy">3.1 Creating a GRUB boot floppy</a>
<li><a href="#Installing-GRUB-natively">3.2 Installing GRUB natively</a>
<li><a href="#Installing-GRUB-using-grub_002dinstall">3.3 Installing GRUB using grub-install</a>
<li><a href="#Making-a-GRUB-bootable-CD_002dROM">3.4 Making a GRUB bootable CD-ROM</a>
</li></ul>
<li><a name="toc_Booting" href="#Booting">4 Booting</a>
<ul>
<li><a href="#General-boot-methods">4.1 How to boot operating systems</a>
<ul>
<li><a href="#Loading-an-operating-system-directly">4.1.1 How to boot an OS directly with GRUB</a>
<li><a href="#Chain_002dloading">4.1.2 Load another boot loader to boot unsupported operating systems</a>
</li></ul>
<li><a href="#OS_002dspecific-notes">4.2 Some caveats on OS-specific issues</a>
<ul>
<li><a href="#GNU_002fHurd">4.2.1 GNU/Hurd</a>
<li><a href="#GNU_002fLinux">4.2.2 GNU/Linux</a>
<li><a href="#FreeBSD">4.2.3 FreeBSD</a>
<li><a href="#NetBSD">4.2.4 NetBSD</a>
<li><a href="#OpenBSD">4.2.5 OpenBSD</a>
<li><a href="#DOS_002fWindows">4.2.6 DOS/Windows</a>
<li><a href="#SCO-UnixWare">4.2.7 SCO UnixWare</a>
<li><a href="#QNX">4.2.8 QNX</a>
</li></ul>
<li><a href="#Making-your-system-robust">4.3 How to make your system robust</a>
<ul>
<li><a href="#Booting-once_002donly">4.3.1 Booting once-only</a>
<li><a href="#Booting-fallback-systems">4.3.2 Booting fallback systems</a>
</li></ul>
</li></ul>
<li><a name="toc_Configuration" href="#Configuration">5 Configuration</a>
<li><a name="toc_Network" href="#Network">6 Downloading OS images from a network</a>
<ul>
<li><a href="#General-usage-of-network-support">6.1 How to set up your network</a>
<li><a href="#Diskless">6.2 Booting from a network</a>
</li></ul>
<li><a name="toc_Serial-terminal" href="#Serial-terminal">7 Using GRUB via a serial line</a>
<li><a name="toc_Preset-Menu" href="#Preset-Menu">8 Embedding a configuration file into GRUB</a>
<li><a name="toc_Security" href="#Security">9 Protecting your computer from cracking</a>
<li><a name="toc_Images" href="#Images">10 GRUB image files</a>
<li><a name="toc_Filesystem" href="#Filesystem">11 Filesystem syntax and semantics</a>
<ul>
<li><a href="#Device-syntax">11.1 How to specify devices</a>
<li><a href="#File-name-syntax">11.2 How to specify files</a>
<li><a href="#Block-list-syntax">11.3 How to specify block lists</a>
</li></ul>
<li><a name="toc_Interface" href="#Interface">12 GRUB's user interface</a>
<ul>
<li><a href="#Command_002dline-interface">12.1 The flexible command-line interface</a>
<li><a href="#Menu-interface">12.2 The simple menu interface</a>
<li><a href="#Menu-entry-editor">12.3 Editing a menu entry</a>
<li><a href="#Hidden-menu-interface">12.4 The hidden menu interface</a>
</li></ul>
<li><a name="toc_Commands" href="#Commands">13 The list of available commands</a>
<ul>
<li><a href="#Menu_002dspecific-commands">13.1 The list of commands for the menu only</a>
<ul>
<li><a href="#default">13.1.1 default</a>
<li><a href="#fallback">13.1.2 fallback</a>
<li><a href="#hiddenmenu">13.1.3 hiddenmenu</a>
<li><a href="#timeout">13.1.4 timeout</a>
<li><a href="#title">13.1.5 title</a>
</li></ul>
<li><a href="#General-commands">13.2 The list of general commands</a>
<ul>
<li><a href="#bootp">13.2.1 bootp</a>
<li><a href="#color">13.2.2 color</a>
<li><a href="#device">13.2.3 device</a>
<li><a href="#dhcp">13.2.4 dhcp</a>
<li><a href="#hide">13.2.5 hide</a>
<li><a href="#ifconfig">13.2.6 ifconfig</a>
<li><a href="#pager">13.2.7 pager</a>
<li><a href="#partnew">13.2.8 partnew</a>
<li><a href="#parttype">13.2.9 parttype</a>
<li><a href="#password">13.2.10 password</a>
<li><a href="#rarp">13.2.11 rarp</a>
<li><a href="#serial">13.2.12 serial</a>
<li><a href="#setkey">13.2.13 setkey</a>
<li><a href="#terminal">13.2.14 terminal</a>
<li><a href="#terminfo">13.2.15 terminfo</a>
<li><a href="#tftpserver">13.2.16 tftpserver</a>
<li><a href="#unhide">13.2.17 unhide</a>
</li></ul>
<li><a href="#Command_002dline-and-menu-entry-commands">13.3 The list of command-line and menu entry commands</a>
<ul>
<li><a href="#blocklist">13.3.1 blocklist</a>
<li><a href="#boot">13.3.2 boot</a>
<li><a href="#cat">13.3.3 cat</a>
<li><a href="#chainloader">13.3.4 chainloader</a>
<li><a href="#cmp">13.3.5 cmp</a>
<li><a href="#configfile">13.3.6 configfile</a>
<li><a href="#debug">13.3.7 debug</a>
<li><a href="#displayapm">13.3.8 displayapm</a>
<li><a href="#displaymem">13.3.9 displaymem</a>
<li><a href="#embed">13.3.10 embed</a>
<li><a href="#find">13.3.11 find</a>
<li><a href="#fstest">13.3.12 fstest</a>
<li><a href="#geometry">13.3.13 geometry</a>
<li><a href="#halt">13.3.14 halt</a>
<li><a href="#help">13.3.15 help</a>
<li><a href="#impsprobe">13.3.16 impsprobe</a>
<li><a href="#initrd">13.3.17 initrd</a>
<li><a href="#install">13.3.18 install</a>
<li><a href="#ioprobe">13.3.19 ioprobe</a>
<li><a href="#kernel">13.3.20 kernel</a>
<li><a href="#lock">13.3.21 lock</a>
<li><a href="#makeactive">13.3.22 makeactive</a>
<li><a href="#map">13.3.23 map</a>
<li><a href="#md5crypt">13.3.24 md5crypt</a>
<li><a href="#module">13.3.25 module</a>
<li><a href="#modulenounzip">13.3.26 modulenounzip</a>
<li><a href="#pause">13.3.27 pause</a>
<li><a href="#quit">13.3.28 quit</a>
<li><a href="#reboot">13.3.29 reboot</a>
<li><a href="#read">13.3.30 read</a>
<li><a href="#root">13.3.31 root</a>
<li><a href="#rootnoverify">13.3.32 rootnoverify</a>
<li><a href="#savedefault">13.3.33 savedefault</a>
<li><a href="#setup">13.3.34 setup</a>
<li><a href="#testload">13.3.35 testload</a>
<li><a href="#testvbe">13.3.36 testvbe</a>
<li><a href="#uppermem">13.3.37 uppermem</a>
<li><a href="#vbeprobe">13.3.38 vbeprobe</a>
</li></ul>
</li></ul>
<li><a name="toc_Troubleshooting" href="#Troubleshooting">14 Error messages reported by GRUB</a>
<ul>
<li><a href="#Stage1-errors">14.1 Errors reported by the Stage 1</a>
<li><a href="#Stage1_002e5-errors">14.2 Errors reported by the Stage 1.5</a>
<li><a href="#Stage2-errors">14.3 Errors reported by the Stage 2</a>
</li></ul>
<li><a name="toc_Invoking-the-grub-shell" href="#Invoking-the-grub-shell">15 Invoking the grub shell</a>
<ul>
<li><a href="#Basic-usage">15.1 Introduction into the grub shell</a>
<li><a href="#Installation-under-UNIX">15.2 How to install GRUB via <samp><span class="command">grub</span></samp></a>
<li><a href="#Device-map">15.3 The map between BIOS drives and OS devices</a>
</li></ul>
<li><a name="toc_Invoking-grub_002dinstall" href="#Invoking-grub_002dinstall">16 Invoking grub-install</a>
<li><a name="toc_Invoking-grub_002dmd5_002dcrypt" href="#Invoking-grub_002dmd5_002dcrypt">17 Invoking grub-md5-crypt</a>
<li><a name="toc_Invoking-grub_002dterminfo" href="#Invoking-grub_002dterminfo">18 Invoking grub-terminfo</a>
<li><a name="toc_Invoking-grub_002dset_002ddefault" href="#Invoking-grub_002dset_002ddefault">19 Invoking grub-set-default</a>
<li><a name="toc_Invoking-mbchk" href="#Invoking-mbchk">20 Invoking mbchk</a>
<li><a name="toc_Obtaining-and-Building-GRUB" href="#Obtaining-and-Building-GRUB">Appendix A How to obtain and build GRUB</a>
<li><a name="toc_Reporting-bugs" href="#Reporting-bugs">Appendix B Reporting bugs</a>
<li><a name="toc_Future" href="#Future">Appendix C Where GRUB will go</a>
<li><a name="toc_Internals" href="#Internals">Appendix D Hacking GRUB</a>
<ul>
<li><a href="#Memory-map">D.1 The memory map of various components</a>
<li><a href="#Embedded-data">D.2 Embedded variables in GRUB</a>
<li><a href="#Filesystem-interface">D.3 The generic interface for filesystems</a>
<li><a href="#Command-interface">D.4 The generic interface for built-ins</a>
<li><a href="#Bootstrap-tricks">D.5 The bootstrap mechanism used in GRUB</a>
<li><a href="#I_002fO-ports-detection">D.6 How to probe I/O ports used by INT 13H</a>
<li><a href="#Memory-detection">D.7 How to detect all installed RAM</a>
<li><a href="#Low_002dlevel-disk-I_002fO">D.8 INT 13H disk I/O interrupts</a>
<li><a href="#MBR">D.9 The structure of Master Boot Record</a>
<li><a href="#Partition-table">D.10 The format of partition tables</a>
<li><a href="#Submitting-patches">D.11 Where and how you should send patches</a>
</li></ul>
<li><a name="toc_Copying-This-Manual" href="#Copying-This-Manual">Appendix E Copying This Manual</a>
<ul>
<li><a href="#GNU-Free-Documentation-License">E.1 GNU Free Documentation License</a>
<ul>
<li><a href="#GNU-Free-Documentation-License">E.1.1 ADDENDUM: How to use this License for your documents</a>
</li></ul>
</li></ul>
<li><a name="toc_Index" href="#Index">Index</a>
</li></ul>
</div>



<div class="node">
<p><hr>
<a name="Top"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Introduction">Introduction</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#dir">(dir)</a>

</div>

<h2 class="unnumbered">GNU GRUB manual</h2>

<p>This is the documentation of GNU GRUB, the GRand Unified Bootloader,
a flexible and powerful boot loader program for <span class="sc">pc</span>s.

   <p>This edition documents version 0.97.

   <p>This manual is for GNU GRUB (version 0.97,
8 May 2005).

   <p>Copyright &copy; 1999,2000,2001,2002,2004,2006 Free Software Foundation, Inc.

   <blockquote>
Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.2 or
any later version published by the Free Software Foundation; with no
Invariant Sections, with the Front-Cover Texts being &ldquo;A GNU Manual,&rdquo;
and with the Back-Cover Texts as in (a) below.  A copy of the
license is included in the section entitled &ldquo;GNU Free Documentation
License.&rdquo;

        <p>(a) The FSF's Back-Cover Text is: &ldquo;You have freedom to copy and modify
this GNU Manual, like GNU software.  Copies published by the Free
Software Foundation raise funds for GNU development.&rdquo;
</blockquote>

<ul class="menu">
<li><a accesskey="1" href="#Introduction">Introduction</a>:                 Capturing the spirit of GRUB
<li><a accesskey="2" href="#Naming-convention">Naming convention</a>:            Names of your drives in GRUB
<li><a accesskey="3" href="#Installation">Installation</a>:                 Installing GRUB on your drive
<li><a accesskey="4" href="#Booting">Booting</a>:                      How to boot different operating systems
<li><a accesskey="5" href="#Configuration">Configuration</a>:                Writing your own configuration file
<li><a accesskey="6" href="#Network">Network</a>:                      Downloading OS images from a network
<li><a accesskey="7" href="#Serial-terminal">Serial terminal</a>:              Using GRUB via a serial line
<li><a accesskey="8" href="#Preset-Menu">Preset Menu</a>:                  Embedding a configuration file into GRUB
<li><a accesskey="9" href="#Security">Security</a>:                     Improving the security
<li><a href="#Images">Images</a>:                       GRUB image files
<li><a href="#Filesystem">Filesystem</a>:                   Filesystem syntax and semantics
<li><a href="#Interface">Interface</a>:                    The menu and the command-line
<li><a href="#Commands">Commands</a>:                     The list of available builtin commands
<li><a href="#Troubleshooting">Troubleshooting</a>:              Error messages produced by GRUB
<li><a href="#Invoking-the-grub-shell">Invoking the grub shell</a>:      How to use the grub shell
<li><a href="#Invoking-grub_002dinstall">Invoking grub-install</a>:        How to use the GRUB installer
<li><a href="#Invoking-grub_002dmd5_002dcrypt">Invoking grub-md5-crypt</a>:      How to generate a cryptic password
<li><a href="#Invoking-grub_002dterminfo">Invoking grub-terminfo</a>:       How to generate a terminfo command
<li><a href="#Invoking-grub_002dset_002ddefault">Invoking grub-set-default</a>:    How to set a default boot entry
<li><a href="#Invoking-mbchk">Invoking mbchk</a>:               How to use the Multiboot checker
<li><a href="#Obtaining-and-Building-GRUB">Obtaining and Building GRUB</a>:  How to obtain and build GRUB
<li><a href="#Reporting-bugs">Reporting bugs</a>:               Where you should send a bug report
<li><a href="#Future">Future</a>:                       Some future plans on GRUB
<li><a href="#Internals">Internals</a>:                    Hacking GRUB
<li><a href="#Copying-This-Manual">Copying This Manual</a>:          Copying This Manual
<li><a href="#Index">Index</a>
</ul>

<div class="node">
<p><hr>
<a name="Introduction"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Naming-convention">Naming convention</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Top">Top</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">1 Introduction to GRUB</h2>

<ul class="menu">
<li><a accesskey="1" href="#Overview">Overview</a>:                     What exactly GRUB is and how to use it
<li><a accesskey="2" href="#History">History</a>:                      From maggot to house fly
<li><a accesskey="3" href="#Features">Features</a>:                     GRUB features
<li><a accesskey="4" href="#Role-of-a-boot-loader">Role of a boot loader</a>:        The role of a boot loader
</ul>

<div class="node">
<p><hr>
<a name="Overview"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#History">History</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Introduction">Introduction</a>

</div>

<h3 class="section">1.1 Overview</h3>

<p>Briefly, a <dfn>boot loader</dfn> is the first software program that runs when
a computer starts.  It is responsible for loading and transferring
control to an operating system <dfn>kernel</dfn> software (such as Linux or
GNU Mach).  The kernel, in turn, initializes the rest of the operating
system (e.g. a GNU system).

   <p>GNU GRUB is a very powerful boot loader, which can load a wide variety
of free operating systems, as well as proprietary operating systems with
chain-loading<a rel="footnote" href="#fn-1" name="fnd-1"><sup>1</sup></a>. GRUB is designed to
address the complexity of booting a personal computer; both the
program and this manual are tightly bound to that computer platform,
although porting to other platforms may be addressed in the future.

   <p>One of the important features in GRUB is flexibility; GRUB understands
filesystems and kernel executable formats, so you can load an arbitrary
operating system the way you like, without recording the physical
position of your kernel on the disk. Thus you can load the kernel
just by specifying its file name and the drive and partition where the
kernel resides.

   <p>When booting with GRUB, you can use either a command-line interface
(see <a href="#Command_002dline-interface">Command-line interface</a>), or a menu interface (see <a href="#Menu-interface">Menu interface</a>). Using the command-line interface, you type the drive
specification and file name of the kernel manually. In the menu
interface, you just select an OS using the arrow keys. The menu is
based on a configuration file which you prepare beforehand
(see <a href="#Configuration">Configuration</a>). While in the menu, you can switch to the
command-line mode, and vice-versa. You can even edit menu entries
before using them.

   <p>In the following chapters, you will learn how to specify a drive, a
partition, and a file name (see <a href="#Naming-convention">Naming convention</a>) to GRUB, how to
install GRUB on your drive (see <a href="#Installation">Installation</a>), and how to boot your
OSes (see <a href="#Booting">Booting</a>), step by step.

   <p>Besides the GRUB boot loader itself, there is a <dfn>grub shell</dfn>
<samp><span class="command">grub</span></samp> (see <a href="#Invoking-the-grub-shell">Invoking the grub shell</a>) which can be run when
you are in your operating system. It emulates the boot loader and can
be used for installing the boot loader.

<div class="node">
<p><hr>
<a name="History"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Features">Features</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Overview">Overview</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Introduction">Introduction</a>

</div>

<h3 class="section">1.2 History of GRUB</h3>

<p>GRUB originated in 1995 when Erich Boleyn was trying to boot the GNU
Hurd with the University of Utah's Mach 4 microkernel (now known as GNU
Mach).  Erich and Brian Ford designed the Multiboot Specification
(see <a href="multiboot/multiboot.html#Top">Multiboot Specification</a>), because they were determined not to add to the large
number of mutually-incompatible PC boot methods.

   <p>Erich then began modifying the FreeBSD boot loader so that it would
understand Multiboot. He soon realized that it would be a lot easier
to write his own boot loader from scratch than to keep working on the
FreeBSD boot loader, and so GRUB was born.

   <p>Erich added many features to GRUB, but other priorities prevented him
from keeping up with the demands of its quickly-expanding user base. In
1999, Gordon Matzigkeit and Yoshinori K. Okuji adopted GRUB as an
official GNU package, and opened its development by making the latest
sources available via anonymous CVS. See <a href="#Obtaining-and-Building-GRUB">Obtaining and Building GRUB</a>, for more information.

<div class="node">
<p><hr>
<a name="Features"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Role-of-a-boot-loader">Role of a boot loader</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#History">History</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Introduction">Introduction</a>

</div>

<h3 class="section">1.3 GRUB features</h3>

<p>The primary requirement for GRUB is that it be compliant with the
<dfn>Multiboot Specification</dfn>, which is described in <a href="multiboot/multiboot.html#Top">Multiboot Specification</a>.

   <p>The other goals, listed in approximate order of importance, are:

     <ul>
<li>Basic functions must be straightforward for end-users.

     <li>Rich functionality to support kernel experts and designers.

     <li>Backward compatibility for booting FreeBSD, NetBSD, OpenBSD, and
Linux. Proprietary kernels (such as DOS, Windows NT, and OS/2) are
supported via a chain-loading function. 
</ul>

   <p>Except for specific compatibility modes (chain-loading and the Linux
<dfn>piggyback</dfn> format), all kernels will be started in much the same
state as in the Multiboot Specification. Only kernels loaded at 1 megabyte
or above are presently supported. Any attempt to load below that
boundary will simply result in immediate failure and an error message
reporting the problem.

   <p>In addition to the requirements above, GRUB has the following features
(note that the Multiboot Specification doesn't require all the features
that GRUB supports):

     <dl>
<dt>Recognize multiple executable formats<dd>Support many of the <dfn>a.out</dfn> variants plus <dfn>ELF</dfn>. Symbol
tables are also loaded.

     <br><dt>Support non-Multiboot kernels<dd>Support many of the various free 32-bit kernels that lack Multiboot
compliance (primarily FreeBSD, NetBSD, OpenBSD, and
Linux). Chain-loading of other boot loaders is also supported.

     <br><dt>Load multiples modules<dd>Fully support the Multiboot feature of loading multiple modules.

     <br><dt>Load a configuration file<dd>Support a human-readable text configuration file with preset boot
commands. You can also load another configuration file dynamically and
embed a preset configuration file in a GRUB image file. The list of
commands (see <a href="#Commands">Commands</a>) are a superset of those supported on the
command-line. An example configuration file is provided in
<a href="#Configuration">Configuration</a>.

     <br><dt>Provide a menu interface<dd>A menu interface listing preset boot commands, with a programmable
timeout, is available. There is no fixed limit on the number of boot
entries, and the current implementation has space for several hundred.

     <br><dt>Have a flexible command-line interface<dd>A fairly flexible command-line interface, accessible from the menu,
is available to edit any preset commands, or write a new boot command
set from scratch. If no configuration file is present, GRUB drops to
the command-line.

     <p>The list of commands (see <a href="#Commands">Commands</a>) are a subset of those supported
for configuration files. Editing commands closely resembles the Bash
command-line (see <a href="features.html#Command-Line-Editing">Bash</a>), with &lt;TAB&gt;-completion of commands,
devices, partitions, and files in a directory depending on context.

     <br><dt>Support multiple filesystem types<dd>Support multiple filesystem types transparently, plus a useful explicit
blocklist notation. The currently supported filesystem types are
<dfn>BSD FFS</dfn>, <dfn>DOS FAT16 and FAT32</dfn>, <dfn>Minix fs</dfn>, <dfn>Linux
ext2fs</dfn>, <dfn>ReiserFS</dfn>, <dfn>JFS</dfn>, <dfn>XFS</dfn>, and <dfn>VSTa
fs</dfn>. See <a href="#Filesystem">Filesystem</a>, for more information.

     <br><dt>Support automatic decompression<dd>Can decompress files which were compressed by <samp><span class="command">gzip</span></samp>. This
function is both automatic and transparent to the user (i.e. all
functions operate upon the uncompressed contents of the specified
files). This greatly reduces a file size and loading time, a
particularly great benefit for floppies.<a rel="footnote" href="#fn-2" name="fnd-2"><sup>2</sup></a>

     <p>It is conceivable that some kernel modules should be loaded in a
compressed state, so a different module-loading command can be specified
to avoid uncompressing the modules.

     <br><dt>Access data on any installed device<dd>Support reading data from any or all floppies or hard disk(s) recognized
by the BIOS, independent of the setting of the root device.

     <br><dt>Be independent of drive geometry translations<dd>Unlike many other boot loaders, GRUB makes the particular drive
translation irrelevant. A drive installed and running with one
translation may be converted to another translation without any adverse
effects or changes in GRUB's configuration.

     <br><dt>Detect all installed <span class="sc">ram</span><dd>GRUB can generally find all the installed <span class="sc">ram</span> on a PC-compatible
machine. It uses an advanced BIOS query technique for finding all
memory regions. As described on the Multiboot Specification (see <a href="multiboot/multiboot.html#Top">Multiboot Specification</a>), not all kernels make use of this information, but GRUB
provides it for those who do.

     <br><dt>Support Logical Block Address mode<dd>In traditional disk calls (called <dfn>CHS mode</dfn>), there is a geometry
translation problem, that is, the BIOS cannot access over 1024
cylinders, so the accessible space is limited to at least 508 MB and to
at most 8GB. GRUB can't universally solve this problem, as there is no
standard interface used in all machines. However, several newer machines
have the new interface, Logical Block Address (<dfn>LBA</dfn>) mode. GRUB
automatically detects if LBA mode is available and uses it if
available. In LBA mode, GRUB can access the entire disk.

     <br><dt>Support network booting<dd>GRUB is basically a disk-based boot loader but also has network
support. You can load OS images from a network by using the <dfn>TFTP</dfn>
protocol.

     <br><dt>Support remote terminals<dd>To support computers with no console, GRUB provides remote terminal
support, so that you can control GRUB from a remote host. Only serial
terminal support is implemented at the moment. 
</dl>

<div class="node">
<p><hr>
<a name="Role-of-a-boot-loader"></a>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Features">Features</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Introduction">Introduction</a>

</div>

<h3 class="section">1.4 The role of a boot loader</h3>

<p>The following is a quotation from Gordon Matzigkeit, a GRUB fanatic:

   <blockquote>
Some people like to acknowledge both the operating system and kernel when
they talk about their computers, so they might say they use
&ldquo;GNU/Linux&rdquo; or &ldquo;GNU/Hurd&rdquo;.  Other people seem to think that the
kernel is the most important part of the system, so they like to call
their GNU operating systems &ldquo;Linux systems.&rdquo;

        <p>I, personally, believe that this is a grave injustice, because the
<em>boot loader</em> is the most important software of all. I used to
refer to the above systems as either &ldquo;LILO&rdquo;<a rel="footnote" href="#fn-3" name="fnd-3"><sup>3</sup></a> or &ldquo;GRUB&rdquo;
systems.

        <p>Unfortunately, nobody ever understood what I was talking about; now I
just use the word &ldquo;GNU&rdquo; as a pseudonym for GRUB.

        <p>So, if you ever hear people talking about their alleged &ldquo;GNU&rdquo; systems,
remember that they are actually paying homage to the best boot loader
around<small class="dots">...</small> GRUB! 
</blockquote>

   <p>We, the GRUB maintainers, do not (usually) encourage Gordon's level of
fanaticism, but it helps to remember that boot loaders deserve
recognition.  We hope that you enjoy using GNU GRUB as much as we did
writing it.

<div class="node">
<p><hr>
<a name="Naming-convention"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Installation">Installation</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Introduction">Introduction</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">2 Naming convention</h2>

<p>The device syntax used in GRUB is a wee bit different from what you may
have seen before in your operating system(s), and you need to know it so
that you can specify a drive/partition.

   <p>Look at the following examples and explanations:

<pre class="example">     (fd0)
</pre>
   <p>First of all, GRUB requires that the device name be enclosed with
`<samp><span class="samp">(</span></samp>' and `<samp><span class="samp">)</span></samp>'. The `<samp><span class="samp">fd</span></samp>' part means that it is a floppy
disk. The number `<samp><span class="samp">0</span></samp>' is the drive number, which is counted from
<em>zero</em>. This expression means that GRUB will use the whole floppy
disk.

<pre class="example">     (hd0,1)
</pre>
   <p>Here, `<samp><span class="samp">hd</span></samp>' means it is a hard disk drive. The first integer
`<samp><span class="samp">0</span></samp>' indicates the drive number, that is, the first hard disk, while
the second integer, `<samp><span class="samp">1</span></samp>', indicates the partition number (or the
<span class="sc">pc</span> slice number in the BSD terminology). Once again, please note
that the partition numbers are counted from <em>zero</em>, not from
one. This expression means the second partition of the first hard disk
drive. In this case, GRUB uses one partition of the disk, instead of the
whole disk.

<pre class="example">     (hd0,4)
</pre>
   <p>This specifies the first <dfn>extended partition</dfn> of the first hard disk
drive. Note that the partition numbers for extended partitions are
counted from `<samp><span class="samp">4</span></samp>', regardless of the actual number of primary
partitions on your hard disk.

<pre class="example">     (hd1,a)
</pre>
   <p>This means the BSD `<samp><span class="samp">a</span></samp>' partition of the second hard disk. If you
need to specify which <span class="sc">pc</span> slice number should be used, use something
like this: `<samp><span class="samp">(hd1,0,a)</span></samp>'. If the <span class="sc">pc</span> slice number is omitted,
GRUB searches for the first <span class="sc">pc</span> slice which has a BSD `<samp><span class="samp">a</span></samp>'
partition.

   <p>Of course, to actually access the disks or partitions with GRUB, you
need to use the device specification in a command, like `<samp><span class="samp">root
(fd0)</span></samp>' or `<samp><span class="samp">unhide (hd0,2)</span></samp>'. To help you find out which number
specifies a partition you want, the GRUB command-line
(see <a href="#Command_002dline-interface">Command-line interface</a>) options have argument
completion. This means that, for example, you only need to type

<pre class="example">     root (
</pre>
   <p>followed by a &lt;TAB&gt;, and GRUB will display the list of drives,
partitions, or file names. So it should be quite easy to determine the
name of your target partition, even with minimal knowledge of the
syntax.

   <p>Note that GRUB does <em>not</em> distinguish IDE from SCSI - it simply
counts the drive numbers from zero, regardless of their type. Normally,
any IDE drive number is less than any SCSI drive number, although that
is not true if you change the boot sequence by swapping IDE and SCSI
drives in your BIOS.

   <p>Now the question is, how to specify a file? Again, consider an
example:

<pre class="example">     (hd0,0)/vmlinuz
</pre>
   <p>This specifies the file named `<samp><span class="samp">vmlinuz</span></samp>', found on the first
partition of the first hard disk drive. Note that the argument
completion works with file names, too.

   <p>That was easy, admit it. Now read the next chapter, to find out how to
actually install GRUB on your drive.

<div class="node">
<p><hr>
<a name="Installation"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Booting">Booting</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Naming-convention">Naming convention</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">3 Installation</h2>

<p>In order to install GRUB as your boot loader, you need to first
install the GRUB system and utilities under your UNIX-like operating
system (see <a href="#Obtaining-and-Building-GRUB">Obtaining and Building GRUB</a>). You can do this either
from the source tarball, or as a package for your OS.

   <p>After you have done that, you need to install the boot loader on a
drive (floppy or hard disk). There are two ways of doing that - either
using the utility <samp><span class="command">grub-install</span></samp> (see <a href="#Invoking-grub_002dinstall">Invoking grub-install</a>) on a UNIX-like OS, or by running GRUB itself from a
floppy. These are quite similar, however the utility might probe a
wrong BIOS drive, so you should be careful.

   <p>Also, if you install GRUB on a UNIX-like OS, please make sure that you
have an emergency boot disk ready, so that you can rescue your computer
if, by any chance, your hard drive becomes unusable (unbootable).

   <p>GRUB comes with boot images, which are normally put in the directory
<samp><span class="file">/usr/lib/grub/i386-pc</span></samp>. If you do not use grub-install, then
you need to copy the files <samp><span class="file">stage1</span></samp>, <samp><span class="file">stage2</span></samp>, and
<samp><span class="file">*stage1_5</span></samp> to the directory <samp><span class="file">/boot/grub</span></samp>, and run the
<samp><span class="command">grub-set-default</span></samp> (see <a href="#Invoking-grub_002dset_002ddefault">Invoking grub-set-default</a>) if you
intend to use `<samp><span class="samp">default saved</span></samp>' (see <a href="#default">default</a>) in your
configuration file. Hereafter, the directory where GRUB images are
initially placed (normally <samp><span class="file">/usr/lib/grub/i386-pc</span></samp>) will be
called the <dfn>image directory</dfn>, and the directory where the boot
loader needs to find them (usually <samp><span class="file">/boot/grub</span></samp>) will be called
the <dfn>boot directory</dfn>.

<ul class="menu">
<li><a accesskey="1" href="#Creating-a-GRUB-boot-floppy">Creating a GRUB boot floppy</a>
<li><a accesskey="2" href="#Installing-GRUB-natively">Installing GRUB natively</a>
<li><a accesskey="3" href="#Installing-GRUB-using-grub_002dinstall">Installing GRUB using grub-install</a>
<li><a accesskey="4" href="#Making-a-GRUB-bootable-CD_002dROM">Making a GRUB bootable CD-ROM</a>
</ul>

<div class="node">
<p><hr>
<a name="Creating-a-GRUB-boot-floppy"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Installing-GRUB-natively">Installing GRUB natively</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Installation">Installation</a>

</div>

<h3 class="section">3.1 Creating a GRUB boot floppy</h3>

<p>To create a GRUB boot floppy, you need to take the files <samp><span class="file">stage1</span></samp>
and <samp><span class="file">stage2</span></samp> from the image directory, and write them to the first
and the second block of the floppy disk, respectively.

   <p><strong>Caution:</strong> This procedure will destroy any data currently stored
on the floppy.

   <p>On a UNIX-like operating system, that is done with the following
commands:

<pre class="example">     # <kbd>cd /usr/lib/grub/i386-pc</kbd>
     # <kbd>dd if=stage1 of=/dev/fd0 bs=512 count=1</kbd>
     1+0 records in
     1+0 records out
     # <kbd>dd if=stage2 of=/dev/fd0 bs=512 seek=1</kbd>
     153+1 records in
     153+1 records out
     #
</pre>
   <p>The device file name may be different. Consult the manual for your OS.

<div class="node">
<p><hr>
<a name="Installing-GRUB-natively"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Installing-GRUB-using-grub_002dinstall">Installing GRUB using grub-install</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Creating-a-GRUB-boot-floppy">Creating a GRUB boot floppy</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Installation">Installation</a>

</div>

<h3 class="section">3.2 Installing GRUB natively</h3>

<p><strong>Caution:</strong> Installing GRUB's stage1 in this manner will erase the
normal boot-sector used by an OS.

   <p>GRUB can currently boot GNU Mach, Linux, FreeBSD, NetBSD, and OpenBSD
directly, so using it on a boot sector (the first sector of a
partition) should be okay. But generally, it would be a good idea to
back up the first sector of the partition on which you are installing
GRUB's stage1. This isn't as important if you are installing GRUB on
the first sector of a hard disk, since it's easy to reinitialize it
(e.g. by running `<samp><span class="samp">FDISK /MBR</span></samp>' from DOS).

   <p>If you decide to install GRUB in the native environment, which is
definitely desirable, you'll need to create a GRUB boot disk, and
reboot your computer with it. Otherwise, see <a href="#Installing-GRUB-using-grub_002dinstall">Installing GRUB using grub-install</a>.

   <p>Once started, GRUB will show the command-line interface
(see <a href="#Command_002dline-interface">Command-line interface</a>). First, set the GRUB's <dfn>root
device</dfn><a rel="footnote" href="#fn-4" name="fnd-4"><sup>4</sup></a> to the
partition containing the boot directory, like this:

<pre class="example">     grub&gt; <kbd>root (hd0,0)</kbd>
</pre>
   <p>If you are not sure which partition actually holds this directory, use the
command <samp><span class="command">find</span></samp> (see <a href="#find">find</a>), like this:

<pre class="example">     grub&gt; <kbd>find /boot/grub/stage1</kbd>
</pre>
   <p>This will search for the file name <samp><span class="file">/boot/grub/stage1</span></samp> and show the
devices which contain the file.

   <p>Once you've set the root device correctly, run the command
<samp><span class="command">setup</span></samp> (see <a href="#setup">setup</a>):

<pre class="example">     grub&gt; <kbd>setup (hd0)</kbd>
</pre>
   <p>This command will install the GRUB boot loader on the Master Boot
Record (MBR) of the first drive. If you want to put GRUB into the boot
sector of a partition instead of putting it in the MBR, specify the
partition into which you want to install GRUB:

<pre class="example">     grub&gt; <kbd>setup (hd0,0)</kbd>
</pre>
   <p>If you install GRUB into a partition or a drive other than the first
one, you must chain-load GRUB from another boot loader. Refer to the
manual for the boot loader to know how to chain-load GRUB.

   <p>After using the setup command, you will boot into GRUB without the
GRUB floppy. See the chapter <a href="#Booting">Booting</a> to find out how to boot
your operating systems from GRUB.

<div class="node">
<p><hr>
<a name="Installing-GRUB-using-grub-install"></a>
<a name="Installing-GRUB-using-grub_002dinstall"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Making-a-GRUB-bootable-CD_002dROM">Making a GRUB bootable CD-ROM</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Installing-GRUB-natively">Installing GRUB natively</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Installation">Installation</a>

</div>

<h3 class="section">3.3 Installing GRUB using grub-install</h3>

<p><strong>Caution:</strong> This procedure is definitely less safe, because
there are several ways in which your computer can become
unbootable. For example, most operating systems don't tell GRUB how to
map BIOS drives to OS devices correctly&mdash;GRUB merely <dfn>guesses</dfn>
the mapping. This will succeed in most cases, but not
always. Therefore, GRUB provides you with a map file called the
<dfn>device map</dfn>, which you must fix if it is wrong. See <a href="#Device-map">Device map</a>, for more details.

   <p>If you still do want to install GRUB under a UNIX-like OS (such
as <span class="sc">gnu</span>), invoke the program <samp><span class="command">grub-install</span></samp> (see <a href="#Invoking-grub_002dinstall">Invoking grub-install</a>) as the superuser (<dfn>root</dfn>).

   <p>The usage is basically very simple. You only need to specify one
argument to the program, namely, where to install the boot loader. The
argument can be either a device file (like `<samp><span class="samp">/dev/hda</span></samp>') or a
partition specified in GRUB's notation. For example, under Linux the
following will install GRUB into the MBR of the first IDE disk:

<pre class="example">     # <kbd>grub-install /dev/hda</kbd>
</pre>
   <p>Likewise, under GNU/Hurd, this has the same effect:

<pre class="example">     # <kbd>grub-install /dev/hd0</kbd>
</pre>
   <p>If it is the first BIOS drive, this is the same as well:

<pre class="example">     # <kbd>grub-install '(hd0)'</kbd>
</pre>
   <p>Or you can omit the parentheses:

<pre class="example">     # <kbd>grub-install hd0</kbd>
</pre>
   <p>But all the above examples assume that GRUB should use images under
the root directory. If you want GRUB to use images under a directory
other than the root directory, you need to specify the option
<samp><span class="option">--root-directory</span></samp>. The typical usage is that you create a GRUB
boot floppy with a filesystem. Here is an example:

<pre class="example">     # <kbd>mke2fs /dev/fd0</kbd>
     # <kbd>mount -t ext2 /dev/fd0 /mnt</kbd>
     # <kbd>grub-install --root-directory=/mnt fd0</kbd>
     # <kbd>umount /mnt</kbd>
</pre>
   <p>Another example is when you have a separate boot partition
which is mounted at <samp><span class="file">/boot</span></samp>. Since GRUB is a boot loader, it
doesn't know anything about mountpoints at all. Thus, you need to run
<samp><span class="command">grub-install</span></samp> like this:

<pre class="example">     # <kbd>grub-install --root-directory=/boot /dev/hda</kbd>
</pre>
   <p>By the way, as noted above, it is quite difficult to guess BIOS drives
correctly under a UNIX-like OS. Thus, <samp><span class="command">grub-install</span></samp> will prompt
you to check if it could really guess the correct mappings, after the
installation. The format is defined in <a href="#Device-map">Device map</a>. Please be
quite careful. If the output is wrong, it is unlikely that your
computer will be able to boot with no problem.

   <p>Note that <samp><span class="command">grub-install</span></samp> is actually just a shell script and the
real task is done by the grub shell <samp><span class="command">grub</span></samp> (see <a href="#Invoking-the-grub-shell">Invoking the grub shell</a>). Therefore, you may run <samp><span class="command">grub</span></samp> directly to install
GRUB, without using <samp><span class="command">grub-install</span></samp>. Don't do that, however,
unless you are very familiar with the internals of GRUB. Installing a
boot loader on a running OS may be extremely dangerous.

<div class="node">
<p><hr>
<a name="Making-a-GRUB-bootable-CD-ROM"></a>
<a name="Making-a-GRUB-bootable-CD_002dROM"></a>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Installing-GRUB-using-grub_002dinstall">Installing GRUB using grub-install</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Installation">Installation</a>

</div>

<h3 class="section">3.4 Making a GRUB bootable CD-ROM</h3>

<p>GRUB supports the <dfn>no emulation mode</dfn> in the El Torito
specification<a rel="footnote" href="#fn-5" name="fnd-5"><sup>5</sup></a>. This means that you can use the whole CD-ROM
from GRUB and you don't have to make a floppy or hard disk image file,
which can cause compatibility problems.

   <p>For booting from a CD-ROM, GRUB uses a special Stage 2 called
<samp><span class="file">stage2_eltorito</span></samp>. The only GRUB files you need to have in your
bootable CD-ROM are this <samp><span class="file">stage2_eltorito</span></samp> and optionally a config file
<samp><span class="file">menu.lst</span></samp>. You don't need to use <samp><span class="file">stage1</span></samp> or <samp><span class="file">stage2</span></samp>,
because El Torito is quite different from the standard boot process.

   <p>Here is an example of procedures to make a bootable CD-ROM
image. First, make a top directory for the bootable image, say,
`<samp><span class="samp">iso</span></samp>':

<pre class="example">     $ <kbd>mkdir iso</kbd>
</pre>
   <p>Make a directory for GRUB:

<pre class="example">     $ <kbd>mkdir -p iso/boot/grub</kbd>
</pre>
   <p>Copy the file <samp><span class="file">stage2_eltorito</span></samp>:

<pre class="example">     $ <kbd>cp /usr/lib/grub/i386-pc/stage2_eltorito iso/boot/grub</kbd>
</pre>
   <p>If desired, make the config file <samp><span class="file">menu.lst</span></samp> under <samp><span class="file">iso/boot/grub</span></samp>
(see <a href="#Configuration">Configuration</a>), and copy any files and directories for the disc to the
directory <samp><span class="file">iso/</span></samp>.

   <p>Finally, make a ISO9660 image file like this:

<pre class="example">     $ <kbd>mkisofs -R -b boot/grub/stage2_eltorito -no-emul-boot \
         -boot-load-size 4 -boot-info-table -o grub.iso iso</kbd>
</pre>
   <p>This produces a file named <samp><span class="file">grub.iso</span></samp>, which then can be burned
into a CD (or a DVD).  <kbd>mkisofs</kbd> has already set up the disc to boot
from the <kbd>boot/grub/stage2_eltorito</kbd> file, so there is no need to
setup GRUB on the disc.  (Note that the <kbd>-boot-load-size 4</kbd> bit is
required for compatibility with the BIOS on many older machines.)

   <p>You can use the device `<samp><span class="samp">(cd)</span></samp>' to access a CD-ROM in your
config file. This is not required; GRUB automatically sets the root device
to `<samp><span class="samp">(cd)</span></samp>' when booted from a CD-ROM. It is only necessary to refer to
`<samp><span class="samp">(cd)</span></samp>' if you want to access other drives as well.

<div class="node">
<p><hr>
<a name="Booting"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Configuration">Configuration</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Installation">Installation</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">4 Booting</h2>

<p>GRUB can load Multiboot-compliant kernels in a consistent way,
but for some free operating systems you need to use some OS-specific
magic.

<ul class="menu">
<li><a accesskey="1" href="#General-boot-methods">General boot methods</a>:         How to boot OSes with GRUB generally
<li><a accesskey="2" href="#OS_002dspecific-notes">OS-specific notes</a>:            Notes on some operating systems
<li><a accesskey="3" href="#Making-your-system-robust">Making your system robust</a>:    How to make your system robust
</ul>

<div class="node">
<p><hr>
<a name="General-boot-methods"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#OS_002dspecific-notes">OS-specific notes</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Booting">Booting</a>

</div>

<h3 class="section">4.1 How to boot operating systems</h3>

<p>GRUB has two distinct boot methods. One of the two is to load an
operating system directly, and the other is to chain-load another boot
loader which then will load an operating system actually. Generally
speaking, the former is more desirable, because you don't need to
install or maintain other boot loaders and GRUB is flexible enough to
load an operating system from an arbitrary disk/partition. However,
the latter is sometimes required, since GRUB doesn't support all the
existing operating systems natively.

<ul class="menu">
<li><a accesskey="1" href="#Loading-an-operating-system-directly">Loading an operating system directly</a>
<li><a accesskey="2" href="#Chain_002dloading">Chain-loading</a>
</ul>

<div class="node">
<p><hr>
<a name="Loading-an-operating-system-directly"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Chain_002dloading">Chain-loading</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#General-boot-methods">General boot methods</a>

</div>

<h4 class="subsection">4.1.1 How to boot an OS directly with GRUB</h4>

<p>Multiboot (see <a href="multiboot/multiboot.html#Top">Multiboot Specification</a>) is the native format supported by GRUB. 
For the sake of convenience, there is also support for Linux, FreeBSD,
NetBSD and OpenBSD. If you want to boot other operating systems, you
will have to chain-load them (see <a href="#Chain_002dloading">Chain-loading</a>).

   <p>Generally, GRUB can boot any Multiboot-compliant OS in the following
steps:

     <ol type=1 start=1>
<li>Set GRUB's root device to the drive where the OS images are stored with
the command <samp><span class="command">root</span></samp> (see <a href="#root">root</a>).

     <li>Load the kernel image with the command <samp><span class="command">kernel</span></samp> (see <a href="#kernel">kernel</a>).

     <li>If you need modules, load them with the command <samp><span class="command">module</span></samp>
(see <a href="#module">module</a>) or <samp><span class="command">modulenounzip</span></samp> (see <a href="#modulenounzip">modulenounzip</a>).

     <li>Run the command <samp><span class="command">boot</span></samp> (see <a href="#boot">boot</a>).
        </ol>

   <p>Linux, FreeBSD, NetBSD and OpenBSD can be booted in a similar
manner. You load a kernel image with the command <samp><span class="command">kernel</span></samp> and
then run the command <samp><span class="command">boot</span></samp>. If the kernel requires some
parameters, just append the parameters to <samp><span class="command">kernel</span></samp>, after the
file name of the kernel. Also, please refer to <a href="#OS_002dspecific-notes">OS-specific notes</a>,
for information on your OS-specific issues.

<div class="node">
<p><hr>
<a name="Chain-loading"></a>
<a name="Chain_002dloading"></a>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Loading-an-operating-system-directly">Loading an operating system directly</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#General-boot-methods">General boot methods</a>

</div>

<h4 class="subsection">4.1.2 Load another boot loader to boot unsupported operating systems</h4>

<p>If you want to boot an unsupported operating system (e.g. Windows 95),
chain-load a boot loader for the operating system. Normally, the boot
loader is embedded in the <dfn>boot sector</dfn> of the partition on which
the operating system is installed.

     <ol type=1 start=1>
<li>Set GRUB's root device to the partition by the command
<samp><span class="command">rootnoverify</span></samp> (see <a href="#rootnoverify">rootnoverify</a>):

     <pre class="example">          grub&gt; <kbd>rootnoverify (hd0,0)</kbd>
     </pre>
     <li>Set the <dfn>active</dfn> flag in the partition using the command
<samp><span class="command">makeactive</span></samp><a rel="footnote" href="#fn-6" name="fnd-6"><sup>6</sup></a> (see <a href="#makeactive">makeactive</a>):

     <pre class="example">          grub&gt; <kbd>makeactive</kbd>
     </pre>
     <li>Load the boot loader with the command <samp><span class="command">chainloader</span></samp>
(see <a href="#chainloader">chainloader</a>):

     <pre class="example">          grub&gt; <kbd>chainloader +1</kbd>
     </pre>
     <p>`<samp><span class="samp">+1</span></samp>' indicates that GRUB should read one sector from the start of
the partition. The complete description about this syntax can be found
in <a href="#Block-list-syntax">Block list syntax</a>.

     <li>Run the command <samp><span class="command">boot</span></samp> (see <a href="#boot">boot</a>).
        </ol>

   <p>However, DOS and Windows have some deficiencies, so you might have to
use more complicated instructions. See <a href="#DOS_002fWindows">DOS/Windows</a>, for more
information.

<div class="node">
<p><hr>
<a name="OS-specific-notes"></a>
<a name="OS_002dspecific-notes"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Making-your-system-robust">Making your system robust</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#General-boot-methods">General boot methods</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Booting">Booting</a>

</div>

<h3 class="section">4.2 Some caveats on OS-specific issues</h3>

<p>Here, we describe some caveats on several operating systems.

<ul class="menu">
<li><a accesskey="1" href="#GNU_002fHurd">GNU/Hurd</a>
<li><a accesskey="2" href="#GNU_002fLinux">GNU/Linux</a>
<li><a accesskey="3" href="#FreeBSD">FreeBSD</a>
<li><a accesskey="4" href="#NetBSD">NetBSD</a>
<li><a accesskey="5" href="#OpenBSD">OpenBSD</a>
<li><a accesskey="6" href="#DOS_002fWindows">DOS/Windows</a>
<li><a accesskey="7" href="#SCO-UnixWare">SCO UnixWare</a>
<li><a accesskey="8" href="#QNX">QNX</a>
</ul>

<div class="node">
<p><hr>
<a name="GNU%2fHurd"></a>
<a name="GNU_002fHurd"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#GNU_002fLinux">GNU/Linux</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#OS_002dspecific-notes">OS-specific notes</a>

</div>

<h4 class="subsection">4.2.1 GNU/Hurd</h4>

<p>Since GNU/Hurd is Multiboot-compliant, it is easy to boot it; there is
nothing special about it. But do not forget that you have to specify a
root partition to the kernel.

     <ol type=1 start=1>
<li>Set GRUB's root device to the same drive as GNU/Hurd's. Probably the
command <code>find /boot/gnumach</code> or similar can help you
(see <a href="#find">find</a>).

     <li>Load the kernel and the module, like this:

     <pre class="example">          grub&gt; <kbd>kernel /boot/gnumach root=hd0s1</kbd>
          grub&gt; <kbd>module /boot/serverboot</kbd>
     </pre>
     <li>Run the command <samp><span class="command">boot</span></samp> (see <a href="#boot">boot</a>).
        </ol>

<div class="node">
<p><hr>
<a name="GNU%2fLinux"></a>
<a name="GNU_002fLinux"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#FreeBSD">FreeBSD</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#GNU_002fHurd">GNU/Hurd</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#OS_002dspecific-notes">OS-specific notes</a>

</div>

<h4 class="subsection">4.2.2 GNU/Linux</h4>

<p>It is relatively easy to boot GNU/Linux from GRUB, because it somewhat
resembles to boot a Multiboot-compliant OS.

     <ol type=1 start=1>
<li>Set GRUB's root device to the same drive as GNU/Linux's. Probably the
command <code>find /vmlinuz</code> or similar can help you (see <a href="#find">find</a>).

     <li>Load the kernel:

     <pre class="example">          grub&gt; <kbd>kernel /vmlinuz root=/dev/hda1</kbd>
     </pre>
     <p>If you need to specify some kernel parameters, just append them to the
command. For example, to set <samp><span class="option">vga</span></samp> to `<samp><span class="samp">ext</span></samp>', do this:

     <pre class="example">          grub&gt; <kbd>kernel /vmlinuz root=/dev/hda1 vga=ext</kbd>
     </pre>
     <p>See the documentation in the Linux source tree for complete
information on the available options.

     <li>If you use an initrd, execute the command <samp><span class="command">initrd</span></samp>
(see <a href="#initrd">initrd</a>) after <samp><span class="command">kernel</span></samp>:

     <pre class="example">          grub&gt; <kbd>initrd /initrd</kbd>
     </pre>
     <li>Finally, run the command <samp><span class="command">boot</span></samp> (see <a href="#boot">boot</a>).
        </ol>

   <p><strong>Caution:</strong> If you use an initrd and specify the `<samp><span class="samp">mem=</span></samp>'
option to the kernel to let it use less than actual memory size, you
will also have to specify the same memory size to GRUB. To let GRUB know
the size, run the command <samp><span class="command">uppermem</span></samp> <em>before</em> loading the
kernel. See <a href="#uppermem">uppermem</a>, for more information.

<div class="node">
<p><hr>
<a name="FreeBSD"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#NetBSD">NetBSD</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#GNU_002fLinux">GNU/Linux</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#OS_002dspecific-notes">OS-specific notes</a>

</div>

<h4 class="subsection">4.2.3 FreeBSD</h4>

<p>GRUB can load the kernel directly, either in ELF or a.out format. But
this is not recommended, since FreeBSD's bootstrap interface sometimes
changes heavily, so GRUB can't guarantee to pass kernel parameters
correctly.

   <p>Thus, we'd recommend loading the very flexible loader
<samp><span class="file">/boot/loader</span></samp> instead. See this example:

<pre class="example">     grub&gt; <kbd>root (hd0,a)</kbd>
     grub&gt; <kbd>kernel /boot/loader</kbd>
     grub&gt; <kbd>boot</kbd>
</pre>
   <div class="node">
<p><hr>
<a name="NetBSD"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#OpenBSD">OpenBSD</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#FreeBSD">FreeBSD</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#OS_002dspecific-notes">OS-specific notes</a>

</div>

<h4 class="subsection">4.2.4 NetBSD</h4>

<p>GRUB can load NetBSD a.out and ELF directly, follow these steps:

     <ol type=1 start=1>
<li>Set GRUB's root device with <samp><span class="command">root</span></samp> (see <a href="#root">root</a>).

     <li>Load the kernel with <samp><span class="command">kernel</span></samp> (see <a href="#kernel">kernel</a>). You should
append the ugly option <samp><span class="option">--type=netbsd</span></samp>, if you want to load an
ELF kernel, like this:

     <pre class="example">          grub&gt; <kbd>kernel --type=netbsd /netbsd-elf</kbd>
     </pre>
     <li>Run <samp><span class="command">boot</span></samp> (see <a href="#boot">boot</a>).
        </ol>

   <p>For now, however, GRUB doesn't allow you to pass kernel parameters, so
it may be better to chain-load it instead. For more information, please
see <a href="#Chain_002dloading">Chain-loading</a>.

<div class="node">
<p><hr>
<a name="OpenBSD"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#DOS_002fWindows">DOS/Windows</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#NetBSD">NetBSD</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#OS_002dspecific-notes">OS-specific notes</a>

</div>

<h4 class="subsection">4.2.5 OpenBSD</h4>

<p>The booting instruction is exactly the same as for NetBSD
(see <a href="#NetBSD">NetBSD</a>).

<div class="node">
<p><hr>
<a name="DOS%2fWindows"></a>
<a name="DOS_002fWindows"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#SCO-UnixWare">SCO UnixWare</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#OpenBSD">OpenBSD</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#OS_002dspecific-notes">OS-specific notes</a>

</div>

<h4 class="subsection">4.2.6 DOS/Windows</h4>

<p>GRUB cannot boot DOS or Windows directly, so you must chain-load them
(see <a href="#Chain_002dloading">Chain-loading</a>). However, their boot loaders have some critical
deficiencies, so it may not work to just chain-load them. To overcome
the problems, GRUB provides you with two helper functions.

   <p>If you have installed DOS (or Windows) on a non-first hard disk, you
have to use the disk swapping technique, because that OS cannot boot
from any disks but the first one. The workaround used in GRUB is the
command <samp><span class="command">map</span></samp> (see <a href="#map">map</a>), like this:

<pre class="example">     grub&gt; <kbd>map (hd0) (hd1)</kbd>
     grub&gt; <kbd>map (hd1) (hd0)</kbd>
</pre>
   <p>This performs a <dfn>virtual</dfn> swap between your first and second hard
drive.

   <p><strong>Caution:</strong> This is effective only if DOS (or Windows) uses BIOS
to access the swapped disks. If that OS uses a special driver for the
disks, this probably won't work.

   <p>Another problem arises if you installed more than one set of DOS/Windows
onto one disk, because they could be confused if there are more than one
primary partitions for DOS/Windows. Certainly you should avoid doing
this, but there is a solution if you do want to do so. Use the partition
hiding/unhiding technique.

   <p>If GRUB <dfn>hide</dfn>s a DOS (or Windows) partition (see <a href="#hide">hide</a>), DOS (or
Windows) will ignore the partition. If GRUB <dfn>unhide</dfn>s a DOS (or
Windows) partition (see <a href="#unhide">unhide</a>), DOS (or Windows) will detect the
partition. Thus, if you have installed DOS (or Windows) on the first
and the second partition of the first hard disk, and you want to boot
the copy on the first partition, do the following:

<pre class="example">     grub&gt; <kbd>unhide (hd0,0)</kbd>
     grub&gt; <kbd>hide (hd0,1)</kbd>
     grub&gt; <kbd>rootnoverify (hd0,0)</kbd>
     grub&gt; <kbd>chainloader +1</kbd>
     grub&gt; <kbd>makeactive</kbd>
     grub&gt; <kbd>boot</kbd>
</pre>
   <div class="node">
<p><hr>
<a name="SCO-UnixWare"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#QNX">QNX</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#DOS_002fWindows">DOS/Windows</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#OS_002dspecific-notes">OS-specific notes</a>

</div>

<h4 class="subsection">4.2.7 SCO UnixWare</h4>

<p>It is known that the signature in the boot loader for SCO UnixWare is
wrong, so you will have to specify the option <samp><span class="option">--force</span></samp> to
<samp><span class="command">chainloader</span></samp> (see <a href="#chainloader">chainloader</a>), like this:

<pre class="example">     grub&gt; <kbd>rootnoverify (hd1,0)</kbd>
     grub&gt; <kbd>chainloader --force +1</kbd>
     grub&gt; <kbd>makeactive</kbd>
     grub&gt; <kbd>boot</kbd>
</pre>
   <div class="node">
<p><hr>
<a name="QNX"></a>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#SCO-UnixWare">SCO UnixWare</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#OS_002dspecific-notes">OS-specific notes</a>

</div>

<h4 class="subsection">4.2.8 QNX</h4>

<p>QNX seems to use a bigger boot loader, so you need to boot it up, like
this:

<pre class="example">     grub&gt; <kbd>rootnoverify (hd1,1)</kbd>
     grub&gt; <kbd>chainloader +4</kbd>
     grub&gt; <kbd>boot</kbd>
</pre>
   <div class="node">
<p><hr>
<a name="Making-your-system-robust"></a>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#OS_002dspecific-notes">OS-specific notes</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Booting">Booting</a>

</div>

<h3 class="section">4.3 How to make your system robust</h3>

<p>When you test a new kernel or a new OS, it is important to make sure
that your computer can boot even if the new system is unbootable. This
is crucial especially if you maintain servers or remote systems. To
accomplish this goal, you need to set up two things:

     <ol type=1 start=1>
<li>You must maintain a system which is always bootable. For instance, if
you test a new kernel, you need to keep a working kernel in a
different place. And, it would sometimes be very nice to even have a
complete copy of a working system in a different partition or disk.

     <li>You must direct GRUB to boot a working system when the new system
fails. This is possible with the <dfn>fallback</dfn> system in GRUB.
        </ol>

   <p>The former requirement is very specific to each OS, so this
documentation does not cover that topic. It is better to consult some
backup tools.

   <p>So let's see the GRUB part. There are two possibilities: one of them
is quite simple but not very robust, and the other is a bit complex to
set up but probably the best solution to make sure that your system
can start as long as GRUB itself is bootable.

<ul class="menu">
<li><a accesskey="1" href="#Booting-once_002donly">Booting once-only</a>
<li><a accesskey="2" href="#Booting-fallback-systems">Booting fallback systems</a>
</ul>

<div class="node">
<p><hr>
<a name="Booting-once-only"></a>
<a name="Booting-once_002donly"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Booting-fallback-systems">Booting fallback systems</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Making-your-system-robust">Making your system robust</a>

</div>

<h4 class="subsection">4.3.1 Booting once-only</h4>

<p>You can teach GRUB to boot an entry only at next boot time. Suppose
that your have an old kernel <samp><span class="file">old_kernel</span></samp> and a new kernel
<samp><span class="file">new_kernel</span></samp>. You know that <samp><span class="file">old_kernel</span></samp> can boot
your system correctly, and you want to test <samp><span class="file">new_kernel</span></samp>.

   <p>To ensure that your system will go back to the old kernel even if the
new kernel fails (e.g. it panics), you can specify that GRUB should
try the new kernel only once and boot the old kernel after that.

   <p>First, modify your configuration file. Here is an example:

<pre class="example">     default saved        # This is important!!!
     timeout 10
     
     title the old kernel
     root (hd0,0)
     kernel /old_kernel
     savedefault
     
     title the new kernel
     root (hd0,0)
     kernel /new_kernel
     savedefault 0         # This is important!!!
</pre>
   <p>Note that this configuration file uses `<samp><span class="samp">default saved</span></samp>'
(see <a href="#default">default</a>) at the head and `<samp><span class="samp">savedefault 0</span></samp>'
(see <a href="#savedefault">savedefault</a>) in the entry for the new kernel. This means
that GRUB boots a saved entry by default, and booting the entry for the
new kernel saves `<samp><span class="samp">0</span></samp>' as the saved entry.

   <p>With this configuration file, after all, GRUB always tries to boot the
old kernel after it booted the new one, because `<samp><span class="samp">0</span></samp>' is the entry
of <code>the old kernel</code>.

   <p>The next step is to tell GRUB to boot the new kernel at next boot
time. For this, execute <samp><span class="command">grub-set-default</span></samp> (see <a href="#Invoking-grub_002dset_002ddefault">Invoking grub-set-default</a>):

<pre class="example">     # <kbd>grub-set-default 1</kbd>
</pre>
   <p>This command sets the saved entry to `<samp><span class="samp">1</span></samp>', that is, to the new
kernel.

   <p>This method is useful, but still not very robust, because GRUB stops
booting, if there is any error in the boot entry, such that the new
kernel has an invalid executable format. Thus, it it even better to
use the <dfn>fallback</dfn> mechanism of GRUB. Look at next subsection for
this feature.

<div class="node">
<p><hr>
<a name="Booting-fallback-systems"></a>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Booting-once_002donly">Booting once-only</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Making-your-system-robust">Making your system robust</a>

</div>

<h4 class="subsection">4.3.2 Booting fallback systems</h4>

<p>GRUB supports a fallback mechanism of booting one or more other
entries if a default boot entry fails. You can specify multiple
fallback entries if you wish.

   <p>Suppose that you have three systems, `<samp><span class="samp">A</span></samp>', `<samp><span class="samp">B</span></samp>' and
`<samp><span class="samp">C</span></samp>'. `<samp><span class="samp">A</span></samp>' is a system which you want to boot by
default. `<samp><span class="samp">B</span></samp>' is a backup system which is supposed to boot
safely. `<samp><span class="samp">C</span></samp>' is another backup system which is used in case where
`<samp><span class="samp">B</span></samp>' is broken.

   <p>Then you may want GRUB to boot the first system which is bootable
among `<samp><span class="samp">A</span></samp>', `<samp><span class="samp">B</span></samp>' and `<samp><span class="samp">C</span></samp>'. A configuration file can be
written in this way:

<pre class="example">     default saved        # This is important!!!
     timeout 10
     fallback 1 2         # This is important!!!
     
     title A
     root (hd0,0)
     kernel /kernel
     savedefault fallback # This is important!!!
     
     title B
     root (hd1,0)
     kernel /kernel
     savedefault fallback # This is important!!!
     
     title C
     root (hd2,0)
     kernel /kernel
     savedefault
</pre>
   <p>Note that `<samp><span class="samp">default saved</span></samp>' (see <a href="#default">default</a>), `<samp><span class="samp">fallback 1 2</span></samp>'
and `<samp><span class="samp">savedefault fallback</span></samp>' are used. GRUB will boot a saved entry
by default and save a fallback entry as next boot entry with this
configuration.

   <p>When GRUB tries to boot `<samp><span class="samp">A</span></samp>', GRUB saves `<samp><span class="samp">1</span></samp>' as next boot
entry, because the command <samp><span class="command">fallback</span></samp> specifies that `<samp><span class="samp">1</span></samp>'
is the first fallback entry. The entry `<samp><span class="samp">1</span></samp>' is `<samp><span class="samp">B</span></samp>', so GRUB
will try to boot `<samp><span class="samp">B</span></samp>' at next boot time.

   <p>Likewise, when GRUB tries to boot `<samp><span class="samp">B</span></samp>', GRUB saves `<samp><span class="samp">2</span></samp>' as
next boot entry, because <samp><span class="command">fallback</span></samp> specifies `<samp><span class="samp">2</span></samp>' as next
fallback entry. This makes sure that GRUB will boot `<samp><span class="samp">C</span></samp>' after
booting `<samp><span class="samp">B</span></samp>'.

   <p>It is noteworthy that GRUB uses fallback entries both when GRUB
itself fails in booting an entry and when `<samp><span class="samp">A</span></samp>' or `<samp><span class="samp">B</span></samp>' fails
in starting up your system. So this solution ensures that your system
is started even if GRUB cannot find your kernel or if your kernel
panics.

   <p>However, you need to run <samp><span class="command">grub-set-default</span></samp> (see <a href="#Invoking-grub_002dset_002ddefault">Invoking grub-set-default</a>) when `<samp><span class="samp">A</span></samp>' starts correctly or you fix `<samp><span class="samp">A</span></samp>'
after it crashes, since GRUB always sets next boot entry to a fallback
entry. You should run this command in a startup script such as
<samp><span class="file">rc.local</span></samp> to boot `<samp><span class="samp">A</span></samp>' by default:

<pre class="example">     # <kbd>grub-set-default 0</kbd>
</pre>
   <p>where `<samp><span class="samp">0</span></samp>' is the number of the boot entry for the system
`<samp><span class="samp">A</span></samp>'.

   <p>If you want to see what is current default entry, you can look at the
file <samp><span class="file">/boot/grub/default</span></samp> (or <samp><span class="file">/grub/default</span></samp> in
some systems). Because this file is plain-text, you can just
<samp><span class="command">cat</span></samp> this file. But it is strongly recommended <strong>not to
modify this file directly</strong>, because GRUB may fail in saving a default
entry in this file, if you change this file in an unintended
manner. Therefore, you should use <samp><span class="command">grub-set-default</span></samp> when you
need to change the default entry.

<div class="node">
<p><hr>
<a name="Configuration"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Network">Network</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Booting">Booting</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">5 Configuration</h2>

<p>You've probably noticed that you need to type several commands to boot your
OS. There's a solution to that - GRUB provides a menu interface
(see <a href="#Menu-interface">Menu interface</a>) from which you can select an item (using arrow
keys) that will do everything to boot an OS.

   <p>To enable the menu, you need a configuration file,
<samp><span class="file">menu.lst</span></samp> under the boot directory. We'll analyze an example
file.

   <p>The file first contains some general settings, the menu interface
related options. You can put these commands (see <a href="#Menu_002dspecific-commands">Menu-specific commands</a>) before any of the items (starting with <samp><span class="command">title</span></samp>
(see <a href="#title">title</a>)).

<pre class="example">     #
     # Sample boot menu configuration file
     #
</pre>
   <p>As you may have guessed, these lines are comments. Lines starting with a
hash character (`<samp><span class="samp">#</span></samp>'), and blank lines, are ignored by GRUB.

<pre class="example">     # By default, boot the first entry.
     default 0
</pre>
   <p>The first entry (here, counting starts with number zero, not one!) will
be the default choice.

<pre class="example">     # Boot automatically after 30 secs.
     timeout 30
</pre>
   <p>As the comment says, GRUB will boot automatically in 30 seconds, unless
interrupted with a keypress.

<pre class="example">     # Fallback to the second entry.
     fallback 1
</pre>
   <p>If, for any reason, the default entry doesn't work, fall back to the
second one (this is rarely used, for obvious reasons).

   <p>Note that the complete descriptions of these commands, which are menu
interface specific, can be found in <a href="#Menu_002dspecific-commands">Menu-specific commands</a>. Other descriptions can be found in <a href="#Commands">Commands</a>.

   <p>Now, on to the actual OS definitions. You will see that each entry
begins with a special command, <samp><span class="command">title</span></samp> (see <a href="#title">title</a>), and the
action is described after it. Note that there is no command
<samp><span class="command">boot</span></samp> (see <a href="#boot">boot</a>) at the  end of each item. That is because
GRUB automatically executes <samp><span class="command">boot</span></samp> if it loads other commands
successfully.

   <p>The argument for the command <samp><span class="command">title</span></samp> is used to display a short
title/description of the entry in the menu. Since <samp><span class="command">title</span></samp>
displays the argument as is, you can write basically anything there.

<pre class="example">     # For booting GNU/Hurd
     title  GNU/Hurd
     root   (hd0,0)
     kernel /boot/gnumach.gz root=hd0s1
     module /boot/serverboot.gz
</pre>
   <p>This boots GNU/Hurd from the first hard disk.

<pre class="example">     # For booting GNU/Linux
     title  GNU/Linux
     kernel (hd1,0)/vmlinuz root=/dev/hdb1
</pre>
   <p>This boots GNU/Linux, but from the second hard disk.

<pre class="example">     # For booting Mach (getting kernel from floppy)
     title  Utah Mach4 multiboot
     root   (hd0,2)
     pause  Insert the diskette now^G!!
     kernel (fd0)/boot/kernel root=hd0s3
     module (fd0)/boot/bootstrap
</pre>
   <p>This boots Mach with a kernel on a floppy, but the root filesystem at
hd0s3. It also contains a <samp><span class="command">pause</span></samp> line (see <a href="#pause">pause</a>), which
will cause GRUB to display a prompt and delay, before actually executing
the rest of the commands and booting.

<pre class="example">     # For booting FreeBSD
     title  FreeBSD
     root   (hd0,2,a)
     kernel /boot/loader
</pre>
   <p>This item will boot FreeBSD kernel loaded from the `<samp><span class="samp">a</span></samp>' partition of
the third <span class="sc">pc</span> slice of the first hard disk.

<pre class="example">     # For booting OS/2
     title OS/2
     root  (hd0,1)
     makeactive
     # chainload OS/2 bootloader from the first sector
     chainloader +1
     # This is similar to "chainload", but loads a specific file
     #chainloader /boot/chain.os2
</pre>
   <p>This will boot OS/2, using a chain-loader (see <a href="#Chain_002dloading">Chain-loading</a>).

<pre class="example">     # For booting Windows NT or Windows95
     title Windows NT / Windows 95 boot menu
     root        (hd0,0)
     makeactive
     chainloader +1
     # For loading DOS if Windows NT is installed
     # chainload /bootsect.dos
</pre>
   <p>The same as the above, but for Windows.

<pre class="example">     # For installing GRUB into the hard disk
     title Install GRUB into the hard disk
     root    (hd0,0)
     setup   (hd0)
</pre>
   <p>This will just (re)install GRUB onto the hard disk.

<pre class="example">     # Change the colors.
     title Change the colors
     color light-green/brown blink-red/blue
</pre>
   <p>In the last entry, the command <samp><span class="command">color</span></samp> is used (see <a href="#color">color</a>),
to change the menu colors (try it!). This command is somewhat special,
because it can be used both in the command-line and in the menu. GRUB
has several such commands, see <a href="#General-commands">General commands</a>.

   <p>We hope that you now understand how to use the basic features of
GRUB. To learn more about GRUB, see the following chapters.

<div class="node">
<p><hr>
<a name="Network"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Serial-terminal">Serial terminal</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Configuration">Configuration</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">6 Downloading OS images from a network</h2>

<p>Although GRUB is a disk-based boot loader, it does provide network
support. To use the network support, you need to enable at least one
network driver in the GRUB build process. For more information please
see <samp><span class="file">netboot/README.netboot</span></samp> in the source distribution.

<ul class="menu">
<li><a accesskey="1" href="#General-usage-of-network-support">General usage of network support</a>
<li><a accesskey="2" href="#Diskless">Diskless</a>
</ul>

<div class="node">
<p><hr>
<a name="General-usage-of-network-support"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Diskless">Diskless</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Network">Network</a>

</div>

<h3 class="section">6.1 How to set up your network</h3>

<p>GRUB requires a file server and optionally a server that will assign an
IP address to the machine on which GRUB is running. For the former, only
TFTP is supported at the moment. The latter is either BOOTP, DHCP or a
RARP server<a rel="footnote" href="#fn-7" name="fnd-7"><sup>7</sup></a>. It is not necessary to run both the servers on one
computer. How to configure these servers is beyond the scope of this
document, so please refer to the manuals specific to those
protocols/servers.

   <p>If you decided to use a server to assign an IP address, set up the
server and run <samp><span class="command">bootp</span></samp> (see <a href="#bootp">bootp</a>), <samp><span class="command">dhcp</span></samp>
(see <a href="#dhcp">dhcp</a>) or <samp><span class="command">rarp</span></samp> (see <a href="#rarp">rarp</a>) for BOOTP, DHCP or RARP,
respectively. Each command will show an assigned IP address, a netmask,
an IP address for your TFTP server and a gateway. If any of the
addresses is wrong or it causes an error, probably the configuration of
your servers isn't set up properly.

   <p>Otherwise, run <samp><span class="command">ifconfig</span></samp>, like this:

<pre class="example">     grub&gt; <kbd>ifconfig --address=192.168.110.23 --server=192.168.110.14</kbd>
</pre>
   <p>You can also use <samp><span class="command">ifconfig</span></samp> in conjuction with <samp><span class="command">bootp</span></samp>,
<samp><span class="command">dhcp</span></samp> or <samp><span class="command">rarp</span></samp> (e.g. to reassign the server address
manually). See <a href="#ifconfig">ifconfig</a>, for more details.

   <p>Finally, download your OS images from your network. The network can be
accessed using the network drive `<samp><span class="samp">(nd)</span></samp>'. Everything else is very
similar to the normal instructions (see <a href="#Booting">Booting</a>).

   <p>Here is an example:

<pre class="example">     grub&gt; <kbd>bootp</kbd>
     Probing... [NE*000]
     NE2000 base ...
     Address: 192.168.110.23    Netmask: 255.255.255.0
     Server: 192.168.110.14     Gateway: 192.168.110.1
     
     grub&gt; <kbd>root (nd)</kbd>
     grub&gt; <kbd>kernel /tftproot/gnumach.gz root=sd0s1</kbd>
     grub&gt; <kbd>module /tftproot/serverboot.gz</kbd>
     grub&gt; <kbd>boot</kbd>
</pre>
   <div class="node">
<p><hr>
<a name="Diskless"></a>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#General-usage-of-network-support">General usage of network support</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Network">Network</a>

</div>

<h3 class="section">6.2 Booting from a network</h3>

<p>It is sometimes very useful to boot from a network, especially when you
use a machine which has no local disk. In this case, you need to obtain
a kind of Net Boot <span class="sc">rom</span>, such as a PXE <span class="sc">rom</span> or a free software
package like Etherboot. Such a Boot <span class="sc">rom</span> first boots the machine,
sets up the network card installed into the machine, and downloads a
second stage boot image from the network. Then, the second image will
try to boot an operating system actually from the network.

   <p>GRUB provides two second stage images, <samp><span class="file">nbgrub</span></samp> and
<samp><span class="file">pxegrub</span></samp> (see <a href="#Images">Images</a>). These images are the same as the
normal Stage 2, except that they set up a network automatically, and try
to load a configuration file from the network, if specified. The usage
is very simple: If the machine has a PXE <span class="sc">rom</span>, use
<samp><span class="file">pxegrub</span></samp>. If the machine has an NBI loader such as Etherboot, use
<samp><span class="file">nbgrub</span></samp>. There is no difference between them except their
formats. Since the way to load a second stage image you want to use
should be described in the manual on your Net Boot <span class="sc">rom</span>, please
refer to the manual, for more information.

   <p>However, there is one thing specific to GRUB. Namely, how to specify a
configuration file in a BOOTP/DHCP server. For now, GRUB uses the tag
`<samp><span class="samp">150</span></samp>', to get the name of a configuration file. The following is an
example with a BOOTP configuration:

<pre class="example">     .allhost:hd=/tmp:bf=null:\
             :ds=145.71.35.1 145.71.32.1:\
             :sm=255.255.254.0:\
             :gw=145.71.35.1:\
             :sa=145.71.35.5:
     
     foo:ht=1:ha=63655d0334a7:ip=145.71.35.127:\
             :bf=/nbgrub:\
             :tc=.allhost:\
             :T150="(nd)/tftpboot/menu.lst.foo":
</pre>
   <p>Note that you should specify the drive name <code>(nd)</code> in the name of
the configuration file. This is because you might change the root drive
before downloading the configuration from the TFTP server when the
preset menu feature is used (see <a href="#Preset-Menu">Preset Menu</a>).

   <p>See the manual of your BOOTP/DHCP server for more information. The
exact syntax should differ a little from the example.

<div class="node">
<p><hr>
<a name="Serial-terminal"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Preset-Menu">Preset Menu</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Network">Network</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">7 Using GRUB via a serial line</h2>

<p>This chapter describes how to use the serial terminal support in GRUB.

   <p>If you have many computers or computers with no display/keyboard, it
could be very useful to control the computers through serial
communications. To connect one computer with another via a serial line,
you need to prepare a null-modem (cross) serial cable, and you may need
to have multiport serial boards, if your computer doesn't have extra
serial ports. In addition, a terminal emulator is also required, such as
minicom. Refer to a manual of your operating system, for more
information.

   <p>As for GRUB, the instruction to set up a serial terminal is quite
simple. First of all, make sure that you haven't specified the option
<samp><span class="option">--disable-serial</span></samp> to the configure script when you built your
GRUB images. If you get them in binary form, probably they have serial
terminal support already.

   <p>Then, initialize your serial terminal after GRUB starts up. Here is an
example:

<pre class="example">     grub&gt; <kbd>serial --unit=0 --speed=9600</kbd>
     grub&gt; <kbd>terminal serial</kbd>
</pre>
   <p>The command <samp><span class="command">serial</span></samp> initializes the serial unit 0 with the
speed 9600bps. The serial unit 0 is usually called `<samp><span class="samp">COM1</span></samp>', so, if
you want to use COM2, you must specify `<samp><span class="samp">--unit=1</span></samp>' instead. This
command accepts many other options, so please refer to <a href="#serial">serial</a>,
for more details.

   <p>The command <samp><span class="command">terminal</span></samp> (see <a href="#terminal">terminal</a>) chooses which type of
terminal you want to use. In the case above, the terminal will be a
serial terminal, but you can also pass <code>console</code> to the command,
as `<samp><span class="samp">terminal serial console</span></samp>'. In this case, a terminal in which
you press any key will be selected as a GRUB terminal.

   <p>However, note that GRUB assumes that your terminal emulator is
compatible with VT100 by default. This is true for most terminal
emulators nowadays, but you should pass the option <samp><span class="option">--dumb</span></samp> to
the command if your terminal emulator is not VT100-compatible or
implements few VT100 escape sequences. If you specify this option then
GRUB provides you with an alternative menu interface, because the normal
menu requires several fancy features of your terminal.

<div class="node">
<p><hr>
<a name="Preset-Menu"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Security">Security</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Serial-terminal">Serial terminal</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">8 Embedding a configuration file into GRUB</h2>

<p>GRUB supports a <dfn>preset menu</dfn> which is to be always loaded before
starting. The preset menu feature is useful, for example, when your
computer has no console but a serial cable. In this case, it is
critical to set up the serial terminal as soon as possible, since you
cannot see any message until the serial terminal begins to work. So it
is good to run the commands <samp><span class="command">serial</span></samp> (see <a href="#serial">serial</a>) and
<samp><span class="command">terminal</span></samp> (see <a href="#terminal">terminal</a>) before anything else at the
start-up time.

   <p>How the preset menu works is slightly complicated:

     <ol type=1 start=1>
<li>GRUB checks if the preset menu feature is used, and loads the preset
menu, if available. This includes running commands and reading boot
entries, like an ordinary configuration file.

     <li>GRUB checks if the configuration file is available. Note that this check
is performed <strong>regardless of the existence of the preset
menu</strong>. The configuration file is loaded even if the preset menu was
loaded.

     <li>If the preset menu includes any boot entries, they are cleared when
the configuration file is loaded. It doesn't matter whether the
configuration file has any entries or no entry. The boot entries in the
preset menu are used only when GRUB fails in loading the configuration
file.
        </ol>

   <p>To enable the preset menu feature, you must rebuild GRUB specifying a
file to the configure script with the option
<samp><span class="option">--enable-preset-menu</span></samp>. The file has the same semantics as
normal configuration files (see <a href="#Configuration">Configuration</a>).

   <p>Another point you should take care is that the diskless support
(see <a href="#Diskless">Diskless</a>) diverts the preset menu. Diskless images embed a
preset menu to execute the command <samp><span class="command">bootp</span></samp> (see <a href="#bootp">bootp</a>)
automatically, unless you specify your own preset menu to the configure
script. This means that you must put commands to initialize a network in
the preset menu yourself, because diskless images don't set it up
implicitly, when you use the preset menu explicitly.

   <p>Therefore, a typical preset menu used with diskless support would be
like this:

<pre class="example">     # Set up the serial terminal, first of all.
     serial --unit=0 --speed=19200
     terminal --timeout=0 serial
     
     # Initialize the network.
     dhcp
</pre>
   <div class="node">
<p><hr>
<a name="Security"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Images">Images</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Preset-Menu">Preset Menu</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">9 Protecting your computer from cracking</h2>

<p>You may be interested in how to prevent ordinary users from doing
whatever they like, if you share your computer with other people. So
this chapter describes how to improve the security of GRUB.

   <p>One thing which could be a security hole is that the user can do too
many things with GRUB, because GRUB allows one to modify its configuration
and run arbitrary commands at run-time. For example, the user can even
read <samp><span class="file">/etc/passwd</span></samp> in the command-line interface by the command
<samp><span class="command">cat</span></samp> (see <a href="#cat">cat</a>). So it is necessary to disable all the
interactive operations.

   <p>Thus, GRUB provides a <dfn>password</dfn> feature, so that only administrators
can start the interactive operations (i.e. editing menu entries and
entering the command-line interface). To use this feature, you need to
run the command <samp><span class="command">password</span></samp> in your configuration file
(see <a href="#password">password</a>), like this:

<pre class="example">     password --md5 PASSWORD
</pre>
   <p>If this is specified, GRUB disallows any interactive control, until you
press the key &lt;p&gt; and enter a correct password.  The option
<samp><span class="option">--md5</span></samp> tells GRUB that `<samp><span class="samp">PASSWORD</span></samp>' is in MD5 format.  If it
is omitted, GRUB assumes the `<samp><span class="samp">PASSWORD</span></samp>' is in clear text.

   <p>You can encrypt your password with the command <samp><span class="command">md5crypt</span></samp>
(see <a href="#md5crypt">md5crypt</a>). For example, run the grub shell (see <a href="#Invoking-the-grub-shell">Invoking the grub shell</a>), and enter your password:

<pre class="example">     grub&gt; md5crypt
     Password: **********
     Encrypted: $1$U$JK7xFegdxWH6VuppCUSIb.
</pre>
   <p>Then, cut and paste the encrypted password to your configuration file.

   <p>Also, you can specify an optional argument to <samp><span class="command">password</span></samp>. See
this example:

<pre class="example">     password PASSWORD /boot/grub/menu-admin.lst
</pre>
   <p>In this case, GRUB will load <samp><span class="file">/boot/grub/menu-admin.lst</span></samp> as a
configuration file when you enter the valid password.

   <p>Another thing which may be dangerous is that any user can choose any
menu entry. Usually, this wouldn't be problematic, but you might want to
permit only administrators to run some of your menu entries, such as an
entry for booting an insecure OS like DOS.

   <p>GRUB provides the command <samp><span class="command">lock</span></samp> (see <a href="#lock">lock</a>). This command
always fails until you enter the valid password, so you can use it, like
this:

<pre class="example">     title Boot DOS
     lock
     rootnoverify (hd0,1)
     makeactive
     chainload +1
</pre>
   <p>You should insert <samp><span class="command">lock</span></samp> right after <samp><span class="command">title</span></samp>, because
any user can execute commands in an entry until GRUB encounters
<samp><span class="command">lock</span></samp>.

   <p>You can also use the command <samp><span class="command">password</span></samp> instead of
<samp><span class="command">lock</span></samp>. In this case the boot process will ask for the password
and stop if it was entered incorrectly.  Since the <samp><span class="command">password</span></samp>
takes its own <var>PASSWORD</var> argument this is useful if you want
different passwords for different entries.

<div class="node">
<p><hr>
<a name="Images"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Filesystem">Filesystem</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Security">Security</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">10 GRUB image files</h2>

<p>GRUB consists of several images: two essential stages, optional stages
called <dfn>Stage 1.5</dfn>, one image for bootable CD-ROM, and two network
boot images. Here is a short overview of them. See <a href="#Internals">Internals</a>, for
more details.

     <dl>
<dt><samp><span class="file">stage1</span></samp><dd>This is an essential image used for booting up GRUB. Usually, this is
embedded in an MBR or the boot sector of a partition. Because a PC boot
sector is 512 bytes, the size of this image is exactly 512 bytes.

     <p>All <samp><span class="file">stage1</span></samp> must do is to load Stage 2 or Stage 1.5 from a local
disk. Because of the size restriction, <samp><span class="file">stage1</span></samp> encodes the
location of Stage 2 (or Stage 1.5) in a block list format, so it never
understand any filesystem structure.

     <br><dt><samp><span class="file">stage2</span></samp><dd>This is the core image of GRUB. It does everything but booting up
itself. Usually, this is put in a filesystem, but that is not required.

     <br><dt><samp><span class="file">e2fs_stage1_5</span></samp><dt><samp><span class="file">fat_stage1_5</span></samp><dt><samp><span class="file">ffs_stage1_5</span></samp><dt><samp><span class="file">jfs_stage1_5</span></samp><dt><samp><span class="file">minix_stage1_5</span></samp><dt><samp><span class="file">reiserfs_stage1_5</span></samp><dt><samp><span class="file">vstafs_stage1_5</span></samp><dt><samp><span class="file">xfs_stage1_5</span></samp><dd>
These are called <dfn>Stage 1.5</dfn>, because they serve as a bridge
between <samp><span class="file">stage1</span></samp> and <samp><span class="file">stage2</span></samp>, that is to say, Stage 1.5 is
loaded by Stage 1 and Stage 1.5 loads Stage 2. The difference between
<samp><span class="file">stage1</span></samp> and <samp><span class="file">*_stage1_5</span></samp> is that the former doesn't
understand any filesystem while the latter understands one filesystem
(e.g. <samp><span class="file">e2fs_stage1_5</span></samp> understands ext2fs). So you can move the
Stage 2 image to another location safely, even after GRUB has been
installed.

     <p>While Stage 2 cannot generally be embedded in a fixed area as the size
is so large, Stage 1.5 can be installed into the area right after an MBR,
or the boot loader area of a ReiserFS or a FFS.

     <br><dt><samp><span class="file">stage2_eltorito</span></samp><dd>This is a boot image for CD-ROMs using the <dfn>no emulation mode</dfn> in
El Torito specification. This is identical to Stage 2, except that
this boots up without Stage 1 and sets up a special drive `<samp><span class="samp">(cd)</span></samp>'.

     <br><dt><samp><span class="file">nbgrub</span></samp><dd>This is a network boot image for the Network Image Proposal used by some
network boot loaders, such as Etherboot. This is mostly the same as
Stage 2, but it also sets up a network and loads a configuration file
from the network.

     <br><dt><samp><span class="file">pxegrub</span></samp><dd>This is another network boot image for the Preboot Execution Environment
used by several Netboot ROMs. This is identical to <samp><span class="file">nbgrub</span></samp>, except
for the format. 
</dl>

<div class="node">
<p><hr>
<a name="Filesystem"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Interface">Interface</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Images">Images</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">11 Filesystem syntax and semantics</h2>

<p>GRUB uses a special syntax for specifying disk drives which can be
accessed by BIOS. Because of BIOS limitations, GRUB cannot distinguish
between IDE, ESDI, SCSI, or others. You must know yourself which BIOS
device is equivalent to which OS device. Normally, that will be clear if
you see the files in a device or use the command <samp><span class="command">find</span></samp>
(see <a href="#find">find</a>).

<ul class="menu">
<li><a accesskey="1" href="#Device-syntax">Device syntax</a>:                How to specify devices
<li><a accesskey="2" href="#File-name-syntax">File name syntax</a>:             How to specify files
<li><a accesskey="3" href="#Block-list-syntax">Block list syntax</a>:            How to specify block lists
</ul>

<div class="node">
<p><hr>
<a name="Device-syntax"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#File-name-syntax">File name syntax</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Filesystem">Filesystem</a>

</div>

<h3 class="section">11.1 How to specify devices</h3>

<p>The device syntax is like this:

<pre class="example">     <code>(</code><var>device</var><code>[,</code><var>part-num</var><code>][,</code><var>bsd-subpart-letter</var><code>])</code>
</pre>
   <p>`<samp><span class="samp">[]</span></samp>' means the parameter is optional. <var>device</var> should be
either `<samp><span class="samp">fd</span></samp>' or `<samp><span class="samp">hd</span></samp>' followed by a digit, like `<samp><span class="samp">fd0</span></samp>'. 
But you can also set <var>device</var> to a hexadecimal or a decimal number
which is a BIOS drive number, so the following are equivalent:

<pre class="example">     (hd0)
     (0x80)
     (128)
</pre>
   <p><var>part-num</var> represents the partition number of <var>device</var>, starting
from zero for primary partitions and from four for extended partitions,
and <var>bsd-subpart-letter</var> represents the BSD disklabel subpartition,
such as `<samp><span class="samp">a</span></samp>' or `<samp><span class="samp">e</span></samp>'.

   <p>A shortcut for specifying BSD subpartitions is
<code>(</code><var>device</var><code>,</code><var>bsd-subpart-letter</var><code>)</code>, in this case, GRUB
searches for the first PC partition containing a BSD disklabel, then
finds the subpartition <var>bsd-subpart-letter</var>. Here is an example:

<pre class="example">     (hd0,a)
</pre>
   <p>The syntax `<samp><span class="samp">(hd0)</span></samp>' represents using the entire disk (or the
MBR when installing GRUB), while the syntax `<samp><span class="samp">(hd0,0)</span></samp>'
represents using the first partition of the disk (or the boot sector
of the partition when installing GRUB).

   <p>If you enabled the network support, the special drive, `<samp><span class="samp">(nd)</span></samp>', is
also available. Before using the network drive, you must initialize the
network. See <a href="#Network">Network</a>, for more information.

   <p>If you boot GRUB from a CD-ROM, `<samp><span class="samp">(cd)</span></samp>' is available. See <a href="#Making-a-GRUB-bootable-CD_002dROM">Making a GRUB bootable CD-ROM</a>, for details.

<div class="node">
<p><hr>
<a name="File-name-syntax"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Block-list-syntax">Block list syntax</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Device-syntax">Device syntax</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Filesystem">Filesystem</a>

</div>

<h3 class="section">11.2 How to specify files</h3>

<p>There are two ways to specify files, by <dfn>absolute file name</dfn> and by
<dfn>block list</dfn>.

   <p>An absolute file name resembles a Unix absolute file name, using
`<samp><span class="samp">/</span></samp>' for the directory separator (not `<samp><span class="samp">\</span></samp>' as in DOS). One
example is `<samp><span class="samp">(hd0,0)/boot/grub/menu.lst</span></samp>'. This means the file
<samp><span class="file">/boot/grub/menu.lst</span></samp> in the first partition of the first hard
disk. If you omit the device name in an absolute file name, GRUB uses
GRUB's <dfn>root device</dfn> implicitly. So if you set the root device to,
say, `<samp><span class="samp">(hd1,0)</span></samp>' by the command <samp><span class="command">root</span></samp> (see <a href="#root">root</a>), then
<code>/boot/kernel</code> is the same as <code>(hd1,0)/boot/kernel</code>.

<div class="node">
<p><hr>
<a name="Block-list-syntax"></a>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#File-name-syntax">File name syntax</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Filesystem">Filesystem</a>

</div>

<h3 class="section">11.3 How to specify block lists</h3>

<p>A block list is used for specifying a file that doesn't appear in the
filesystem, like a chainloader. The syntax is
<code>[</code><var>offset</var><code>]+</code><var>length</var><code>[,[</code><var>offset</var><code>]+</code><var>length</var><code>]...</code>. 
Here is an example:

<pre class="example">     <code>0+100,200+1,300+300</code>
</pre>
   <p>This represents that GRUB should read blocks 0 through 99, block 200,
and blocks 300 through 599. If you omit an offset, then GRUB assumes
the offset is zero.

   <p>Like the file name syntax (see <a href="#File-name-syntax">File name syntax</a>), if a blocklist
does not contain a device name, then GRUB uses GRUB's <dfn>root
device</dfn>. So <code>(hd0,1)+1</code> is the same as <code>+1</code> when the root
device is `<samp><span class="samp">(hd0,1)</span></samp>'.

<div class="node">
<p><hr>
<a name="Interface"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Commands">Commands</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Filesystem">Filesystem</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">12 GRUB's user interface</h2>

<p>GRUB has both a simple menu interface for choosing preset entries from a
configuration file, and a highly flexible command-line for performing
any desired combination of boot commands.

   <p>GRUB looks for its configuration file as soon as it is loaded. If one
is found, then the full menu interface is activated using whatever
entries were found in the file. If you choose the <dfn>command-line</dfn> menu
option, or if the configuration file was not found, then GRUB drops to
the command-line interface.

<ul class="menu">
<li><a accesskey="1" href="#Command_002dline-interface">Command-line interface</a>:       The flexible command-line interface
<li><a accesskey="2" href="#Menu-interface">Menu interface</a>:               The simple menu interface
<li><a accesskey="3" href="#Menu-entry-editor">Menu entry editor</a>:            Editing a menu entry
<li><a accesskey="4" href="#Hidden-menu-interface">Hidden menu interface</a>:        The hidden menu interface
</ul>

<div class="node">
<p><hr>
<a name="Command-line-interface"></a>
<a name="Command_002dline-interface"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Menu-interface">Menu interface</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Interface">Interface</a>

</div>

<h3 class="section">12.1 The flexible command-line interface</h3>

<p>The command-line interface provides a prompt and after it an editable
text area much like a command-line in Unix or DOS. Each command is
immediately executed after it is entered<a rel="footnote" href="#fn-8" name="fnd-8"><sup>8</sup></a>. The commands (see <a href="#Command_002dline-and-menu-entry-commands">Command-line and menu entry commands</a>) are a
subset of those available in the configuration file, used with exactly
the same syntax.

   <p>Cursor movement and editing of the text on the line can be done via a
subset of the functions available in the Bash shell:

     <dl>
<dt>&lt;C-f&gt;<dt>&lt;PC right key&gt;<dd>Move forward one character.

     <br><dt>&lt;C-b&gt;<dt>&lt;PC left key&gt;<dd>Move back one character.

     <br><dt>&lt;C-a&gt;<dt>&lt;HOME&gt;<dd>Move to the start of the line.

     <br><dt>&lt;C-e&gt;<dt>&lt;END&gt;<dd>Move the the end of the line.

     <br><dt>&lt;C-d&gt;<dt>&lt;DEL&gt;<dd>Delete the character underneath the cursor.

     <br><dt>&lt;C-h&gt;<dt>&lt;BS&gt;<dd>Delete the character to the left of the cursor.

     <br><dt>&lt;C-k&gt;<dd>Kill the text from the current cursor position to the end of the line.

     <br><dt>&lt;C-u&gt;<dd>Kill backward from the cursor to the beginning of the line.

     <br><dt>&lt;C-y&gt;<dd>Yank the killed text back into the buffer at the cursor.

     <br><dt>&lt;C-p&gt;<dt>&lt;PC up key&gt;<dd>Move up through the history list.

     <br><dt>&lt;C-n&gt;<dt>&lt;PC down key&gt;<dd>Move down through the history list. 
</dl>

   <p>When typing commands interactively, if the cursor is within or before
the first word in the command-line, pressing the &lt;TAB&gt; key (or
&lt;C-i&gt;) will display a listing of the available commands, and if the
cursor is after the first word, the <kbd>&lt;TAB&gt;</kbd> will provide a
completion listing of disks, partitions, and file names depending on the
context. Note that to obtain a list of drives, one must open a
parenthesis, as <samp><span class="command">root (</span></samp>.

   <p>Note that you cannot use the completion functionality in the TFTP
filesystem. This is because TFTP doesn't support file name listing for
the security.

<div class="node">
<p><hr>
<a name="Menu-interface"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Menu-entry-editor">Menu entry editor</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Command_002dline-interface">Command-line interface</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Interface">Interface</a>

</div>

<h3 class="section">12.2 The simple menu interface</h3>

<p>The menu interface is quite easy to use. Its commands are both
reasonably intuitive and described on screen.

   <p>Basically, the menu interface provides a list of <dfn>boot entries</dfn> to
the user to choose from. Use the arrow keys to select the entry of
choice, then press &lt;RET&gt; to run it.  An optional timeout is
available to boot the default entry (the first one if not set), which is
aborted by pressing any key.

   <p>Commands are available to enter a bare command-line by pressing &lt;c&gt;
(which operates exactly like the non-config-file version of GRUB, but
allows one to return to the menu if desired by pressing &lt;ESC&gt;) or to
edit any of the <dfn>boot entries</dfn> by pressing &lt;e&gt;.

   <p>If you protect the menu interface with a password (see <a href="#Security">Security</a>),
all you can do is choose an entry by pressing &lt;RET&gt;, or press
&lt;p&gt; to enter the password.

<div class="node">
<p><hr>
<a name="Menu-entry-editor"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Hidden-menu-interface">Hidden menu interface</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Menu-interface">Menu interface</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Interface">Interface</a>

</div>

<h3 class="section">12.3 Editing a menu entry</h3>

<p>The menu entry editor looks much like the main menu interface, but the
lines in the menu are individual commands in the selected entry instead
of entry names.

   <p>If an &lt;ESC&gt; is pressed in the editor, it aborts all the changes made
to the configuration entry and returns to the main menu interface.

   <p>When a particular line is selected, the editor places the user in a
special version of the GRUB command-line to edit that line.  When the
user hits &lt;RET&gt;, GRUB replaces the line in question in the boot
entry with the changes (unless it was aborted via &lt;ESC&gt;,
in which case the changes are thrown away).

   <p>If you want to add a new line to the menu entry, press &lt;o&gt; if adding
a line after the current line or press &lt;O&gt; if before the current
line.

   <p>To delete a line, hit the key &lt;d&gt;. Although GRUB unfortunately
does not support <dfn>undo</dfn>, you can do almost the same thing by just
returning to the main menu.

<div class="node">
<p><hr>
<a name="Hidden-menu-interface"></a>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Menu-entry-editor">Menu entry editor</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Interface">Interface</a>

</div>

<h3 class="section">12.4 The hidden menu interface</h3>

<p>When your terminal is dumb or you request GRUB to hide the menu
interface explicitly with the command <samp><span class="command">hiddenmenu</span></samp>
(see <a href="#hiddenmenu">hiddenmenu</a>), GRUB doesn't show the menu interface (see <a href="#Menu-interface">Menu interface</a>) and automatically boots the default entry, unless
interrupted by pressing &lt;ESC&gt;.

   <p>When you interrupt the timeout and your terminal is dumb, GRUB falls
back to the command-line interface (see <a href="#Command_002dline-interface">Command-line interface</a>).

<div class="node">
<p><hr>
<a name="Commands"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Troubleshooting">Troubleshooting</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Interface">Interface</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">13 The list of available commands</h2>

<p>In this chapter, we list all commands that are available in GRUB.

   <p>Commands belong to different groups. A few can only be used in
the global section of the configuration file (or &ldquo;menu&rdquo;); most
of them can be entered on the command-line and can be used either
anywhere in the menu or specifically in the menu entries.

<ul class="menu">
<li><a accesskey="1" href="#Menu_002dspecific-commands">Menu-specific commands</a>
<li><a accesskey="2" href="#General-commands">General commands</a>
<li><a accesskey="3" href="#Command_002dline-and-menu-entry-commands">Command-line and menu entry commands</a>
</ul>

<div class="node">
<p><hr>
<a name="Menu-specific-commands"></a>
<a name="Menu_002dspecific-commands"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#General-commands">General commands</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Commands">Commands</a>

</div>

<h3 class="section">13.1 The list of commands for the menu only</h3>

<p>The semantics used in parsing the configuration file are the following:

     <ul>
<li>The menu-specific commands have to be used before any others.

     <li>The files <em>must</em> be in plain-text format.

     <li>`<samp><span class="samp">#</span></samp>' at the beginning of a line in a configuration file means it is
only a comment.

     <li>Options are separated by spaces.

     <li>All numbers can be either decimal or hexadecimal. A hexadecimal number
must be preceded by `<samp><span class="samp">0x</span></samp>', and is case-insensitive.

     <li>Extra options or text at the end of the line are ignored unless otherwise
specified.

     <li>Unrecognized commands are added to the current entry, except before entries
start, where they are ignored. 
</ul>

   <p>These commands can only be used in the menu:

<ul class="menu">
<li><a accesskey="1" href="#default">default</a>:                      Set the default entry
<li><a accesskey="2" href="#fallback">fallback</a>:                     Set the fallback entry
<li><a accesskey="3" href="#hiddenmenu">hiddenmenu</a>:                   Hide the menu interface
<li><a accesskey="4" href="#timeout">timeout</a>:                      Set the timeout
<li><a accesskey="5" href="#title">title</a>:                        Start a menu entry
</ul>

<div class="node">
<p><hr>
<a name="default"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#fallback">fallback</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Menu_002dspecific-commands">Menu-specific commands</a>

</div>

<h4 class="subsection">13.1.1 default</h4>

<div class="defun">
&mdash; Command: <b>default</b><var> num<a name="index-default-1"></a></var><br>
<blockquote><p>Set the default entry to the entry number <var>num</var>. Numbering starts
from 0, and the entry number 0 is the default if the command is not
used.

        <p>You can specify `<samp><span class="samp">saved</span></samp>' instead of a number. In this case, the
default entry is the entry saved with the command
<samp><span class="command">savedefault</span></samp>. See <a href="#savedefault">savedefault</a>, for more information. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="fallback"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#hiddenmenu">hiddenmenu</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#default">default</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Menu_002dspecific-commands">Menu-specific commands</a>

</div>

<h4 class="subsection">13.1.2 fallback</h4>

<div class="defun">
&mdash; Command: <b>fallback</b><var> num...<a name="index-fallback-2"></a></var><br>
<blockquote><p>Go into unattended boot mode: if the default boot entry has any errors,
instead of waiting for the user to do something, immediately start
over using the <var>num</var> entry (same numbering as the <code>default</code>
command (see <a href="#default">default</a>)). This obviously won't help if the machine was
rebooted by a kernel that GRUB loaded. You can specify multiple
fallback entry numbers. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="hiddenmenu"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#timeout">timeout</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#fallback">fallback</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Menu_002dspecific-commands">Menu-specific commands</a>

</div>

<h4 class="subsection">13.1.3 hiddenmenu</h4>

<div class="defun">
&mdash; Command: <b>hiddenmenu</b><var><a name="index-hiddenmenu-3"></a></var><br>
<blockquote><p>Don't display the menu. If the command is used, no menu will be
displayed on the control terminal, and the default entry will be
booted after the timeout expired. The user can still request the
menu to be displayed by pressing &lt;ESC&gt; before the timeout
expires. See also <a href="#Hidden-menu-interface">Hidden menu interface</a>. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="timeout"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#title">title</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#hiddenmenu">hiddenmenu</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Menu_002dspecific-commands">Menu-specific commands</a>

</div>

<h4 class="subsection">13.1.4 timeout</h4>

<div class="defun">
&mdash; Command: <b>timeout</b><var> sec<a name="index-timeout-4"></a></var><br>
<blockquote><p>Set a timeout, in <var>sec</var> seconds, before automatically booting the
default entry (normally the first entry defined). 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="title"></a>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#timeout">timeout</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Menu_002dspecific-commands">Menu-specific commands</a>

</div>

<h4 class="subsection">13.1.5 title</h4>

<div class="defun">
&mdash; Command: <b>title</b><var> name <small class="dots">...</small><a name="index-title-5"></a></var><br>
<blockquote><p>Start a new boot entry, and set its name to the contents of the rest of
the line, starting with the first non-space character. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="General-commands"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Command_002dline-and-menu-entry-commands">Command-line and menu entry commands</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Menu_002dspecific-commands">Menu-specific commands</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Commands">Commands</a>

</div>

<h3 class="section">13.2 The list of general commands</h3>

<p>Commands usable anywhere in the menu and in the command-line.

<ul class="menu">
<li><a accesskey="1" href="#bootp">bootp</a>:                        Initialize a network device via BOOTP
<li><a accesskey="2" href="#color">color</a>:                        Color the menu interface
<li><a accesskey="3" href="#device">device</a>:                       Specify a file as a drive
<li><a accesskey="4" href="#dhcp">dhcp</a>:                         Initialize a network device via DHCP
<li><a accesskey="5" href="#hide">hide</a>:                         Hide a partition
<li><a accesskey="6" href="#ifconfig">ifconfig</a>:                     Configure a network device manually
<li><a accesskey="7" href="#pager">pager</a>:                        Change the state of the internal pager
<li><a accesskey="8" href="#partnew">partnew</a>:                      Make a primary partition
<li><a accesskey="9" href="#parttype">parttype</a>:                     Change the type of a partition
<li><a href="#password">password</a>:                     Set a password for the menu interface
<li><a href="#rarp">rarp</a>:                         Initialize a network device via RARP
<li><a href="#serial">serial</a>:                       Set up a serial device
<li><a href="#setkey">setkey</a>:                       Configure the key map
<li><a href="#terminal">terminal</a>:                     Choose a terminal
<li><a href="#terminfo">terminfo</a>:                     Define escape sequences for a terminal
<li><a href="#tftpserver">tftpserver</a>:                   Specify a TFTP server
<li><a href="#unhide">unhide</a>:                       Unhide a partition
</ul>

<div class="node">
<p><hr>
<a name="bootp"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#color">color</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#General-commands">General commands</a>

</div>

<h4 class="subsection">13.2.1 bootp</h4>

<div class="defun">
&mdash; Command: <b>bootp</b> [<var><samp></var><span class="option">--with-configfile</span><var></samp></var>]<var><a name="index-bootp-6"></a></var><br>
<blockquote><p>Initialize a network device via the <dfn>BOOTP</dfn> protocol. This command
is only available if GRUB is compiled with netboot support. See also
<a href="#Network">Network</a>.

        <p>If you specify <samp><span class="option">--with-configfile</span></samp> to this command, GRUB will
fetch and load a configuration file specified by your BOOTP server
with the vendor tag `<samp><span class="samp">150</span></samp>'. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="color"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#device">device</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#bootp">bootp</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#General-commands">General commands</a>

</div>

<h4 class="subsection">13.2.2 color</h4>

<div class="defun">
&mdash; Command: <b>color</b><var> normal </var>[<var>highlight</var>]<var><a name="index-color-7"></a></var><br>
<blockquote><p>Change the menu colors. The color <var>normal</var> is used for most
lines in the menu (see <a href="#Menu-interface">Menu interface</a>), and the color
<var>highlight</var> is used to highlight the line where the cursor
points. If you omit <var>highlight</var>, then the inverted color of
<var>normal</var> is used for the highlighted line. The format of a color is
<var>foreground</var><code>/</code><var>background</var>. <var>foreground</var> and
<var>background</var> are symbolic color names. A symbolic color name must be
one of these:

          <ul>
<li>black

          <li>blue

          <li>green

          <li>cyan

          <li>red

          <li>magenta

          <li>brown

          <li>light-gray

          <p><strong>These below can be specified only for the foreground.</strong>

          <li>dark-gray

          <li>light-blue

          <li>light-green

          <li>light-cyan

          <li>light-red

          <li>light-magenta

          <li>yellow

          <li>white
</ul>

        <p>But only the first eight names can be used for <var>background</var>. You can
prefix <code>blink-</code> to <var>foreground</var> if you want a blinking
foreground color.

        <p>This command can be used in the configuration file and on the command
line, so you may write something like this in your configuration file:

     <pre class="example">          # Set default colors.
          color light-gray/blue black/light-gray
          
          # Change the colors.
          title OS-BS like
          color magenta/blue black/magenta
     </pre>
        </blockquote></div>

<div class="node">
<p><hr>
<a name="device"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#dhcp">dhcp</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#color">color</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#General-commands">General commands</a>

</div>

<h4 class="subsection">13.2.3 device</h4>

<div class="defun">
&mdash; Command: <b>device</b><var> drive file<a name="index-device-8"></a></var><br>
<blockquote><p>In the grub shell, specify the file <var>file</var> as the actual drive for a
<span class="sc">bios</span> drive <var>drive</var>. You can use this command to create a disk
image, and/or to fix the drives guessed by GRUB when GRUB fails to
determine them correctly, like this:

     <pre class="example">          grub&gt; <kbd>device (fd0) /floppy-image</kbd>
          grub&gt; <kbd>device (hd0) /dev/sd0</kbd>
     </pre>
        <p>This command can be used only in the grub shell (see <a href="#Invoking-the-grub-shell">Invoking the grub shell</a>). 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="dhcp"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#hide">hide</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#device">device</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#General-commands">General commands</a>

</div>

<h4 class="subsection">13.2.4 dhcp</h4>

<div class="defun">
&mdash; Command: <b>dhcp</b> [<var>&ndash;with-configfile</var>]<var><a name="index-dhcp-9"></a></var><br>
<blockquote><p>Initialize a network device via the <dfn>DHCP</dfn> protocol. Currently,
this command is just an alias for <samp><span class="command">bootp</span></samp>, since the two
protocols are very similar. This command is only available if GRUB is
compiled with netboot support. See also <a href="#Network">Network</a>.

        <p>If you specify <samp><span class="option">--with-configfile</span></samp> to this command, GRUB will
fetch and load a configuration file specified by your DHCP server
with the vendor tag `<samp><span class="samp">150</span></samp>'. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="hide"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#ifconfig">ifconfig</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#dhcp">dhcp</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#General-commands">General commands</a>

</div>

<h4 class="subsection">13.2.5 hide</h4>

<div class="defun">
&mdash; Command: <b>hide</b><var> partition<a name="index-hide-10"></a></var><br>
<blockquote><p>Hide the partition <var>partition</var> by setting the <dfn>hidden</dfn> bit in
its partition type code. This is useful only when booting DOS or Windows
and multiple primary FAT partitions exist in one disk. See also
<a href="#DOS_002fWindows">DOS/Windows</a>. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="ifconfig"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#pager">pager</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#hide">hide</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#General-commands">General commands</a>

</div>

<h4 class="subsection">13.2.6 ifconfig</h4>

<div class="defun">
&mdash; Command: <b>ifconfig</b> [<var><samp></var><span class="option">--server=server</span><var></samp></var>] [<var><samp></var><span class="option">--gateway=gateway</span><var></samp></var>] [<var><samp></var><span class="option">--mask=mask</span><var></samp></var>] [<var><samp></var><span class="option">--address=address</span><var></samp></var>]<var><a name="index-ifconfig-11"></a></var><br>
<blockquote><p>Configure the IP address, the netmask, the gateway, and the server
address of a network device manually. The values must be in dotted
decimal format, like `<samp><span class="samp">192.168.11.178</span></samp>'. The order of the options is
not important. This command shows current network configuration, if no
option is specified. See also <a href="#Network">Network</a>. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="pager"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#partnew">partnew</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#ifconfig">ifconfig</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#General-commands">General commands</a>

</div>

<h4 class="subsection">13.2.7 pager</h4>

<div class="defun">
&mdash; Command: <b>pager</b> [<var>flag</var>]<var><a name="index-pager-12"></a></var><br>
<blockquote><p>Toggle or set the state of the internal pager. If <var>flag</var> is
`<samp><span class="samp">on</span></samp>', the internal pager is enabled. If <var>flag</var> is `<samp><span class="samp">off</span></samp>',
it is disabled. If no argument is given, the state is toggled. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="partnew"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#parttype">parttype</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#pager">pager</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#General-commands">General commands</a>

</div>

<h4 class="subsection">13.2.8 partnew</h4>

<div class="defun">
&mdash; Command: <b>partnew</b><var> part type from len<a name="index-partnew-13"></a></var><br>
<blockquote><p>Create a new primary partition. <var>part</var> is a partition specification
in GRUB syntax (see <a href="#Naming-convention">Naming convention</a>); <var>type</var> is the partition
type and must be a number in the range <code>0-0xff</code>; <var>from</var> is
the starting address and <var>len</var> is the length, both in sector units. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="parttype"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#password">password</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#partnew">partnew</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#General-commands">General commands</a>

</div>

<h4 class="subsection">13.2.9 parttype</h4>

<div class="defun">
&mdash; Command: <b>parttype</b><var> part type<a name="index-parttype-14"></a></var><br>
<blockquote><p>Change the type of an existing partition.  <var>part</var> is a partition
specification in GRUB syntax (see <a href="#Naming-convention">Naming convention</a>); <var>type</var>
is the new partition type and must be a number in the range 0-0xff. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="password"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#rarp">rarp</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#parttype">parttype</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#General-commands">General commands</a>

</div>

<h4 class="subsection">13.2.10 password</h4>

<div class="defun">
&mdash; Command: <b>password</b> [<var><samp></var><span class="option">--md5</span><var></samp></var>]<var> passwd </var>[<var>new-config-file</var>]<var><a name="index-password-15"></a></var><br>
<blockquote><p>If used in the first section of a menu file, disable all interactive
editing control (menu entry editor and command-line) and entries
protected by the command <samp><span class="command">lock</span></samp>. If the password <var>passwd</var> is
entered, it loads the <var>new-config-file</var> as a new config file and
restarts the GRUB Stage 2, if <var>new-config-file</var> is
specified. Otherwise, GRUB will just unlock the privileged instructions. 
You can also use this command in the script section, in which case it
will ask for the password, before continuing.  The option
<samp><span class="option">--md5</span></samp> tells GRUB that <var>passwd</var> is encrypted with
<samp><span class="command">md5crypt</span></samp> (see <a href="#md5crypt">md5crypt</a>). 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="rarp"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#serial">serial</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#password">password</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#General-commands">General commands</a>

</div>

<h4 class="subsection">13.2.11 rarp</h4>

<div class="defun">
&mdash; Command: <b>rarp</b><var><a name="index-rarp-16"></a></var><br>
<blockquote><p>Initialize a network device via the <dfn>RARP</dfn> protocol.  This command
is only available if GRUB is compiled with netboot support. See also
<a href="#Network">Network</a>. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="serial"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#setkey">setkey</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#rarp">rarp</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#General-commands">General commands</a>

</div>

<h4 class="subsection">13.2.12 serial</h4>

<div class="defun">
&mdash; Command: <b>serial</b> [<var><samp></var><span class="option">--unit=unit</span><var></samp></var>] [<var><samp></var><span class="option">--port=port</span><var></samp></var>] [<var><samp></var><span class="option">--speed=speed</span><var></samp></var>] [<var><samp></var><span class="option">--word=word</span><var></samp></var>] [<var><samp></var><span class="option">--parity=parity</span><var></samp></var>] [<var><samp></var><span class="option">--stop=stop</span><var></samp></var>] [<var><samp></var><span class="option">--device=dev</span><var></samp></var>]<var><a name="index-serial-17"></a></var><br>
<blockquote><p>Initialize a serial device. <var>unit</var> is a number in the range 0-3
specifying which serial port to use; default is 0, which corresponds to
the port often called COM1. <var>port</var> is the I/O port where the UART
is to be found; if specified it takes precedence over <var>unit</var>. 
<var>speed</var> is the transmission speed; default is 9600. <var>word</var> and
<var>stop</var> are the number of data bits and stop bits. Data bits must
be in the range 5-8 and stop bits must be 1 or 2. Default is 8 data
bits and one stop bit. <var>parity</var> is one of `<samp><span class="samp">no</span></samp>', `<samp><span class="samp">odd</span></samp>',
`<samp><span class="samp">even</span></samp>' and defaults to `<samp><span class="samp">no</span></samp>'. The option <samp><span class="option">--device</span></samp>
can only be used in the grub shell and is used to specify the
tty device to be used in the host operating system (see <a href="#Invoking-the-grub-shell">Invoking the grub shell</a>).

        <p>The serial port is not used as a communication channel unless the
<samp><span class="command">terminal</span></samp> command is used (see <a href="#terminal">terminal</a>).

        <p>This command is only available if GRUB is compiled with serial
support. See also <a href="#Serial-terminal">Serial terminal</a>. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="setkey"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#terminal">terminal</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#serial">serial</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#General-commands">General commands</a>

</div>

<h4 class="subsection">13.2.13 setkey</h4>

<div class="defun">
&mdash; Command: <b>setkey</b> [<var>to_key from_key</var>]<var><a name="index-setkey-18"></a></var><br>
<blockquote><p>Change the keyboard map. The key <var>from_key</var> is mapped to the key
<var>to_key</var>. If no argument is specified, reset key mappings. Note that
this command <em>does not</em> exchange the keys. If you want to exchange
the keys, run this command again with the arguments exchanged, like this:

     <pre class="example">          grub&gt; <kbd>setkey capslock control</kbd>
          grub&gt; <kbd>setkey control capslock</kbd>
     </pre>
        <p>A key must be an alphabet letter, a digit, or one of these symbols:
`<samp><span class="samp">escape</span></samp>', `<samp><span class="samp">exclam</span></samp>', `<samp><span class="samp">at</span></samp>', `<samp><span class="samp">numbersign</span></samp>',
`<samp><span class="samp">dollar</span></samp>', `<samp><span class="samp">percent</span></samp>', `<samp><span class="samp">caret</span></samp>', `<samp><span class="samp">ampersand</span></samp>',
`<samp><span class="samp">asterisk</span></samp>', `<samp><span class="samp">parenleft</span></samp>', `<samp><span class="samp">parenright</span></samp>', `<samp><span class="samp">minus</span></samp>',
`<samp><span class="samp">underscore</span></samp>', `<samp><span class="samp">equal</span></samp>', `<samp><span class="samp">plus</span></samp>', `<samp><span class="samp">backspace</span></samp>',
`<samp><span class="samp">tab</span></samp>', `<samp><span class="samp">bracketleft</span></samp>', `<samp><span class="samp">braceleft</span></samp>', `<samp><span class="samp">bracketright</span></samp>',
`<samp><span class="samp">braceright</span></samp>', `<samp><span class="samp">enter</span></samp>', `<samp><span class="samp">control</span></samp>', `<samp><span class="samp">semicolon</span></samp>',
`<samp><span class="samp">colon</span></samp>', `<samp><span class="samp">quote</span></samp>', `<samp><span class="samp">doublequote</span></samp>', `<samp><span class="samp">backquote</span></samp>',
`<samp><span class="samp">tilde</span></samp>', `<samp><span class="samp">shift</span></samp>', `<samp><span class="samp">backslash</span></samp>', `<samp><span class="samp">bar</span></samp>', `<samp><span class="samp">comma</span></samp>',
`<samp><span class="samp">less</span></samp>', `<samp><span class="samp">period</span></samp>', `<samp><span class="samp">greater</span></samp>', `<samp><span class="samp">slash</span></samp>',
`<samp><span class="samp">question</span></samp>', `<samp><span class="samp">alt</span></samp>', `<samp><span class="samp">space</span></samp>', `<samp><span class="samp">capslock</span></samp>', `<samp><span class="samp">FX</span></samp>'
(`<samp><span class="samp">X</span></samp>' is a digit), and `<samp><span class="samp">delete</span></samp>'. This table describes to which
character each of the symbols corresponds:

          <dl>
<dt>`<samp><span class="samp">exclam</span></samp>'<dd>`<samp><span class="samp">!</span></samp>'

          <br><dt>`<samp><span class="samp">at</span></samp>'<dd>`<samp><span class="samp">@</span></samp>'

          <br><dt>`<samp><span class="samp">numbersign</span></samp>'<dd>`<samp><span class="samp">#</span></samp>'

          <br><dt>`<samp><span class="samp">dollar</span></samp>'<dd>`<samp><span class="samp">$</span></samp>'

          <br><dt>`<samp><span class="samp">percent</span></samp>'<dd>`<samp><span class="samp">%</span></samp>'

          <br><dt>`<samp><span class="samp">caret</span></samp>'<dd>`<samp><span class="samp">^</span></samp>'

          <br><dt>`<samp><span class="samp">ampersand</span></samp>'<dd>`<samp><span class="samp">&amp;</span></samp>'

          <br><dt>`<samp><span class="samp">asterisk</span></samp>'<dd>`<samp><span class="samp">*</span></samp>'

          <br><dt>`<samp><span class="samp">parenleft</span></samp>'<dd>`<samp><span class="samp">(</span></samp>'

          <br><dt>`<samp><span class="samp">parenright</span></samp>'<dd>`<samp><span class="samp">)</span></samp>'

          <br><dt>`<samp><span class="samp">minus</span></samp>'<dd>`<samp><span class="samp">-</span></samp>'

          <br><dt>`<samp><span class="samp">underscore</span></samp>'<dd>`<samp><span class="samp">_</span></samp>'

          <br><dt>`<samp><span class="samp">equal</span></samp>'<dd>`<samp><span class="samp">=</span></samp>'

          <br><dt>`<samp><span class="samp">plus</span></samp>'<dd>`<samp><span class="samp">+</span></samp>'

          <br><dt>`<samp><span class="samp">bracketleft</span></samp>'<dd>`<samp><span class="samp">[</span></samp>'

          <br><dt>`<samp><span class="samp">braceleft</span></samp>'<dd>`<samp><span class="samp">{</span></samp>'

          <br><dt>`<samp><span class="samp">bracketright</span></samp>'<dd>`<samp><span class="samp">]</span></samp>'

          <br><dt>`<samp><span class="samp">braceright</span></samp>'<dd>`<samp><span class="samp">}</span></samp>'

          <br><dt>`<samp><span class="samp">semicolon</span></samp>'<dd>`<samp><span class="samp">;</span></samp>'

          <br><dt>`<samp><span class="samp">colon</span></samp>'<dd>`<samp><span class="samp">:</span></samp>'

          <br><dt>`<samp><span class="samp">quote</span></samp>'<dd>`<samp><span class="samp">'</span></samp>'

          <br><dt>`<samp><span class="samp">doublequote</span></samp>'<dd>`<samp><span class="samp">"</span></samp>'

          <br><dt>`<samp><span class="samp">backquote</span></samp>'<dd>`<samp><span class="samp">`</span></samp>'

          <br><dt>`<samp><span class="samp">tilde</span></samp>'<dd>`<samp><span class="samp">~</span></samp>'

          <br><dt>`<samp><span class="samp">backslash</span></samp>'<dd>`<samp><span class="samp">\</span></samp>'

          <br><dt>`<samp><span class="samp">bar</span></samp>'<dd>`<samp><span class="samp">|</span></samp>'

          <br><dt>`<samp><span class="samp">comma</span></samp>'<dd>`<samp><span class="samp">,</span></samp>'

          <br><dt>`<samp><span class="samp">less</span></samp>'<dd>`<samp><span class="samp">&lt;</span></samp>'

          <br><dt>`<samp><span class="samp">period</span></samp>'<dd>`<samp><span class="samp">.</span></samp>'

          <br><dt>`<samp><span class="samp">greater</span></samp>'<dd>`<samp><span class="samp">&gt;</span></samp>'

          <br><dt>`<samp><span class="samp">slash</span></samp>'<dd>`<samp><span class="samp">/</span></samp>'

          <br><dt>`<samp><span class="samp">question</span></samp>'<dd>`<samp><span class="samp">?</span></samp>'

          <br><dt>`<samp><span class="samp">space</span></samp>'<dd>`<samp> </samp>'
</dl>
        </p></blockquote></div>

<div class="node">
<p><hr>
<a name="terminal"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#terminfo">terminfo</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#setkey">setkey</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#General-commands">General commands</a>

</div>

<h4 class="subsection">13.2.14 terminal</h4>

<div class="defun">
&mdash; Command: <b>terminal</b> [<var><samp></var><span class="option">--dumb</span><var></samp></var>] [<var><samp></var><span class="option">--no-echo</span><var></samp></var>] [<var><samp></var><span class="option">--no-edit</span><var></samp></var>] [<var><samp></var><span class="option">--timeout=secs</span><var></samp></var>] [<var><samp></var><span class="option">--lines=lines</span><var></samp></var>] [<var><samp></var><span class="option">--silent</span><var></samp></var>] [<var><samp></var><span class="option">console</span><var></samp></var>] [<var><samp></var><span class="option">serial</span><var></samp></var>] [<var><samp></var><span class="option">hercules</span><var></samp></var>]<var><a name="index-terminal-19"></a></var><br>
<blockquote><p>Select a terminal for user interaction. The terminal is assumed to be
VT100-compatible unless <samp><span class="option">--dumb</span></samp> is specified. If both
<samp><span class="option">console</span></samp> and <samp><span class="option">serial</span></samp> are specified, then GRUB will use
the one where a key is entered first or the first when the timeout
expires. If neither are specified, the current setting is
reported. This command is only available if GRUB is compiled with serial
support. See also <a href="#Serial-terminal">Serial terminal</a>.

        <p>This may not make sense for most users, but GRUB supports Hercules
console as well. Hercules console is usable like the ordinary console,
and the usage is quite similar to that for serial terminals: specify
<samp><span class="option">hercules</span></samp> as the argument.

        <p>The option <samp><span class="option">--lines</span></samp> defines the number of lines in your
terminal, and it is used for the internal pager function. If you don't
specify this option, the number is assumed as 24.

        <p>The option <samp><span class="option">--silent</span></samp> suppresses the message to prompt you to
hit any key. This might be useful if your system has no terminal
device.

        <p>The option <samp><span class="option">--no-echo</span></samp> has GRUB not to echo back input
characters. This implies the option <samp><span class="option">--no-edit</span></samp>.

        <p>The option <samp><span class="option">--no-edit</span></samp> disables the BASH-like editing feature. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="terminfo"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#tftpserver">tftpserver</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#terminal">terminal</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#General-commands">General commands</a>

</div>

<h4 class="subsection">13.2.15 terminfo</h4>

<div class="defun">
&mdash; Command: <b>terminfo</b><var> <samp></var><span class="option">--name=name</span><var></samp> <samp></var><span class="option">--cursor-address=seq</span><var></samp> </var>[<var><samp></var><span class="option">--clear-screen=seq</span><var></samp></var>] [<var><samp></var><span class="option">--enter-standout-mode=seq</span><var></samp></var>] [<var><samp></var><span class="option">--exit-standout-mode=seq</span><var></samp></var>]<var><a name="index-terminfo-20"></a></var><br>
<blockquote><p>Define the capabilities of your terminal. Use this command to define
escape sequences, if it is not vt100-compatible. You may use `<samp><span class="samp">\e</span></samp>'
for &lt;ESC&gt; and `<samp><span class="samp">^X</span></samp>' for a control character.

        <p>You can use the utility <samp><span class="command">grub-terminfo</span></samp> to generate
appropriate arguments to this command. See <a href="#Invoking-grub_002dterminfo">Invoking grub-terminfo</a>.

        <p>If no option is specified, the current settings are printed. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="tftpserver"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#unhide">unhide</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#terminfo">terminfo</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#General-commands">General commands</a>

</div>

<h4 class="subsection">13.2.16 tftpserver</h4>

<div class="defun">
&mdash; Command: <b>tftpserver</b><var> ipaddr<a name="index-tftpserver-21"></a></var><br>
<blockquote><p><strong>Caution:</strong> This command exists only for backward
compatibility. Use <samp><span class="command">ifconfig</span></samp> (see <a href="#ifconfig">ifconfig</a>) instead.

        <p>Override a TFTP server address returned by a BOOTP/DHCP/RARP server. The
argument <var>ipaddr</var> must be in dotted decimal format, like
`<samp><span class="samp">192.168.0.15</span></samp>'.  This command is only available if GRUB is compiled
with netboot support. See also <a href="#Network">Network</a>. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="unhide"></a>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#tftpserver">tftpserver</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#General-commands">General commands</a>

</div>

<h4 class="subsection">13.2.17 unhide</h4>

<div class="defun">
&mdash; Command: <b>unhide</b><var> partition<a name="index-unhide-22"></a></var><br>
<blockquote><p>Unhide the partition <var>partition</var> by clearing the <dfn>hidden</dfn> bit in
its partition type code. This is useful only when booting DOS or Windows
and multiple primary partitions exist on one disk. See also
<a href="#DOS_002fWindows">DOS/Windows</a>. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="Command-line-and-menu-entry-commands"></a>
<a name="Command_002dline-and-menu-entry-commands"></a>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#General-commands">General commands</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Commands">Commands</a>

</div>

<h3 class="section">13.3 The list of command-line and menu entry commands</h3>

<p>These commands are usable in the command-line and in menu entries.  If
you forget a command, you can run the command <samp><span class="command">help</span></samp>
(see <a href="#help">help</a>).

<ul class="menu">
<li><a accesskey="1" href="#blocklist">blocklist</a>:                    Get the block list notation of a file
<li><a accesskey="2" href="#boot">boot</a>:                         Start up your operating system
<li><a accesskey="3" href="#cat">cat</a>:                          Show the contents of a file
<li><a accesskey="4" href="#chainloader">chainloader</a>:                  Chain-load another boot loader
<li><a accesskey="5" href="#cmp">cmp</a>:                          Compare two files
<li><a accesskey="6" href="#configfile">configfile</a>:                   Load a configuration file
<li><a accesskey="7" href="#debug">debug</a>:                        Toggle the debug flag
<li><a accesskey="8" href="#displayapm">displayapm</a>:                   Display APM information
<li><a accesskey="9" href="#displaymem">displaymem</a>:                   Display memory configuration
<li><a href="#embed">embed</a>:                        Embed Stage 1.5
<li><a href="#find">find</a>:                         Find a file
<li><a href="#fstest">fstest</a>:                       Test a filesystem
<li><a href="#geometry">geometry</a>:                     Manipulate the geometry of a drive
<li><a href="#halt">halt</a>:                         Shut down your computer
<li><a href="#help">help</a>:                         Show help messages
<li><a href="#impsprobe">impsprobe</a>:                    Probe SMP
<li><a href="#initrd">initrd</a>:                       Load an initrd
<li><a href="#install">install</a>:                      Install GRUB
<li><a href="#ioprobe">ioprobe</a>:                      Probe I/O ports used for a drive
<li><a href="#kernel">kernel</a>:                       Load a kernel
<li><a href="#lock">lock</a>:                         Lock a menu entry
<li><a href="#makeactive">makeactive</a>:                   Make a partition active
<li><a href="#map">map</a>:                          Map a drive to another
<li><a href="#md5crypt">md5crypt</a>:                     Encrypt a password in MD5 format
<li><a href="#module">module</a>:                       Load a module
<li><a href="#modulenounzip">modulenounzip</a>:                Load a module without decompression
<li><a href="#pause">pause</a>:                        Wait for a key press
<li><a href="#quit">quit</a>:                         Exit from the grub shell
<li><a href="#reboot">reboot</a>:                       Reboot your computer
<li><a href="#read">read</a>:                         Read data from memory
<li><a href="#root">root</a>:                         Set GRUB's root device
<li><a href="#rootnoverify">rootnoverify</a>:                 Set GRUB's root device without mounting
<li><a href="#savedefault">savedefault</a>:                  Save current entry as the default entry
<li><a href="#setup">setup</a>:                        Set up GRUB's installation automatically
<li><a href="#testload">testload</a>:                     Load a file for testing a filesystem
<li><a href="#testvbe">testvbe</a>:                      Test VESA BIOS EXTENSION
<li><a href="#uppermem">uppermem</a>:                     Set the upper memory size
<li><a href="#vbeprobe">vbeprobe</a>:                     Probe VESA BIOS EXTENSION
</ul>

<div class="node">
<p><hr>
<a name="blocklist"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#boot">boot</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Command_002dline-and-menu-entry-commands">Command-line and menu entry commands</a>

</div>

<h4 class="subsection">13.3.1 blocklist</h4>

<div class="defun">
&mdash; Command: <b>blocklist</b><var> file<a name="index-blocklist-23"></a></var><br>
<blockquote><p>Print the block list notation of the file <var>file</var>. See <a href="#Block-list-syntax">Block list syntax</a>. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="boot"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#cat">cat</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#blocklist">blocklist</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Command_002dline-and-menu-entry-commands">Command-line and menu entry commands</a>

</div>

<h4 class="subsection">13.3.2 boot</h4>

<div class="defun">
&mdash; Command: <b>boot</b><var><a name="index-boot-24"></a></var><br>
<blockquote><p>Boot the OS or chain-loader which has been loaded. Only necessary if
running the fully interactive command-line (it is implicit at the end of
a menu entry). 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="cat"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#chainloader">chainloader</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#boot">boot</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Command_002dline-and-menu-entry-commands">Command-line and menu entry commands</a>

</div>

<h4 class="subsection">13.3.3 cat</h4>

<div class="defun">
&mdash; Command: <b>cat</b><var> file<a name="index-cat-25"></a></var><br>
<blockquote><p>Display the contents of the file <var>file</var>. This command may be useful
to remind you of your OS's root partition:

     <pre class="example">          grub&gt; <kbd>cat /etc/fstab</kbd>
     </pre>
        </blockquote></div>

<div class="node">
<p><hr>
<a name="chainloader"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#cmp">cmp</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#cat">cat</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Command_002dline-and-menu-entry-commands">Command-line and menu entry commands</a>

</div>

<h4 class="subsection">13.3.4 chainloader</h4>

<div class="defun">
&mdash; Command: <b>chainloader</b> [<var><samp></var><span class="option">--force</span><var></samp></var>]<var> file<a name="index-chainloader-26"></a></var><br>
<blockquote><p>Load <var>file</var> as a chain-loader. Like any other file loaded by the
filesystem code, it can use the blocklist notation to grab the first
sector of the current partition with `<samp><span class="samp">+1</span></samp>'. If you specify the
option <samp><span class="option">--force</span></samp>, then load <var>file</var> forcibly, whether it has a
correct signature or not. This is required when you want to load a
defective boot loader, such as SCO UnixWare 7.1 (see <a href="#SCO-UnixWare">SCO UnixWare</a>). 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="cmp"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#configfile">configfile</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#chainloader">chainloader</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Command_002dline-and-menu-entry-commands">Command-line and menu entry commands</a>

</div>

<h4 class="subsection">13.3.5 cmp</h4>

<div class="defun">
&mdash; Command: <b>cmp</b><var> file1 file2<a name="index-cmp-27"></a></var><br>
<blockquote><p>Compare the file <var>file1</var> with the file <var>file2</var>. If they differ
in size, print the sizes like this:

     <pre class="example">          Differ in size: 0x1234 [foo], 0x4321 [bar]
     </pre>
        <p>If the sizes are equal but the bytes at an offset differ, then print the
bytes like this:

     <pre class="example">          Differ at the offset 777: 0xbe [foo], 0xef [bar]
     </pre>
        <p>If they are completely identical, nothing will be printed. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="configfile"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#debug">debug</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#cmp">cmp</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Command_002dline-and-menu-entry-commands">Command-line and menu entry commands</a>

</div>

<h4 class="subsection">13.3.6 configfile</h4>

<div class="defun">
&mdash; Command: <b>configfile</b><var> file<a name="index-configfile-28"></a></var><br>
<blockquote><p>Load <var>file</var> as a configuration file. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="debug"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#displayapm">displayapm</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#configfile">configfile</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Command_002dline-and-menu-entry-commands">Command-line and menu entry commands</a>

</div>

<h4 class="subsection">13.3.7 debug</h4>

<div class="defun">
&mdash; Command: <b>debug</b><var><a name="index-debug-29"></a></var><br>
<blockquote><p>Toggle debug mode (by default it is off). When debug mode is on, some
extra messages are printed to show disk activity. This global debug flag
is mainly useful for GRUB developers when testing new code. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="displayapm"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#displaymem">displaymem</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#debug">debug</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Command_002dline-and-menu-entry-commands">Command-line and menu entry commands</a>

</div>

<h4 class="subsection">13.3.8 displayapm</h4>

<div class="defun">
&mdash; Command: <b>displayapm</b><var><a name="index-displayapm-30"></a></var><br>
<blockquote><p>Display APM BIOS information. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="displaymem"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#embed">embed</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#displayapm">displayapm</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Command_002dline-and-menu-entry-commands">Command-line and menu entry commands</a>

</div>

<h4 class="subsection">13.3.9 displaymem</h4>

<div class="defun">
&mdash; Command: <b>displaymem</b><var><a name="index-displaymem-31"></a></var><br>
<blockquote><p>Display what GRUB thinks the system address space map of the machine is,
including all regions of physical <span class="sc">ram</span> installed. GRUB's
<dfn>upper/lower memory</dfn> display uses the standard BIOS interface for
the available memory in the first megabyte, or <dfn>lower memory</dfn>, and a
synthesized number from various BIOS interfaces of the memory starting
at 1MB and going up to the first chipset hole for <dfn>upper memory</dfn>
(the standard PC <dfn>upper memory</dfn> interface is limited to reporting a
maximum of 64MB). 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="embed"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#find">find</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#displaymem">displaymem</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Command_002dline-and-menu-entry-commands">Command-line and menu entry commands</a>

</div>

<h4 class="subsection">13.3.10 embed</h4>

<div class="defun">
&mdash; Command: <b>embed</b><var> stage1_5 device<a name="index-embed-32"></a></var><br>
<blockquote><p>Embed the Stage 1.5 <var>stage1_5</var> in the sectors after the MBR if
<var>device</var> is a drive, or in the <dfn>boot loader</dfn> area if <var>device</var>
is a FFS partition or a ReiserFS partition.<a rel="footnote" href="#fn-9" name="fnd-9"><sup>9</sup></a> Print the number of sectors which
<var>stage1_5</var> occupies, if successful.

        <p>Usually, you don't need to run this command directly. See <a href="#setup">setup</a>. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="find"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#fstest">fstest</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#embed">embed</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Command_002dline-and-menu-entry-commands">Command-line and menu entry commands</a>

</div>

<h4 class="subsection">13.3.11 find</h4>

<div class="defun">
&mdash; Command: <b>find</b><var> filename<a name="index-find-33"></a></var><br>
<blockquote><p>Search for the file name <var>filename</var> in all mountable partitions
and print the list of the devices which contain the file. The file
name <var>filename</var> should be an absolute file name like
<code>/boot/grub/stage1</code>. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="fstest"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#geometry">geometry</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#find">find</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Command_002dline-and-menu-entry-commands">Command-line and menu entry commands</a>

</div>

<h4 class="subsection">13.3.12 fstest</h4>

<div class="defun">
&mdash; Command: <b>fstest</b><var><a name="index-fstest-34"></a></var><br>
<blockquote><p>Toggle filesystem test mode. 
Filesystem test mode, when turned on, prints out data corresponding to
all the device reads and what values are being sent to the low-level
routines. The format is `<samp><span class="samp">&lt;</span><var>partition-offset-sector</var><span class="samp">,
</span><var>byte-offset</var><span class="samp">, </span><var>byte-length</var><span class="samp">&gt;</span></samp>' for high-level reads inside a
partition, and `<samp><span class="samp">[</span><var>disk-offset-sector</var><span class="samp">]</span></samp>' for low-level sector
requests from the disk. 
Filesystem test mode is turned off by any use of the <samp><span class="command">install</span></samp>
(see <a href="#install">install</a>) or <samp><span class="command">testload</span></samp> (see <a href="#testload">testload</a>) commands. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="geometry"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#halt">halt</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#fstest">fstest</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Command_002dline-and-menu-entry-commands">Command-line and menu entry commands</a>

</div>

<h4 class="subsection">13.3.13 geometry</h4>

<div class="defun">
&mdash; Command: <b>geometry</b><var> drive </var>[<var>cylinder head sector </var>[<var>total_sector</var>]]<var><a name="index-geometry-35"></a></var><br>
<blockquote><p>Print the information for the drive <var>drive</var>. In the grub shell, you
can set the geometry of the drive arbitrarily. The number of
cylinders, the number of heads, the number of sectors and the number of
total sectors are set to CYLINDER, HEAD, SECTOR and TOTAL_SECTOR,
respectively. If you omit TOTAL_SECTOR, then it will be calculated
based on the C/H/S values automatically. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="halt"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#help">help</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#geometry">geometry</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Command_002dline-and-menu-entry-commands">Command-line and menu entry commands</a>

</div>

<h4 class="subsection">13.3.14 halt</h4>

<div class="defun">
&mdash; Command: <b>halt</b><var> <samp></var><span class="option">--no-apm</span><var></samp><a name="index-halt-36"></a></var><br>
<blockquote><p>The command halts the computer. If the <samp><span class="option">--no-apm</span></samp> option
is specified, no APM BIOS call is performed. Otherwise, the computer
is shut down using APM. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="help"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#impsprobe">impsprobe</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#halt">halt</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Command_002dline-and-menu-entry-commands">Command-line and menu entry commands</a>

</div>

<h4 class="subsection">13.3.15 help</h4>

<div class="defun">
&mdash; Command: <b>help</b><var> <samp></var><span class="option">--all</span><var></samp> </var>[<var>pattern <small class="dots">...</small></var>]<var><a name="index-help-37"></a></var><br>
<blockquote><p>Display helpful information about builtin commands. If you do not
specify <var>pattern</var>, this command shows short descriptions of most of
available commands. If you specify the option <samp><span class="option">--all</span></samp> to this
command, short descriptions of rarely used commands (such as
<a href="#testload">testload</a>) are displayed as well.

        <p>If you specify any <var>patterns</var>, it displays longer information
about each of the commands which match those <var>patterns</var>. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="impsprobe"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#initrd">initrd</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#help">help</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Command_002dline-and-menu-entry-commands">Command-line and menu entry commands</a>

</div>

<h4 class="subsection">13.3.16 impsprobe</h4>

<div class="defun">
&mdash; Command: <b>impsprobe</b><var><a name="index-impsprobe-38"></a></var><br>
<blockquote><p>Probe the Intel Multiprocessor Specification 1.1 or 1.4 configuration
table and boot the various CPUs which are found into a tight loop. This
command can be used only in the Stage 2, but not in the grub shell. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="initrd"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#install">install</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#impsprobe">impsprobe</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Command_002dline-and-menu-entry-commands">Command-line and menu entry commands</a>

</div>

<h4 class="subsection">13.3.17 initrd</h4>

<div class="defun">
&mdash; Command: <b>initrd</b><var> file <small class="dots">...</small><a name="index-initrd-39"></a></var><br>
<blockquote><p>Load an initial ramdisk for a Linux format boot image and set the
appropriate parameters in the Linux setup area in memory. See also
<a href="#GNU_002fLinux">GNU/Linux</a>. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="install"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#ioprobe">ioprobe</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#initrd">initrd</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Command_002dline-and-menu-entry-commands">Command-line and menu entry commands</a>

</div>

<h4 class="subsection">13.3.18 install</h4>

<div class="defun">
&mdash; Command: <b>install</b> [<var><samp></var><span class="option">--force-lba</span><var></samp></var>] [<var><samp></var><span class="option">--stage2=os_stage2_file</span><var></samp></var>]<var> stage1_file </var>[<var><samp></var><span class="option">d</span><var></samp></var>]<var> dest_dev stage2_file </var>[<var>addr</var>] [<var><samp></var><span class="option">p</span><var></samp></var>] [<var>config_file</var>] [<var>real_config_file</var>]<var><a name="index-install-40"></a></var><br>
<blockquote><p>This command is fairly complex, and you should not use this command
unless you are familiar with GRUB. Use <samp><span class="command">setup</span></samp> (see <a href="#setup">setup</a>)
instead.

        <p>In short, it will perform a full install presuming the Stage 2 or Stage
1.5<a rel="footnote" href="#fn-10" name="fnd-10"><sup>10</sup></a> is in its final install location.

        <p>In slightly more detail, it will load <var>stage1_file</var>, validate that
it is a GRUB Stage 1 of the right version number, install in it a
blocklist for loading <var>stage2_file</var> as a Stage 2. If the option
<samp><span class="option">d</span></samp> is present, the Stage 1 will always look for the actual
disk <var>stage2_file</var> was installed on, rather than using the booting
drive. The Stage 2 will be loaded at address <var>addr</var>, which must be
`<samp><span class="samp">0x8000</span></samp>' for a true Stage 2, and `<samp><span class="samp">0x2000</span></samp>' for a Stage 1.5. If
<var>addr</var> is not present, GRUB will determine the address
automatically. It then writes the completed Stage 1 to the first block
of the device <var>dest_dev</var>. If the options <samp><span class="option">p</span></samp> or
<var>config_file</var> are present, then it reads the first block of stage2,
modifies it with the values of the partition <var>stage2_file</var> was found
on (for <samp><span class="option">p</span></samp>) or places the string <var>config_file</var> into the area
telling the stage2 where to look for a configuration file at boot
time. Likewise, if <var>real_config_file</var> is present and
<var>stage2_file</var> is a Stage 1.5, then the Stage 2 <var>config_file</var> is
patched with the configuration file name <var>real_config_file</var>. This
command preserves the DOS BPB (and for hard disks, the partition table)
of the sector the Stage 1 is to be installed into.

        <p><strong>Caution:</strong> Several buggy BIOSes don't pass a booting drive
properly when booting from a hard disk drive. Therefore, you will
unfortunately have to specify the option <samp><span class="option">d</span></samp>, whether your
Stage2 resides at the booting drive or not, if you have such a
BIOS. We know these are defective in this way:

          <dl>
<dt><dd>Fujitsu LifeBook 400 BIOS version 31J0103A

          <br><dt><dd>HP Vectra XU 6/200 BIOS version GG.06.11
</dl>

        <p><strong>Caution2:</strong> A number of BIOSes don't return a correct LBA support
bitmap even if they do have the support. So GRUB provides a solution to
ignore the wrong bitmap, that is, the option <samp><span class="option">--force-lba</span></samp>. Don't
use this option if you know that your BIOS doesn't have LBA support.

        <p><strong>Caution3:</strong> You must specify the option <samp><span class="option">--stage2</span></samp> in the
grub shell, if you cannot unmount the filesystem where your stage2 file
resides. The argument should be the file name in your operating system. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="ioprobe"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#kernel">kernel</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#install">install</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Command_002dline-and-menu-entry-commands">Command-line and menu entry commands</a>

</div>

<h4 class="subsection">13.3.19 ioprobe</h4>

<div class="defun">
&mdash; Command: <b>ioprobe</b><var> drive<a name="index-ioprobe-41"></a></var><br>
<blockquote><p>Probe I/O ports used for the drive <var>drive</var>. This command will list
the I/O ports on the screen. For technical information,
See <a href="#Internals">Internals</a>. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="kernel"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#lock">lock</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#ioprobe">ioprobe</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Command_002dline-and-menu-entry-commands">Command-line and menu entry commands</a>

</div>

<h4 class="subsection">13.3.20 kernel</h4>

<div class="defun">
&mdash; Command: <b>kernel</b> [<var><samp></var><span class="option">--type=type</span><var></samp></var>] [<var><samp></var><span class="option">--no-mem-option</span><var></samp></var>]<var> file <small class="dots">...</small><a name="index-kernel-42"></a></var><br>
<blockquote><p>Attempt to load the primary boot image (Multiboot a.out or <span class="sc">elf</span>,
Linux zImage or bzImage, FreeBSD a.out, NetBSD a.out, etc.) from
<var>file</var>. The rest of the line is passed verbatim as the <dfn>kernel
command-line</dfn>. Any modules must be reloaded after using this command.

        <p>This command also accepts the option <samp><span class="option">--type</span></samp> so that you can
specify the kernel type of <var>file</var> explicitly. The argument
<var>type</var> must be one of these: `<samp><span class="samp">netbsd</span></samp>', `<samp><span class="samp">freebsd</span></samp>',
`<samp><span class="samp">openbsd</span></samp>', `<samp><span class="samp">linux</span></samp>', `<samp><span class="samp">biglinux</span></samp>', and
`<samp><span class="samp">multiboot</span></samp>'. However, you need to specify it only if you want to
load a NetBSD <span class="sc">elf</span> kernel, because GRUB can automatically determine
a kernel type in the other cases, quite safely.

        <p>The option <samp><span class="option">--no-mem-option</span></samp> is effective only for Linux. If the
option is specified, GRUB doesn't pass the option <samp><span class="option">mem=</span></samp> to the
kernel.  This option is implied for Linux kernels 2.4.18 and newer. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="lock"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#makeactive">makeactive</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#kernel">kernel</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Command_002dline-and-menu-entry-commands">Command-line and menu entry commands</a>

</div>

<h4 class="subsection">13.3.21 lock</h4>

<div class="defun">
&mdash; Command: <b>lock</b><var><a name="index-lock-43"></a></var><br>
<blockquote><p>Prevent normal users from executing arbitrary menu entries. You must use
the command <samp><span class="command">password</span></samp> if you really want this command to be
useful (see <a href="#password">password</a>).

        <p>This command is used in a menu, as shown in this example:

     <pre class="example">          title This entry is too dangerous to be executed by normal users
          lock
          root (hd0,a)
          kernel /no-security-os
     </pre>
        <p>See also <a href="#Security">Security</a>. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="makeactive"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#map">map</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#lock">lock</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Command_002dline-and-menu-entry-commands">Command-line and menu entry commands</a>

</div>

<h4 class="subsection">13.3.22 makeactive</h4>

<div class="defun">
&mdash; Command: <b>makeactive</b><var><a name="index-makeactive-44"></a></var><br>
<blockquote><p>Set the active partition on the root disk to GRUB's root device. 
This command is limited to <em>primary</em> PC partitions on a hard disk. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="map"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#md5crypt">md5crypt</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#makeactive">makeactive</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Command_002dline-and-menu-entry-commands">Command-line and menu entry commands</a>

</div>

<h4 class="subsection">13.3.23 map</h4>

<div class="defun">
&mdash; Command: <b>map</b><var> to_drive from_drive<a name="index-map-45"></a></var><br>
<blockquote><p>Map the drive <var>from_drive</var> to the drive <var>to_drive</var>. This is
necessary when you chain-load some operating systems, such as DOS, if
such an OS resides at a non-first drive. Here is an example:

     <pre class="example">          grub&gt; <kbd>map (hd0) (hd1)</kbd>
          grub&gt; <kbd>map (hd1) (hd0)</kbd>
     </pre>
        <p>The example exchanges the order between the first hard disk and the
second hard disk. See also <a href="#DOS_002fWindows">DOS/Windows</a>. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="md5crypt"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#module">module</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#map">map</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Command_002dline-and-menu-entry-commands">Command-line and menu entry commands</a>

</div>

<h4 class="subsection">13.3.24 md5crypt</h4>

<div class="defun">
&mdash; Command: <b>md5crypt</b><var><a name="index-md5crypt-46"></a></var><br>
<blockquote><p>Prompt to enter a password, and encrypt it in MD5 format. The encrypted
password can be used with the command <samp><span class="command">password</span></samp>
(see <a href="#password">password</a>). See also <a href="#Security">Security</a>. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="module"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#modulenounzip">modulenounzip</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#md5crypt">md5crypt</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Command_002dline-and-menu-entry-commands">Command-line and menu entry commands</a>

</div>

<h4 class="subsection">13.3.25 module</h4>

<div class="defun">
&mdash; Command: <b>module</b><var> file <small class="dots">...</small><a name="index-module-47"></a></var><br>
<blockquote><p>Load a boot module <var>file</var> for a Multiboot format boot image (no
interpretation of the file contents are made, so the user of this
command must know what the kernel in question expects). The rest of the
line is passed as the <dfn>module command-line</dfn>, like the
<samp><span class="command">kernel</span></samp> command. You must load a Multiboot kernel image before
loading any module. See also <a href="#modulenounzip">modulenounzip</a>. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="modulenounzip"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#pause">pause</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#module">module</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Command_002dline-and-menu-entry-commands">Command-line and menu entry commands</a>

</div>

<h4 class="subsection">13.3.26 modulenounzip</h4>

<div class="defun">
&mdash; Command: <b>modulenounzip</b><var> file <small class="dots">...</small><a name="index-modulenounzip-48"></a></var><br>
<blockquote><p>The same as <samp><span class="command">module</span></samp> (see <a href="#module">module</a>), except that automatic
decompression is disabled. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="pause"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#quit">quit</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#modulenounzip">modulenounzip</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Command_002dline-and-menu-entry-commands">Command-line and menu entry commands</a>

</div>

<h4 class="subsection">13.3.27 pause</h4>

<div class="defun">
&mdash; Command: <b>pause</b><var> message <small class="dots">...</small><a name="index-pause-49"></a></var><br>
<blockquote><p>Print the <var>message</var>, then wait until a key is pressed. Note that
placing &lt;^G&gt; (ASCII code 7) in the message will cause the speaker to
emit the standard beep sound, which is useful when prompting the user to
change floppies. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="quit"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#reboot">reboot</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#pause">pause</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Command_002dline-and-menu-entry-commands">Command-line and menu entry commands</a>

</div>

<h4 class="subsection">13.3.28 quit</h4>

<div class="defun">
&mdash; Command: <b>quit</b><var><a name="index-quit-50"></a></var><br>
<blockquote><p>Exit from the grub shell <samp><span class="command">grub</span></samp> (see <a href="#Invoking-the-grub-shell">Invoking the grub shell</a>). This command can be used only in the grub shell. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="reboot"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#read">read</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#quit">quit</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Command_002dline-and-menu-entry-commands">Command-line and menu entry commands</a>

</div>

<h4 class="subsection">13.3.29 reboot</h4>

<div class="defun">
&mdash; Command: <b>reboot</b><var><a name="index-reboot-51"></a></var><br>
<blockquote><p>Reboot the computer. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="read"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#root">root</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#reboot">reboot</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Command_002dline-and-menu-entry-commands">Command-line and menu entry commands</a>

</div>

<h4 class="subsection">13.3.30 read</h4>

<div class="defun">
&mdash; Command: <b>read</b><var> addr<a name="index-read-52"></a></var><br>
<blockquote><p>Read a 32-bit value from memory at address <var>addr</var> and display it in
hex format. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="root"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#rootnoverify">rootnoverify</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#read">read</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Command_002dline-and-menu-entry-commands">Command-line and menu entry commands</a>

</div>

<h4 class="subsection">13.3.31 root</h4>

<div class="defun">
&mdash; Command: <b>root</b><var> device </var>[<var>hdbias</var>]<var><a name="index-root-53"></a></var><br>
<blockquote><p>Set the current <dfn>root device</dfn> to the device <var>device</var>, then
attempt to mount it to get the partition size (for passing the partition
descriptor in <code>ES:ESI</code>, used by some chain-loaded boot loaders), the
BSD drive-type (for booting BSD kernels using their native boot format),
and correctly determine the PC partition where a BSD sub-partition is
located. The optional <var>hdbias</var> parameter is a number to tell a BSD
kernel how many BIOS drive numbers are on controllers before the current
one. For example, if there is an IDE disk and a SCSI disk, and your
FreeBSD root partition is on the SCSI disk, then use a `<samp><span class="samp">1</span></samp>' for
<var>hdbias</var>.

        <p>See also <a href="#rootnoverify">rootnoverify</a>. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="rootnoverify"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#savedefault">savedefault</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#root">root</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Command_002dline-and-menu-entry-commands">Command-line and menu entry commands</a>

</div>

<h4 class="subsection">13.3.32 rootnoverify</h4>

<div class="defun">
&mdash; Command: <b>rootnoverify</b><var> device </var>[<var>hdbias</var>]<var><a name="index-rootnoverify-54"></a></var><br>
<blockquote><p>Similar to <samp><span class="command">root</span></samp> (see <a href="#root">root</a>), but don't attempt to mount the
partition. This is useful for when an OS is outside of the area of the
disk that GRUB can read, but setting the correct root device is still
desired. Note that the items mentioned in <samp><span class="command">root</span></samp> above which
derived from attempting the mount will <em>not</em> work correctly. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="savedefault"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#setup">setup</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#rootnoverify">rootnoverify</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Command_002dline-and-menu-entry-commands">Command-line and menu entry commands</a>

</div>

<h4 class="subsection">13.3.33 savedefault</h4>

<div class="defun">
&mdash; Command: <b>savedefault</b><var> num<a name="index-savedefault-55"></a></var><br>
<blockquote><p>Save the current menu entry or <var>num</var> if specified as a default
entry. Here is an example:

     <pre class="example">          default saved
          timeout 10
          
          title GNU/Linux
          root (hd0,0)
          kernel /boot/vmlinuz root=/dev/sda1 vga=ext
          initrd /boot/initrd
          savedefault
          
          title FreeBSD
          root (hd0,a)
          kernel /boot/loader
          savedefault
     </pre>
        <p>With this configuration, GRUB will choose the entry booted previously as
the default entry.

        <p>You can specify `<samp><span class="samp">fallback</span></samp>' instead of a number. Then, next
fallback entry is saved. Next fallback entry is chosen from fallback
entries. Normally, this will be the first entry in fallback ones.

        <p>See also <a href="#default">default</a> and <a href="#Invoking-grub_002dset_002ddefault">Invoking grub-set-default</a>. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="setup"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#testload">testload</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#savedefault">savedefault</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Command_002dline-and-menu-entry-commands">Command-line and menu entry commands</a>

</div>

<h4 class="subsection">13.3.34 setup</h4>

<div class="defun">
&mdash; Command: <b>setup</b> [<var><samp></var><span class="option">--force-lba</span><var></samp></var>] [<var><samp></var><span class="option">--stage2=os_stage2_file</span><var></samp></var>] [<var><samp></var><span class="option">--prefix=dir</span><var></samp></var>]<var> install_device </var>[<var>image_device</var>]<var><a name="index-setup-56"></a></var><br>
<blockquote><p>Set up the installation of GRUB automatically. This command uses the
more flexible command <samp><span class="command">install</span></samp> (see <a href="#install">install</a>) in the backend
and installs GRUB into the device <var>install_device</var>. If
<var>image_device</var> is specified, then find the GRUB images
(see <a href="#Images">Images</a>) in the device <var>image_device</var>, otherwise use the
current <dfn>root device</dfn>, which can be set by the command
<samp><span class="command">root</span></samp>. If <var>install_device</var> is a hard disk, then embed a
Stage 1.5 in the disk if possible.

        <p>The option <samp><span class="option">--prefix</span></samp> specifies the directory under which GRUB
images are put. If it is not specified, GRUB automatically searches them
in <samp><span class="file">/boot/grub</span></samp> and <samp><span class="file">/grub</span></samp>.

        <p>The options <samp><span class="option">--force-lba</span></samp> and <samp><span class="option">--stage2</span></samp> are just passed
to <samp><span class="command">install</span></samp> if specified. See <a href="#install">install</a>, for more
information. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="testload"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#testvbe">testvbe</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#setup">setup</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Command_002dline-and-menu-entry-commands">Command-line and menu entry commands</a>

</div>

<h4 class="subsection">13.3.35 testload</h4>

<div class="defun">
&mdash; Command: <b>testload</b><var> file<a name="index-testload-57"></a></var><br>
<blockquote><p>Read the entire contents of <var>file</var> in several different ways and
compare them, to test the filesystem code. The output is somewhat
cryptic, but if no errors are reported and the final `<samp><span class="samp">i=</span><var>X</var><span class="samp">,
filepos=</span><var>Y</var></samp>' reading has <var>X</var> and <var>Y</var> equal, then it is
definitely consistent, and very likely works correctly subject to a
consistent offset error. If this test succeeds, then a good next step is
to try loading a kernel. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="testvbe"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#uppermem">uppermem</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#testload">testload</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Command_002dline-and-menu-entry-commands">Command-line and menu entry commands</a>

</div>

<h4 class="subsection">13.3.36 testvbe</h4>

<div class="defun">
&mdash; Command: <b>testvbe</b><var> mode<a name="index-testvbe-58"></a></var><br>
<blockquote><p>Test the VESA BIOS EXTENSION mode <var>mode</var>. This command will switch
your video card to the graphics mode, and show an endless animation. Hit
any key to return. See also <a href="#vbeprobe">vbeprobe</a>. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="uppermem"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#vbeprobe">vbeprobe</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#testvbe">testvbe</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Command_002dline-and-menu-entry-commands">Command-line and menu entry commands</a>

</div>

<h4 class="subsection">13.3.37 uppermem</h4>

<div class="defun">
&mdash; Command: <b>uppermem</b><var> kbytes<a name="index-uppermem-59"></a></var><br>
<blockquote><p>Force GRUB to assume that only <var>kbytes</var> kilobytes of upper memory
are installed. Any system address range maps are discarded.

        <p><strong>Caution:</strong> This should be used with great caution, and should
only be necessary on some old machines. GRUB's BIOS probe can pick up
all <span class="sc">ram</span> on all new machines the author has ever heard of. It can
also be used for debugging purposes to lie to an OS. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="vbeprobe"></a>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#uppermem">uppermem</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Command_002dline-and-menu-entry-commands">Command-line and menu entry commands</a>

</div>

<h4 class="subsection">13.3.38 vbeprobe</h4>

<div class="defun">
&mdash; Command: <b>vbeprobe</b> [<var>mode</var>]<var><a name="index-vbeprobe-60"></a></var><br>
<blockquote><p>Probe VESA BIOS EXTENSION information. If the mode <var>mode</var> is
specified, show only the information about <var>mode</var>. Otherwise, this
command lists up available VBE modes on the screen. See also
<a href="#testvbe">testvbe</a>. 
</p></blockquote></div>

<div class="node">
<p><hr>
<a name="Troubleshooting"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Invoking-the-grub-shell">Invoking the grub shell</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Commands">Commands</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">14 Error messages reported by GRUB</h2>

<p>This chapter describes error messages reported by GRUB when you
encounter trouble. See <a href="#Invoking-the-grub-shell">Invoking the grub shell</a>, if your problem is
specific to the grub shell.

<ul class="menu">
<li><a accesskey="1" href="#Stage1-errors">Stage1 errors</a>:                Errors reported by the Stage 1
<li><a accesskey="2" href="#Stage1_002e5-errors">Stage1.5 errors</a>:              Errors reported by the Stage 1.5
<li><a accesskey="3" href="#Stage2-errors">Stage2 errors</a>:                Errors reported by the Stage 2
</ul>

<div class="node">
<p><hr>
<a name="Stage1-errors"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Stage1_002e5-errors">Stage1.5 errors</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Troubleshooting">Troubleshooting</a>

</div>

<h3 class="section">14.1 Errors reported by the Stage 1</h3>

<p>The general way that the Stage 1 handles errors is to print an error
string and then halt. Pressing <kbd>&lt;CTRL&gt;-&lt;ALT&gt;-&lt;DEL&gt;</kbd> will
reboot.

   <p>The following is a comprehensive list of error messages for the Stage 1:

     <dl>
<dt>Hard Disk Error<dd>The stage2 or stage1.5 is being read from a hard disk, and the attempt
to determine the size and geometry of the hard disk failed.

     <br><dt>Floppy Error<dd>The stage2 or stage1.5 is being read from a floppy disk, and the attempt
to determine the size and geometry of the floppy disk failed. It's listed
as a separate error since the probe sequence is different than for hard
disks.

     <br><dt>Read Error<dd>A disk read error happened while trying to read the stage2 or stage1.5.

     <br><dt>Geom Error<dd>The location of the stage2 or stage1.5 is not in the portion of the disk
supported directly by the BIOS read calls.  This could occur because the
BIOS translated geometry has been changed by the user or the disk is
moved to another machine or controller after installation, or GRUB was
not installed using itself (if it was, the Stage 2 version of this error
would have been seen during that process and it would not have completed
the install). 
</dl>

<div class="node">
<p><hr>
<a name="Stage1.5-errors"></a>
<a name="Stage1_002e5-errors"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Stage2-errors">Stage2 errors</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Stage1-errors">Stage1 errors</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Troubleshooting">Troubleshooting</a>

</div>

<h3 class="section">14.2 Errors reported by the Stage 1.5</h3>

<p>The general way that the Stage 1.5 handles errors is to print an error
number in the form <code>Error </code><var>num</var> and then halt. Pressing
<kbd>&lt;CTRL&gt;-&lt;ALT&gt;-&lt;DEL&gt;</kbd> will reboot.

   <p>The error numbers correspond to the errors reported by Stage
2. See <a href="#Stage2-errors">Stage2 errors</a>.

<div class="node">
<p><hr>
<a name="Stage2-errors"></a>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Stage1_002e5-errors">Stage1.5 errors</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Troubleshooting">Troubleshooting</a>

</div>

<h3 class="section">14.3 Errors reported by the Stage 2</h3>

<p>The general way that the Stage 2 handles errors is to abort the
operation in question, print an error string, then (if possible) either
continue based on the fact that an error occurred or wait for the user to
deal with the error.

   <p>The following is a comprehensive list of error messages for the Stage 2
(error numbers for the Stage 1.5 are listed before the colon in each
description):

     <dl>
<dt>1 : Filename must be either an absolute filename or blocklist<dd>This error is returned if a file name is requested which doesn't fit the
syntax/rules listed in the <a href="#Filesystem">Filesystem</a>.

     <br><dt>2 : Bad file or directory type<dd>This error is returned if a file requested is not a regular file, but
something like a symbolic link, directory, or FIFO.

     <br><dt>3 : Bad or corrupt data while decompressing file<dd>This error is returned if the run-length decompression code gets an
internal error. This is usually from a corrupt file.

     <br><dt>4 : Bad or incompatible header in compressed file<dd>This error is returned if the file header for a supposedly compressed
file is bad.

     <br><dt>5 : Partition table invalid or corrupt<dd>This error is returned if the sanity checks on the integrity of the
partition table fail. This is a bad sign.

     <br><dt>6 : Mismatched or corrupt version of stage1/stage2<dd>This error is returned if the install command points to incompatible
or corrupt versions of the stage1 or stage2. It can't detect corruption
in general, but this is a sanity check on the version numbers, which
should be correct.

     <br><dt>7 : Loading below 1MB is not supported<dd>This error is returned if the lowest address in a kernel is below the
1MB boundary. The Linux zImage format is a special case and can be
handled since it has a fixed loading address and maximum size.

     <br><dt>8 : Kernel must be loaded before booting<dd>This error is returned if GRUB is told to execute the boot sequence
without having a kernel to start.

     <br><dt>9 : Unknown boot failure<dd>This error is returned if the boot attempt did not succeed for reasons
which are unknown.

     <br><dt>10 : Unsupported Multiboot features requested<dd>This error is returned when the Multiboot features word in the Multiboot
header requires a feature that is not recognized. The point of this is
that the kernel requires special handling which GRUB is probably
unable to provide.

     <br><dt>11 : Unrecognized device string<dd>This error is returned if a device string was expected, and the string
encountered didn't fit the syntax/rules listed in the <a href="#Filesystem">Filesystem</a>.

     <br><dt>12 : Invalid device requested<dd>This error is returned if a device string is recognizable but does not
fall under the other device errors.

     <br><dt>13 : Invalid or unsupported executable format<dd>This error is returned if the kernel image being loaded is not
recognized as Multiboot or one of the supported native formats (Linux
zImage or bzImage, FreeBSD, or NetBSD).

     <br><dt>14 : Filesystem compatibility error, cannot read whole file<dd>Some of the filesystem reading code in GRUB has limits on the length of
the files it can read. This error is returned when the user runs into
such a limit.

     <br><dt>15 : File not found<dd>This error is returned if the specified file name cannot be found, but
everything else (like the disk/partition info) is OK.

     <br><dt>16 : Inconsistent filesystem structure<dd>This error is returned by the filesystem code to denote an internal
error caused by the sanity checks of the filesystem structure on disk
not matching what it expects. This is usually caused by a corrupt
filesystem or bugs in the code handling it in GRUB.

     <br><dt>17 : Cannot mount selected partition<dd>This error is returned if the partition requested exists, but the
filesystem type cannot be recognized by GRUB.

     <br><dt>18 : Selected cylinder exceeds maximum supported by BIOS<dd>This error is returned when a read is attempted at a linear block
address beyond the end of the BIOS translated area. This generally
happens if your disk is larger than the BIOS can handle (512MB for
(E)IDE disks on older machines or larger than 8GB in general).

     <br><dt>19 : Linux kernel must be loaded before initrd<dd>This error is returned if the initrd command is used before loading a
Linux kernel.

     <br><dt>20 : Multiboot kernel must be loaded before modules<dd>This error is returned if the module load command is used before loading
a Multiboot kernel. It only makes sense in this case anyway, as GRUB has
no idea how to communicate the presence of such modules to a
non-Multiboot-aware kernel.

     <br><dt>21 : Selected disk does not exist<dd>This error is returned if the device part of a device- or full file name
refers to a disk or BIOS device that is not present or not recognized by
the BIOS in the system.

     <br><dt>22 : No such partition<dd>This error is returned if a partition is requested in the device part of
a device- or full file name which isn't on the selected disk.

     <br><dt>23 : Error while parsing number<dd>This error is returned if GRUB was expecting to read a number and
encountered bad data.

     <br><dt>24 : Attempt to access block outside partition<dd>This error is returned if a linear block address is outside of the disk
partition. This generally happens because of a corrupt filesystem on the
disk or a bug in the code handling it in GRUB (it's a great debugging
tool).

     <br><dt>25 : Disk read error<dd>This error is returned if there is a disk read error when trying to
probe or read data from a particular disk.

     <br><dt>26 : Too many symbolic links<dd>This error is returned if the link count is beyond the maximum
(currently 5), possibly the symbolic links are looped.

     <br><dt>27 : Unrecognized command<dd>This error is returned if an unrecognized command is entered on the
command-line or in a boot sequence section of a configuration file and
that entry is selected.

     <br><dt>28 : Selected item cannot fit into memory<dd>This error is returned if a kernel, module, or raw file load command is
either trying to load its data such that it won't fit into memory or it
is simply too big.

     <br><dt>29 : Disk write error<dd>This error is returned if there is a disk write error when trying to
write to a particular disk. This would generally only occur during an
install of set active partition command.

     <br><dt>30 : Invalid argument<dd>This error is returned if an argument specified to a command is invalid.

     <br><dt>31 : File is not sector aligned<dd>This error may occur only when you access a ReiserFS partition by
block-lists (e.g. the command <samp><span class="command">install</span></samp>). In this case, you
should mount the partition with the `<samp><span class="samp">-o notail</span></samp>' option.

     <br><dt>32 : Must be authenticated<dd>This error is returned if you try to run a locked entry. You should
enter a correct password before running such an entry.

     <br><dt>33 : Serial device not configured<dd>This error is returned if you try to change your terminal to a serial
one before initializing any serial device.

     <br><dt>34 : No spare sectors on the disk<dd>This error is returned if a disk doesn't have enough spare space. This
happens when you try to embed Stage 1.5 into the unused sectors after
the MBR, but the first partition starts right after the MBR or they are
used by EZ-BIOS. 
</dl>

<div class="node">
<p><hr>
<a name="Invoking-the-grub-shell"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Invoking-grub_002dinstall">Invoking grub-install</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Troubleshooting">Troubleshooting</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">15 Invoking the grub shell</h2>

<p>This chapter documents the grub shell <samp><span class="command">grub</span></samp>. Note that the grub
shell is an emulator; it doesn't run under the native environment, so it
sometimes does something wrong. Therefore, you shouldn't trust it too
much. If there is anything wrong with it, don't hesitate to try the
native GRUB environment, especially when it guesses a wrong map between
BIOS drives and OS devices.

<ul class="menu">
<li><a accesskey="1" href="#Basic-usage">Basic usage</a>:                  How to use the grub shell
<li><a accesskey="2" href="#Installation-under-UNIX">Installation under UNIX</a>:      How to install GRUB via <samp><span class="command">grub</span></samp>
<li><a accesskey="3" href="#Device-map">Device map</a>:                   The map between BIOS drives and OS devices
</ul>

<div class="node">
<p><hr>
<a name="Basic-usage"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Installation-under-UNIX">Installation under UNIX</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Invoking-the-grub-shell">Invoking the grub shell</a>

</div>

<h3 class="section">15.1 Introduction into the grub shell</h3>

<p>You can use the command <samp><span class="command">grub</span></samp> for installing GRUB under your
operating systems and for a testbed when you add a new feature into GRUB
or when fixing a bug. <samp><span class="command">grub</span></samp> is almost the same as the Stage 2,
and, in fact, it shares the source code with the Stage 2 and you can use
the same commands (see <a href="#Commands">Commands</a>) in <samp><span class="command">grub</span></samp>. It is emulated by
replacing BIOS calls with UNIX system calls and libc functions.

   <p>The command <samp><span class="command">grub</span></samp> accepts the following options:

     <dl>
<dt><samp><span class="option">--help</span></samp><dd>Print a summary of the command-line options and exit.

     <br><dt><samp><span class="option">--version</span></samp><dd>Print the version number of GRUB and exit.

     <br><dt><samp><span class="option">--verbose</span></samp><dd>Print some verbose messages for debugging purpose.

     <br><dt><samp><span class="option">--device-map=</span><var>file</var></samp><dd>Use the device map file <var>file</var>. The format is described in
<a href="#Device-map">Device map</a>.

     <br><dt><samp><span class="option">--no-floppy</span></samp><dd>Do not probe any floppy drive. This option has no effect if the option
<samp><span class="option">--device-map</span></samp> is specified (see <a href="#Device-map">Device map</a>).

     <br><dt><samp><span class="option">--probe-second-floppy</span></samp><dd>Probe the second floppy drive. If this option is not specified, the grub
shell does not probe it, as that sometimes takes a long time. If you
specify the device map file (see <a href="#Device-map">Device map</a>), the grub shell just
ignores this option.

     <br><dt><samp><span class="option">--config-file=</span><var>file</var></samp><dd>Read the configuration file <var>file</var> instead of
<samp><span class="file">/boot/grub/menu.lst</span></samp>. The format is the same as the normal GRUB
syntax. See <a href="#Filesystem">Filesystem</a>, for more information.

     <br><dt><samp><span class="option">--boot-drive=</span><var>drive</var></samp><dd>Set the stage2 <var>boot_drive</var> to <var>drive</var>. This argument should be
an integer (decimal, octal or hexadecimal).

     <br><dt><samp><span class="option">--install-partition=</span><var>par</var></samp><dd>Set the stage2 <var>install_partition</var> to <var>par</var>. This argument
should be an integer (decimal, octal or hexadecimal).

     <br><dt><samp><span class="option">--no-config-file</span></samp><dd>Do not use the configuration file even if it can be read.

     <br><dt><samp><span class="option">--no-curses</span></samp><dd>Do not use the screen handling interface by the curses even if it is
available.

     <br><dt><samp><span class="option">--batch</span></samp><dd>This option has the same meaning as `<samp><span class="samp">--no-config-file --no-curses</span></samp>'.

     <br><dt><samp><span class="option">--read-only</span></samp><dd>Disable writing to any disk.

     <br><dt><samp><span class="option">--hold</span></samp><dd>Wait until a debugger will attach. This option is useful when you want
to debug the startup code. 
</dl>

<div class="node">
<p><hr>
<a name="Installation-under-UNIX"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Device-map">Device map</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Basic-usage">Basic usage</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Invoking-the-grub-shell">Invoking the grub shell</a>

</div>

<h3 class="section">15.2 How to install GRUB via <samp><span class="command">grub</span></samp></h3>

<p>The installation procedure is the same as under the <dfn>native</dfn> Stage
2. See <a href="#Installation">Installation</a>, for more information. The command
<samp><span class="command">grub</span></samp>-specific information is described here.

   <p>What you should be careful about is <dfn>buffer cache</dfn>. <samp><span class="command">grub</span></samp>
makes use of raw devices instead of filesystems that your operating
systems serve, so there exists a potential problem that some cache
inconsistency may corrupt your filesystems. What we recommend is:

     <ul>
<li>If you can unmount drives to which GRUB may write any amount of data,
unmount them before running <samp><span class="command">grub</span></samp>.

     <li>If a drive cannot be unmounted but can be mounted with the read-only
flag, mount it in read-only mode. That should be secure.

     <li>If a drive must be mounted with the read-write flag, make sure that no
activity is being done on it while the command <samp><span class="command">grub</span></samp> is
running.

     <li>Reboot your operating system as soon as possible. This is probably not
required if you follow the rules above, but reboot is the most secure
way. 
</ul>

   <p>In addition, enter the command <samp><span class="command">quit</span></samp> when you finish the
installation. That is <em>very important</em> because <samp><span class="command">quit</span></samp> makes
the buffer cache consistent. Do not push &lt;C-c&gt;.

   <p>If you want to install GRUB non-interactively, specify `<samp><span class="samp">--batch</span></samp>'
option in the command-line. This is a simple example:

<pre class="example">     #!/bin/sh
     
     # Use /usr/sbin/grub if you are on an older system.
     /sbin/grub --batch &lt;&lt;EOT 1&gt;/dev/null 2&gt;/dev/null
     root (hd0,0)
     setup (hd0)
     quit
     EOT
</pre>
   <div class="node">
<p><hr>
<a name="Device-map"></a>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Installation-under-UNIX">Installation under UNIX</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Invoking-the-grub-shell">Invoking the grub shell</a>

</div>

<h3 class="section">15.3 The map between BIOS drives and OS devices</h3>

<p>When you specify the option <samp><span class="option">--device-map</span></samp> (see <a href="#Basic-usage">Basic usage</a>),
the grub shell creates the <dfn>device map file</dfn> automatically unless it
already exists. The file name <samp><span class="file">/boot/grub/device.map</span></samp> is preferred.

   <p>If the device map file exists, the grub shell reads it to map BIOS
drives to OS devices. This file consists of lines like this:

<pre class="example">     <var>device</var> <var>file</var>
</pre>
   <p><var>device</var> is a drive specified in the GRUB syntax (see <a href="#Device-syntax">Device syntax</a>), and <var>file</var> is an OS file, which is normally a device
file.

   <p>The reason why the grub shell gives you the device map file is that it
cannot guess the map between BIOS drives and OS devices correctly in
some environments. For example, if you exchange the boot sequence
between IDE and SCSI in your BIOS, it gets the order wrong.

   <p>Thus, edit the file if the grub shell makes a mistake. You can put any
comments in the file if needed, as the grub shell assumes that a line is
just a comment if the first character is `<samp><span class="samp">#</span></samp>'.

<div class="node">
<p><hr>
<a name="Invoking-grub-install"></a>
<a name="Invoking-grub_002dinstall"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Invoking-grub_002dmd5_002dcrypt">Invoking grub-md5-crypt</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Invoking-the-grub-shell">Invoking the grub shell</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">16 Invoking grub-install</h2>

<p>The program <samp><span class="command">grub-install</span></samp> installs GRUB on your drive using the
grub shell (see <a href="#Invoking-the-grub-shell">Invoking the grub shell</a>). You must specify the
device name on which you want to install GRUB, like this:

<pre class="example">     grub-install <var>install_device</var>
</pre>
   <p>The device name <var>install_device</var> is an OS device name or a GRUB
device name.

   <p><samp><span class="command">grub-install</span></samp> accepts the following options:

     <dl>
<dt><samp><span class="option">--help</span></samp><dd>Print a summary of the command-line options and exit.

     <br><dt><samp><span class="option">--version</span></samp><dd>Print the version number of GRUB and exit.

     <br><dt><samp><span class="option">--force-lba</span></samp><dd>Force GRUB to use LBA mode even for a buggy BIOS. Use this option only
if your BIOS doesn't work properly in LBA mode even though it supports
LBA mode.

     <br><dt><samp><span class="option">--root-directory=</span><var>dir</var></samp><dd>Install GRUB images under the directory <var>dir</var> instead of the root
directory. This option is useful when you want to install GRUB into a
separate partition or a removable disk. Here is an example in which
you have a separate <dfn>boot</dfn> partition which is mounted on
<samp><span class="file">/boot</span></samp>:

     <pre class="example">          <kbd>grub-install --root-directory=/boot hd0</kbd>
     </pre>
     <br><dt><samp><span class="option">--grub-shell=</span><var>file</var></samp><dd>Use <var>file</var> as the grub shell. You can append arbitrary options to
<var>file</var> after the file name, like this:

     <pre class="example">          <kbd>grub-install --grub-shell="grub --read-only" /dev/fd0</kbd>
     </pre>
     <br><dt><samp><span class="option">--recheck</span></samp><dd>Recheck the device map, even if <samp><span class="file">/boot/grub/device.map</span></samp> already
exists. You should use this option whenever you add/remove a disk
into/from your computer. 
</dl>

<div class="node">
<p><hr>
<a name="Invoking-grub-md5-crypt"></a>
<a name="Invoking-grub_002dmd5_002dcrypt"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Invoking-grub_002dterminfo">Invoking grub-terminfo</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Invoking-grub_002dinstall">Invoking grub-install</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">17 Invoking grub-md5-crypt</h2>

<p>The program <samp><span class="command">grub-md5-crypt</span></samp> encrypts a password in MD5 format. 
This is just a frontend of the grub shell (see <a href="#Invoking-the-grub-shell">Invoking the grub shell</a>). Passwords encrypted by this program can be used with the
command <samp><span class="command">password</span></samp> (see <a href="#password">password</a>).

   <p><samp><span class="command">grub-md5-crypt</span></samp> accepts the following options:

     <dl>
<dt><samp><span class="option">--help</span></samp><dd>Print a summary of the command-line options and exit.

     <br><dt><samp><span class="option">--version</span></samp><dd>Print the version information and exit.

     <br><dt><samp><span class="option">--grub-shell=</span><var>file</var></samp><dd>Use <var>file</var> as the grub shell. 
</dl>

<div class="node">
<p><hr>
<a name="Invoking-grub-terminfo"></a>
<a name="Invoking-grub_002dterminfo"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Invoking-grub_002dset_002ddefault">Invoking grub-set-default</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Invoking-grub_002dmd5_002dcrypt">Invoking grub-md5-crypt</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">18 Invoking grub-terminfo</h2>

<p>The program <samp><span class="command">grub-terminfo</span></samp> generates a terminfo command from
a terminfo name (see <a href="#terminfo">terminfo</a>). The result can be used in the
configuration file, to define escape sequences. Because GRUB assumes
that your terminal is vt100-compatible by default, this would be
useful only if your terminal is uncommon (such as vt52).

   <p><samp><span class="command">grub-terminfo</span></samp> accepts the following options:

     <dl>
<dt><samp><span class="option">--help</span></samp><dd>Print a summary of the command-line options and exit.

     <br><dt><samp><span class="option">--version</span></samp><dd>Print the version information and exit. 
</dl>

   <p>You must specify one argument to this command. For example:

<pre class="example">     <kbd>grub-terminfo vt52</kbd>
</pre>
   <div class="node">
<p><hr>
<a name="Invoking-grub-set-default"></a>
<a name="Invoking-grub_002dset_002ddefault"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Invoking-mbchk">Invoking mbchk</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Invoking-grub_002dterminfo">Invoking grub-terminfo</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">19 Invoking grub-set-default</h2>

<p>The program <samp><span class="command">grub-set-default</span></samp> sets the default boot entry for
GRUB. This automatically creates a file named <samp><span class="file">default</span></samp> under
your GRUB directory (i.e. <samp><span class="file">/boot/grub</span></samp>), if it is not
present. This file is used to determine the default boot entry when
GRUB boots up your system when you use `<samp><span class="samp">default saved</span></samp>' in your
configuration file (see <a href="#default">default</a>), and to save next default boot
entry when you use `<samp><span class="samp">savedefault</span></samp>' in a boot entry
(see <a href="#savedefault">savedefault</a>).

   <p><samp><span class="command">grub-set-default</span></samp> accepts the following options:

     <dl>
<dt><samp><span class="option">--help</span></samp><dd>Print a summary of the command-line options and exit.

     <br><dt><samp><span class="option">--version</span></samp><dd>Print the version information and exit.

     <br><dt><samp><span class="option">--root-directory=</span><var>dir</var></samp><dd>Use the directory <var>dir</var> instead of the root directory
(i.e. <samp><span class="file">/</span></samp>) to define the location of the default file. This
is useful when you mount a disk which is used for another system. 
</dl>

   <p>You must specify a single argument to <samp><span class="command">grub-set-default</span></samp>. This
argument is normally the number of a default boot entry. For example,
if you have this configuration file:

<pre class="example">     default saved
     timeout 10
     
     title GNU/Hurd
     root (hd0,0)
     ...
     
     title GNU/Linux
     root (hd0,1)
     ...
</pre>
   <p>and if you want to set the next default boot entry to GNU/Linux, you
may execute this command:

<pre class="example">     <kbd>grub-set-default 1</kbd>
</pre>
   <p>Because the entry for GNU/Linux is `<samp><span class="samp">1</span></samp>'. Note that entries are
counted from zero. So, if you want to specify GNU/Hurd here, then you
should specify `<samp><span class="samp">0</span></samp>'.

   <p>This feature is very useful if you want to test a new kernel or to
make your system quite robust. See <a href="#Making-your-system-robust">Making your system robust</a>, for
more hints about how to set up a robust system.

<div class="node">
<p><hr>
<a name="Invoking-mbchk"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Obtaining-and-Building-GRUB">Obtaining and Building GRUB</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Invoking-grub_002dset_002ddefault">Invoking grub-set-default</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">20 Invoking mbchk</h2>

<p>The program <samp><span class="command">mbchk</span></samp> checks for the format of a Multiboot
kernel. We recommend using this program before booting your own kernel
by GRUB.

   <p><samp><span class="command">mbchk</span></samp> accepts the following options:

     <dl>
<dt><samp><span class="option">--help</span></samp><dd>Print a summary of the command-line options and exit.

     <br><dt><samp><span class="option">--version</span></samp><dd>Print the version number of GRUB and exit.

     <br><dt><samp><span class="option">--quiet</span></samp><dd>Suppress all normal output. 
</dl>

<div class="node">
<p><hr>
<a name="Obtaining-and-Building-GRUB"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Reporting-bugs">Reporting bugs</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Invoking-mbchk">Invoking mbchk</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="appendix">Appendix A How to obtain and build GRUB</h2>

<blockquote>
<strong>Caution:</strong> GRUB requires binutils-2.9.1.0.23 or later because the
GNU assembler has been changed so that it can produce real 16bits
machine code between 2.9.1 and 2.9.1.0.x. See
<a href="http://sources.redhat.com/binutils/">http://sources.redhat.com/binutils/</a>, to obtain information on
how to get the latest version. 
</blockquote>

   <p>GRUB is available from the GNU alpha archive site
<a href="ftp://alpha.gnu.org/gnu/grub">ftp://alpha.gnu.org/gnu/grub</a> or any of its mirrors. The file
will be named grub-version.tar.gz. The current version is
0.97, so the file you should grab is:

   <p><a href="ftp://alpha.gnu.org/gnu/grub/grub-0.97.tar.gz">ftp://alpha.gnu.org/gnu/grub/grub-0.97.tar.gz</a>

   <p>To unbundle GRUB use the instruction:

<pre class="example">     <kbd>zcat grub-0.97.tar.gz | tar xvf -</kbd>
</pre>
   <p>which will create a directory called <samp><span class="file">grub-0.97</span></samp> with
all the sources. You can look at the file <samp><span class="file">INSTALL</span></samp> for detailed
instructions on how to build and install GRUB, but you should be able to
just do:

<pre class="example">     <kbd>cd grub-0.97</kbd>
     <kbd>./configure</kbd>
     <kbd>make install</kbd>
</pre>
   <p>This will install the grub shell <samp><span class="file">grub</span></samp> (see <a href="#Invoking-the-grub-shell">Invoking the grub shell</a>), the Multiboot checker <samp><span class="file">mbchk</span></samp> (see <a href="#Invoking-mbchk">Invoking mbchk</a>),
and the GRUB images. This will also install the GRUB manual.

   <p>Also, the latest version is available from the CVS. See
<a href="http://savannah.gnu.org/cvs/?group=grub">http://savannah.gnu.org/cvs/?group=grub</a> for more information.

<div class="node">
<p><hr>
<a name="Reporting-bugs"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Future">Future</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Obtaining-and-Building-GRUB">Obtaining and Building GRUB</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="appendix">Appendix B Reporting bugs</h2>

<p>These are the guideline for how to report bugs. Take a look at this
list below before you submit bugs:

     <ol type=1 start=1>
<li>Before getting unsettled, read this manual through and through. Also,
see the <a href="http://www.gnu.org/software/grub/grub-faq.html">GNU GRUB FAQ</a>.

     <li>Always mention the information on your GRUB. The version number and the
configuration are quite important. If you build it yourself, write the
options specified to the configure script and your operating system,
including the versions of gcc and binutils.

     <li>If you have trouble with the installation, inform us of how you
installed GRUB. Don't omit error messages, if any. Just `<samp><span class="samp">GRUB hangs
up when it boots</span></samp>' is not enough.

     <p>The information on your hardware is also essential. These are especially
important: the geometries and the partition tables of your hard disk
drives and your BIOS.

     <li>If GRUB cannot boot your operating system, write down
<em>everything</em> you see on the screen. Don't paraphrase them, like
`<samp><span class="samp">The foo OS crashes with GRUB, even though it can boot with the
bar boot loader just fine</span></samp>'. Mention the commands you executed, the
messages printed by them, and information on your operating system
including the version number.

     <li>Explain what you wanted to do. It is very useful to know your purpose
and your wish, and how GRUB didn't satisfy you.

     <li>If you can investigate the problem yourself, please do. That will give
you and us much more information on the problem. Attaching a patch is
even better.

     <p>When you attach a patch, make the patch in unified diff format, and
write ChangeLog entries. But, even when you make a patch, don't forget
to explain the problem, so that we can understand what your patch is
for.

     <li>Write down anything that you think might be related. Please understand
that we often need to reproduce the same problem you encounterred in our
environment. So your information should be sufficient for us to do the
same thing&mdash;Don't forget that we cannot see your computer directly. If
you are not sure whether to state a fact or leave it out, state it! 
Reporting too many things is much better than omitting something
important.
        </ol>

   <p>If you follow the guideline above, submit a report to the
<a href="http://savannah.gnu.org/bugs/?group=grub">Bug Tracking System</a>. 
Alternatively, you can submit a report via electronic mail to
<a href="mailto:bug-grub@gnu.org">bug-grub@gnu.org</a>, but we strongly recommend that you use the
Bug Tracking System, because e-mail can be passed over easily.

   <p>Once we get your report, we will try to fix the bugs.

<div class="node">
<p><hr>
<a name="Future"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Internals">Internals</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Reporting-bugs">Reporting bugs</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="appendix">Appendix C Where GRUB will go</h2>

<p>We started the next generation of GRUB, GRUB 2. This will include
internationalization, dynamic module loading, real memory management,
multiple architecture support, a scripting language, and many other
nice feature. If you are interested in the development of GRUB 2, take
a look at <a href="http://www.gnu.org/software/grub/grub.html">the homepage</a>.

<!-- Separate the programming guide. -->
<div class="node">
<p><hr>
<a name="Internals"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Copying-This-Manual">Copying This Manual</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Future">Future</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="appendix">Appendix D Hacking GRUB</h2>

<p>This chapter documents the user-invisible aspect of GRUB.

   <p>As a general rule of software development, it is impossible to keep the
descriptions of the internals up-to-date, and it is quite hard to
document everything. So refer to the source code, whenever you are not
satisfied with this documentation.  Please assume that this gives just
hints to you.

<ul class="menu">
<li><a accesskey="1" href="#Memory-map">Memory map</a>:                   The memory map of various components
<li><a accesskey="2" href="#Embedded-data">Embedded data</a>:                Embedded variables in GRUB
<li><a accesskey="3" href="#Filesystem-interface">Filesystem interface</a>:         The generic interface for filesystems
<li><a accesskey="4" href="#Command-interface">Command interface</a>:            The generic interface for built-ins
<li><a accesskey="5" href="#Bootstrap-tricks">Bootstrap tricks</a>:             The bootstrap mechanism used in GRUB
<li><a accesskey="6" href="#I_002fO-ports-detection">I/O ports detection</a>:          How to probe I/O ports used by INT 13H
<li><a accesskey="7" href="#Memory-detection">Memory detection</a>:             How to detect all installed RAM
<li><a accesskey="8" href="#Low_002dlevel-disk-I_002fO">Low-level disk I/O</a>:           INT 13H disk I/O interrupts
<li><a accesskey="9" href="#MBR">MBR</a>:                          The structure of Master Boot Record
<li><a href="#Partition-table">Partition table</a>:              The format of partition tables
<li><a href="#Submitting-patches">Submitting patches</a>:           Where and how you should send patches
</ul>

<div class="node">
<p><hr>
<a name="Memory-map"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Embedded-data">Embedded data</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Internals">Internals</a>

</div>

<h3 class="section">D.1 The memory map of various components</h3>

<p>GRUB consists of two distinct components, called <dfn>stages</dfn>, which are
loaded at different times in the boot process. Because they run
mutual-exclusively, sometimes a memory area overlaps with another
memory area. And, even in one stage, a single memory area can be used
for various purposes, because their usages are mutually exclusive.

   <p>Here is the memory map of the various components:

     <dl>
<dt>0 to 4K-1<dd>BIOS and real mode interrupts

     <br><dt>0x07BE to 0x07FF<dd>Partition table passed to another boot loader

     <br><dt>down from 8K-1<dd>Real mode stack

     <br><dt>0x2000 to ?<dd>The optional Stage 1.5 is loaded here

     <br><dt>0x2000 to 0x7FFF<dd>Command-line buffer for Multiboot kernels and modules

     <br><dt>0x7C00 to 0x7DFF<dd>Stage 1 is loaded here by BIOS or another boot loader

     <br><dt>0x7F00 to 0x7F42<dd>LBA drive parameters

     <br><dt>0x8000 to ?<dd>Stage2 is loaded here

     <br><dt>The end of Stage 2 to 416K-1<dd>Heap, in particular used for the menu

     <br><dt>down from 416K-1<dd>Protected mode stack

     <br><dt>416K to 448K-1<dd>Filesystem buffer

     <br><dt>448K to 479.5K-1<dd>Raw device buffer

     <br><dt>479.5K to 480K-1<dd>512-byte scratch area

     <br><dt>480K to 512K-1<dd>Buffers for various functions, such as password, command-line, cut and
paste, and completion.

     <br><dt>The last 1K of lower memory<dd>Disk swapping code and data
</dl>

   <p>See the file <samp><span class="file">stage2/shared.h</span></samp>, for more information.

<div class="node">
<p><hr>
<a name="Embedded-data"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Filesystem-interface">Filesystem interface</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Memory-map">Memory map</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Internals">Internals</a>

</div>

<h3 class="section">D.2 Embedded variables in GRUB</h3>

<p>Stage 1 and Stage 2 have embedded variables whose locations are
well-defined, so that the installation can patch the binary file
directly without recompilation of the stages.

   <p>In Stage 1, these are defined:

     <dl>
<dt><code>0x3E</code><dd>The version number (not GRUB's, but the installation mechanism's).

     <br><dt><code>0x40</code><dd>The boot drive. If it is 0xFF, use a drive passed by BIOS.

     <br><dt><code>0x41</code><dd>The flag for if forcing LBA.

     <br><dt><code>0x42</code><dd>The starting address of Stage 2.

     <br><dt><code>0x44</code><dd>The first sector of Stage 2.

     <br><dt><code>0x48</code><dd>The starting segment of Stage 2.

     <br><dt><code>0x1FE</code><dd>The signature (<code>0xAA55</code>). 
</dl>

   <p>See the file <samp><span class="file">stage1/stage1.S</span></samp>, for more information.

   <p>In the first sector of Stage 1.5 and Stage 2, the block lists are
recorded between <code>firstlist</code> and <code>lastlist</code>. The address of
<code>lastlist</code> is determined when assembling the file
<samp><span class="file">stage2/start.S</span></samp>.

   <p>The trick here is that it is actually read backward, and the first
8-byte block list is not read here, but after the pointer is decremented
8 bytes, then after reading it, it decrements again, reads, and so on,
until it is finished. The terminating condition is when the number of
sectors to be read in the next block list is zero.

   <p>The format of a block list can be seen from the example in the code just
before the <code>firstlist</code> label. Note that it is always from the
beginning of the disk, but <em>not</em> relative to the partition
boundaries.

   <p>In the second sector of Stage 1.5 and Stage 2, these are defined:

     <dl>
<dt><code>0x6</code><dd>The version number (likewise, the installation mechanism's).

     <br><dt><code>0x8</code><dd>The installed partition.

     <br><dt><code>0xC</code><dd>The saved entry number.

     <br><dt><code>0x10</code><dd>The identifier.

     <br><dt><code>0x11</code><dd>The flag for if forcing LBA.

     <br><dt><code>0x12</code><dd>The version string (GRUB's).

     <br><dt><code>0x12</code> + <dfn>the length of the version string</dfn><dd>The name of a configuration file. 
</dl>

   <p>See the file <samp><span class="file">stage2/asm.S</span></samp>, for more information.

<div class="node">
<p><hr>
<a name="Filesystem-interface"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Command-interface">Command interface</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Embedded-data">Embedded data</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Internals">Internals</a>

</div>

<h3 class="section">D.3 The generic interface for filesystems</h3>

<p>For any particular partition, it is presumed that only one of the
<dfn>normal</dfn> filesystems such as FAT, FFS, or ext2fs can be used, so
there is a switch table managed by the functions in
<samp><span class="file">disk_io.c</span></samp>. The notation is that you can only <dfn>mount</dfn> one at a
time.

   <p>The block list filesystem has a special place in the system. In addition
to the <dfn>normal</dfn> filesystem (or even without one mounted), you can
access disk blocks directly (in the indicated partition) via the block
list notation. Using the block list filesystem doesn't effect any other
filesystem mounts.

   <p>The variables which can be read by the filesystem backend are:

     <dl>
<dt><code>current_drive</code><a name="index-current_005fdrive-61"></a><dd>The current BIOS drive number (numbered from 0, if a floppy, and
numbered from 0x80, if a hard disk).

     <br><dt><code>current_partition</code><a name="index-current_005fpartition-62"></a><dd>The current partition number.

     <br><dt><code>current_slice</code><a name="index-current_005fslice-63"></a><dd>The current partition type.

     <br><dt><code>saved_drive</code><a name="index-saved_005fdrive-64"></a><dd>The <dfn>drive</dfn> part of the root device.

     <br><dt><code>saved_partition</code><a name="index-saved_005fpartition-65"></a><dd>The <dfn>partition</dfn> part of the root device.

     <br><dt><code>part_start</code><a name="index-part_005fstart-66"></a><dd>The current partition starting address, in sectors.

     <br><dt><code>part_length</code><a name="index-part_005flength-67"></a><dd>The current partition length, in sectors.

     <br><dt><code>print_possibilities</code><a name="index-print_005fpossibilities-68"></a><dd>True when the <code>dir</code> function should print the possible completions
of a file, and false when it should try to actually open a file of that
name.

     <br><dt><code>FSYS_BUF</code><a name="index-FSYS_005fBUF-69"></a><dd>Filesystem buffer which is 32K in size, to use in any way which the
filesystem backend desires. 
</dl>

   <p>The variables which need to be written by a filesystem backend are:

     <dl>
<dt><code>filepos</code><a name="index-filepos-70"></a><dd>The current position in the file, in sectors.

     <p><strong>Caution:</strong> the value of <var>filepos</var> can be changed out from
under the filesystem code in the current implementation. Don't depend on
it being the same for later calls into the backend code!

     <br><dt><code>filemax</code><a name="index-filemax-71"></a><dd>The length of the file.

     <br><dt><code>disk_read_func</code><a name="index-disk_005fread_005ffunc-72"></a><dd>The value of <var>disk_read_hook</var> <em>only</em> during reading of data
for the file, not any other fs data, inodes, FAT tables, whatever, then
set to <code>NULL</code> at all other times (it will be <code>NULL</code> by
default). If this isn't done correctly, then the <samp><span class="command">testload</span></samp> and
<samp><span class="command">install</span></samp> commands won't work correctly. 
</dl>

   <p>The functions expected to be used by the filesystem backend are:

     <dl>
<dt><code>devread</code><a name="index-devread-73"></a><dd>Only read sectors from within a partition. Sector 0 is the first sector
in the partition.

     <br><dt><code>grub_read</code><a name="index-grub_005fread-74"></a><dd>If the backend uses the block list code, then <code>grub_read</code> can be
used, after setting <var>block_file</var> to 1.

     <br><dt><code>print_a_completion</code><a name="index-print_005fa_005fcompletion-75"></a><dd>If <var>print_possibilities</var> is true, call <code>print_a_completion</code> for
each possible file name. Otherwise, the file name completion won't work. 
</dl>

   <p>The functions expected to be defined by the filesystem backend are
described at least moderately in the file <samp><span class="file">filesys.h</span></samp>. Their usage
is fairly evident from their use in the functions in <samp><span class="file">disk_io.c</span></samp>,
look for the use of the <var>fsys_table</var> array.

   <p><strong>Caution:</strong> The semantics are such that then `<samp><span class="samp">mount</span></samp>'ing the
filesystem, presume the filesystem buffer <code>FSYS_BUF</code> is corrupted,
and (re-)load all important contents. When opening and reading a file,
presume that the data from the `<samp><span class="samp">mount</span></samp>' is available, and doesn't
get corrupted by the open/read (i.e. multiple opens and/or reads will be
done with only one mount if in the same filesystem).

<div class="node">
<p><hr>
<a name="Command-interface"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Bootstrap-tricks">Bootstrap tricks</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Filesystem-interface">Filesystem interface</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Internals">Internals</a>

</div>

<h3 class="section">D.4 The generic interface for built-ins</h3>

<p>GRUB built-in commands are defined in a uniformal interface, whether
they are menu-specific or can be used anywhere. The definition of a
builtin command consists of two parts: the code itself and the table of
the information.

   <p>The code must be a function which takes two arguments, a command-line
string and flags, and returns an `<samp><span class="samp">int</span></samp>' value. The <dfn>flags</dfn>
argument specifies how the function is called, using a bit mask. The
return value must be zero if successful, otherwise non-zero. So it is
normally enough to return <var>errnum</var>.

   <p>The table of the information is represented by the structure
<code>struct builtin</code>, which contains the name of the command, a pointer
to the function, flags, a short description of the command and a long
description of the command. Since the descriptions are used only for
help messages interactively, you don't have to define them, if the
command may not be called interactively (such as <samp><span class="command">title</span></samp>).

   <p>The table is finally registered in the table <var>builtin_table</var>, so
that <code>run_script</code> and <code>enter_cmdline</code> can find the
command. See the files <samp><span class="file">cmdline.c</span></samp> and <samp><span class="file">builtins.c</span></samp>, for more
details.

<div class="node">
<p><hr>
<a name="Bootstrap-tricks"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#I_002fO-ports-detection">I/O ports detection</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Command-interface">Command interface</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Internals">Internals</a>

</div>

<h3 class="section">D.5 The bootstrap mechanism used in GRUB</h3>

<p>The disk space can be used in a boot loader is very restricted because
a MBR (see <a href="#MBR">MBR</a>) is only 512 bytes but it also contains a partition
table (see <a href="#Partition-table">Partition table</a>) and a BPB. So the question is how to
make a boot loader code enough small to be fit in a MBR.

   <p>However, GRUB is a very large program, so we break GRUB into 2 (or 3)
distinct components, <dfn>Stage 1</dfn> and <dfn>Stage 2</dfn> (and optionally
<dfn>Stage 1.5</dfn>). See <a href="#Memory-map">Memory map</a>, for more information.

   <p>We embed Stage 1 in a MBR or in the boot sector of a partition, and
place Stage 2 in a filesystem. The optional Stage 1.5 can be installed
in a filesystem, in the <dfn>boot loader</dfn> area in a FFS or a ReiserFS,
and in the sectors right after a MBR, because Stage 1.5 is enough small
and the sectors right after a MBR is normally an unused region. The size
of this region is the number of sectors per head minus 1.

   <p>Thus, all Stage1 must do is just load Stage2 or Stage1.5. But even if
Stage 1 needs not to support the user interface or the filesystem
interface, it is impossible to make Stage 1 less than 400 bytes, because
GRUB should support both the CHS mode and the LBA mode (see <a href="#Low_002dlevel-disk-I_002fO">Low-level disk I/O</a>).

   <p>The solution used by GRUB is that Stage 1 loads only the first sector of
Stage 2 (or Stage 1.5) and Stage 2 itself loads the rest. The flow of
Stage 1 is:

     <ol type=1 start=1>
<li>Initialize the system briefly.

     <li>Detect the geometry and the accessing mode of the <dfn>loading drive</dfn>.

     <li>Load the first sector of Stage 2.

     <li>Jump to the starting address of the Stage 2.
        </ol>

   <p>The flow of Stage 2 (and Stage 1.5) is:

     <ol type=1 start=1>
<li>Load the rest of itself to the real starting address, that is, the
starting address plus 512 bytes. The block lists are stored in the last
part of the first sector.

     <li>Long jump to the real starting address.
        </ol>

   <p>Note that Stage 2 (or Stage 1.5) does not probe the geometry
or the accessing mode of the <dfn>loading drive</dfn>, since Stage 1 has
already probed them.

<div class="node">
<p><hr>
<a name="I%2fO-ports-detection"></a>
<a name="I_002fO-ports-detection"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Memory-detection">Memory detection</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Bootstrap-tricks">Bootstrap tricks</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Internals">Internals</a>

</div>

<h3 class="section">D.6 How to probe I/O ports used by INT 13H</h3>

<p>FIXME: I will write this chapter after implementing the new technique.

<div class="node">
<p><hr>
<a name="Memory-detection"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Low_002dlevel-disk-I_002fO">Low-level disk I/O</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#I_002fO-ports-detection">I/O ports detection</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Internals">Internals</a>

</div>

<h3 class="section">D.7 How to detect all installed RAM</h3>

<p>FIXME: I doubt if Erich didn't write this chapter only himself wholly,
so I will rewrite this chapter.

<div class="node">
<p><hr>
<a name="Low-level-disk-I%2fO"></a>
<a name="Low_002dlevel-disk-I_002fO"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#MBR">MBR</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Memory-detection">Memory detection</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Internals">Internals</a>

</div>

<h3 class="section">D.8 INT 13H disk I/O interrupts</h3>

<p>FIXME: I'm not sure where some part of the original chapter is derived,
so I will rewrite this chapter.

<div class="node">
<p><hr>
<a name="MBR"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Partition-table">Partition table</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Low_002dlevel-disk-I_002fO">Low-level disk I/O</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Internals">Internals</a>

</div>

<h3 class="section">D.9 The structure of Master Boot Record</h3>

<p>FIXME: Likewise.

<div class="node">
<p><hr>
<a name="Partition-table"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Submitting-patches">Submitting patches</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#MBR">MBR</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Internals">Internals</a>

</div>

<h3 class="section">D.10 The format of partition tables</h3>

<p>FIXME: Probably the original chapter is derived from "How It Works", so
I will rewrite this chapter.

<div class="node">
<p><hr>
<a name="Submitting-patches"></a>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Partition-table">Partition table</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Internals">Internals</a>

</div>

<h3 class="section">D.11 Where and how you should send patches</h3>

<p>When you write patches for GRUB, please send them to the mailing list
<a href="mailto:bug-grub@gnu.org">bug-grub@gnu.org</a>. Here is the list of items of which you
should take care:

     <ul>
<li>Please make your patch as small as possible. Generally, it is not a good
thing to make one big patch which changes many things. Instead,
segregate features and produce many patches.

     <li>Use as late code as possible, for the original code. The CVS repository
always has the current version (see <a href="#Obtaining-and-Building-GRUB">Obtaining and Building GRUB</a>).

     <li>Write ChangeLog entries. See <a href="standards.html#Change-Logs">Change Logs</a>, if you don't know how to write ChangeLog.

     <li>Make patches in unified diff format. `<samp><span class="samp">diff -urN</span></samp>' is appropriate in
most cases.

     <li>Don't make patches reversely. Reverse patches are difficult to read and
use.

     <li>Be careful enough of the license term and the copyright. Because GRUB
is under GNU General Public License, you may not steal code from
software whose license is incompatible against GPL. And, if you copy
code written by others, you must not ignore their copyrights. Feel free
to ask GRUB maintainers, whenever you are not sure what you should do.

     <li>If your patch is too large to send in e-mail, put it at somewhere we can
see. Usually, you shouldn't send e-mail over 20K. 
</ul>

<div class="node">
<p><hr>
<a name="Copying-This-Manual"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Index">Index</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Internals">Internals</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="appendix">Appendix E Copying This Manual</h2>

<ul class="menu">
<li><a accesskey="1" href="#GNU-Free-Documentation-License">GNU Free Documentation License</a>:   License for copying this manual. 
</ul>

<div class="node">
<p><hr>
<a name="GNU-Free-Documentation-License"></a>
Up:&nbsp;<a rel="up" accesskey="u" href="#Copying-This-Manual">Copying This Manual</a>

</div>

<h3 class="appendixsec">E.1 GNU Free Documentation License</h3>

<p><a name="index-FDL_002c-GNU-Free-Documentation-License-76"></a><div align="center">Version 1.2, November 2002</div>

<pre class="display">     Copyright &copy; 2000,2001,2002 Free Software Foundation, Inc.
     51 Franklin St, Fifth Floor, Boston, MA  02110-1301, USA
     
     Everyone is permitted to copy and distribute verbatim copies
     of this license document, but changing it is not allowed.
</pre>
     <ol type=1 start=0>
<li>PREAMBLE

     <p>The purpose of this License is to make a manual, textbook, or other
functional and useful document <dfn>free</dfn> in the sense of freedom: to
assure everyone the effective freedom to copy and redistribute it,
with or without modifying it, either commercially or noncommercially. 
Secondarily, this License preserves for the author and publisher a way
to get credit for their work, while not being considered responsible
for modifications made by others.

     <p>This License is a kind of &ldquo;copyleft&rdquo;, which means that derivative
works of the document must themselves be free in the same sense.  It
complements the GNU General Public License, which is a copyleft
license designed for free software.

     <p>We have designed this License in order to use it for manuals for free
software, because free software needs free documentation: a free
program should come with manuals providing the same freedoms that the
software does.  But this License is not limited to software manuals;
it can be used for any textual work, regardless of subject matter or
whether it is published as a printed book.  We recommend this License
principally for works whose purpose is instruction or reference.

     <li>APPLICABILITY AND DEFINITIONS

     <p>This License applies to any manual or other work, in any medium, that
contains a notice placed by the copyright holder saying it can be
distributed under the terms of this License.  Such a notice grants a
world-wide, royalty-free license, unlimited in duration, to use that
work under the conditions stated herein.  The &ldquo;Document&rdquo;, below,
refers to any such manual or work.  Any member of the public is a
licensee, and is addressed as &ldquo;you&rdquo;.  You accept the license if you
copy, modify or distribute the work in a way requiring permission
under copyright law.

     <p>A &ldquo;Modified Version&rdquo; of the Document means any work containing the
Document or a portion of it, either copied verbatim, or with
modifications and/or translated into another language.

     <p>A &ldquo;Secondary Section&rdquo; is a named appendix or a front-matter section
of the Document that deals exclusively with the relationship of the
publishers or authors of the Document to the Document's overall
subject (or to related matters) and contains nothing that could fall
directly within that overall subject.  (Thus, if the Document is in
part a textbook of mathematics, a Secondary Section may not explain
any mathematics.)  The relationship could be a matter of historical
connection with the subject or with related matters, or of legal,
commercial, philosophical, ethical or political position regarding
them.

     <p>The &ldquo;Invariant Sections&rdquo; are certain Secondary Sections whose titles
are designated, as being those of Invariant Sections, in the notice
that says that the Document is released under this License.  If a
section does not fit the above definition of Secondary then it is not
allowed to be designated as Invariant.  The Document may contain zero
Invariant Sections.  If the Document does not identify any Invariant
Sections then there are none.

     <p>The &ldquo;Cover Texts&rdquo; are certain short passages of text that are listed,
as Front-Cover Texts or Back-Cover Texts, in the notice that says that
the Document is released under this License.  A Front-Cover Text may
be at most 5 words, and a Back-Cover Text may be at most 25 words.

     <p>A &ldquo;Transparent&rdquo; copy of the Document means a machine-readable copy,
represented in a format whose specification is available to the
general public, that is suitable for revising the document
straightforwardly with generic text editors or (for images composed of
pixels) generic paint programs or (for drawings) some widely available
drawing editor, and that is suitable for input to text formatters or
for automatic translation to a variety of formats suitable for input
to text formatters.  A copy made in an otherwise Transparent file
format whose markup, or absence of markup, has been arranged to thwart
or discourage subsequent modification by readers is not Transparent. 
An image format is not Transparent if used for any substantial amount
of text.  A copy that is not &ldquo;Transparent&rdquo; is called &ldquo;Opaque&rdquo;.

     <p>Examples of suitable formats for Transparent copies include plain
<span class="sc">ascii</span> without markup, Texinfo input format, LaTeX input
format, <acronym>SGML</acronym> or <acronym>XML</acronym> using a publicly available
<acronym>DTD</acronym>, and standard-conforming simple <acronym>HTML</acronym>,
PostScript or <acronym>PDF</acronym> designed for human modification.  Examples
of transparent image formats include <acronym>PNG</acronym>, <acronym>XCF</acronym> and
<acronym>JPG</acronym>.  Opaque formats include proprietary formats that can be
read and edited only by proprietary word processors, <acronym>SGML</acronym> or
<acronym>XML</acronym> for which the <acronym>DTD</acronym> and/or processing tools are
not generally available, and the machine-generated <acronym>HTML</acronym>,
PostScript or <acronym>PDF</acronym> produced by some word processors for
output purposes only.

     <p>The &ldquo;Title Page&rdquo; means, for a printed book, the title page itself,
plus such following pages as are needed to hold, legibly, the material
this License requires to appear in the title page.  For works in
formats which do not have any title page as such, &ldquo;Title Page&rdquo; means
the text near the most prominent appearance of the work's title,
preceding the beginning of the body of the text.

     <p>A section &ldquo;Entitled XYZ&rdquo; means a named subunit of the Document whose
title either is precisely XYZ or contains XYZ in parentheses following
text that translates XYZ in another language.  (Here XYZ stands for a
specific section name mentioned below, such as &ldquo;Acknowledgements&rdquo;,
&ldquo;Dedications&rdquo;, &ldquo;Endorsements&rdquo;, or &ldquo;History&rdquo;.)  To &ldquo;Preserve the Title&rdquo;
of such a section when you modify the Document means that it remains a
section &ldquo;Entitled XYZ&rdquo; according to this definition.

     <p>The Document may include Warranty Disclaimers next to the notice which
states that this License applies to the Document.  These Warranty
Disclaimers are considered to be included by reference in this
License, but only as regards disclaiming warranties: any other
implication that these Warranty Disclaimers may have is void and has
no effect on the meaning of this License.

     <li>VERBATIM COPYING

     <p>You may copy and distribute the Document in any medium, either
commercially or noncommercially, provided that this License, the
copyright notices, and the license notice saying this License applies
to the Document are reproduced in all copies, and that you add no other
conditions whatsoever to those of this License.  You may not use
technical measures to obstruct or control the reading or further
copying of the copies you make or distribute.  However, you may accept
compensation in exchange for copies.  If you distribute a large enough
number of copies you must also follow the conditions in section 3.

     <p>You may also lend copies, under the same conditions stated above, and
you may publicly display copies.

     <li>COPYING IN QUANTITY

     <p>If you publish printed copies (or copies in media that commonly have
printed covers) of the Document, numbering more than 100, and the
Document's license notice requires Cover Texts, you must enclose the
copies in covers that carry, clearly and legibly, all these Cover
Texts: Front-Cover Texts on the front cover, and Back-Cover Texts on
the back cover.  Both covers must also clearly and legibly identify
you as the publisher of these copies.  The front cover must present
the full title with all words of the title equally prominent and
visible.  You may add other material on the covers in addition. 
Copying with changes limited to the covers, as long as they preserve
the title of the Document and satisfy these conditions, can be treated
as verbatim copying in other respects.

     <p>If the required texts for either cover are too voluminous to fit
legibly, you should put the first ones listed (as many as fit
reasonably) on the actual cover, and continue the rest onto adjacent
pages.

     <p>If you publish or distribute Opaque copies of the Document numbering
more than 100, you must either include a machine-readable Transparent
copy along with each Opaque copy, or state in or with each Opaque copy
a computer-network location from which the general network-using
public has access to download using public-standard network protocols
a complete Transparent copy of the Document, free of added material. 
If you use the latter option, you must take reasonably prudent steps,
when you begin distribution of Opaque copies in quantity, to ensure
that this Transparent copy will remain thus accessible at the stated
location until at least one year after the last time you distribute an
Opaque copy (directly or through your agents or retailers) of that
edition to the public.

     <p>It is requested, but not required, that you contact the authors of the
Document well before redistributing any large number of copies, to give
them a chance to provide you with an updated version of the Document.

     <li>MODIFICATIONS

     <p>You may copy and distribute a Modified Version of the Document under
the conditions of sections 2 and 3 above, provided that you release
the Modified Version under precisely this License, with the Modified
Version filling the role of the Document, thus licensing distribution
and modification of the Modified Version to whoever possesses a copy
of it.  In addition, you must do these things in the Modified Version:

          <ol type=A start=1>
<li>Use in the Title Page (and on the covers, if any) a title distinct
from that of the Document, and from those of previous versions
(which should, if there were any, be listed in the History section
of the Document).  You may use the same title as a previous version
if the original publisher of that version gives permission.

          <li>List on the Title Page, as authors, one or more persons or entities
responsible for authorship of the modifications in the Modified
Version, together with at least five of the principal authors of the
Document (all of its principal authors, if it has fewer than five),
unless they release you from this requirement.

          <li>State on the Title page the name of the publisher of the
Modified Version, as the publisher.

          <li>Preserve all the copyright notices of the Document.

          <li>Add an appropriate copyright notice for your modifications
adjacent to the other copyright notices.

          <li>Include, immediately after the copyright notices, a license notice
giving the public permission to use the Modified Version under the
terms of this License, in the form shown in the Addendum below.

          <li>Preserve in that license notice the full lists of Invariant Sections
and required Cover Texts given in the Document's license notice.

          <li>Include an unaltered copy of this License.

          <li>Preserve the section Entitled &ldquo;History&rdquo;, Preserve its Title, and add
to it an item stating at least the title, year, new authors, and
publisher of the Modified Version as given on the Title Page.  If
there is no section Entitled &ldquo;History&rdquo; in the Document, create one
stating the title, year, authors, and publisher of the Document as
given on its Title Page, then add an item describing the Modified
Version as stated in the previous sentence.

          <li>Preserve the network location, if any, given in the Document for
public access to a Transparent copy of the Document, and likewise
the network locations given in the Document for previous versions
it was based on.  These may be placed in the &ldquo;History&rdquo; section. 
You may omit a network location for a work that was published at
least four years before the Document itself, or if the original
publisher of the version it refers to gives permission.

          <li>For any section Entitled &ldquo;Acknowledgements&rdquo; or &ldquo;Dedications&rdquo;, Preserve
the Title of the section, and preserve in the section all the
substance and tone of each of the contributor acknowledgements and/or
dedications given therein.

          <li>Preserve all the Invariant Sections of the Document,
unaltered in their text and in their titles.  Section numbers
or the equivalent are not considered part of the section titles.

          <li>Delete any section Entitled &ldquo;Endorsements&rdquo;.  Such a section
may not be included in the Modified Version.

          <li>Do not retitle any existing section to be Entitled &ldquo;Endorsements&rdquo; or
to conflict in title with any Invariant Section.

          <li>Preserve any Warranty Disclaimers.
          </ol>

     <p>If the Modified Version includes new front-matter sections or
appendices that qualify as Secondary Sections and contain no material
copied from the Document, you may at your option designate some or all
of these sections as invariant.  To do this, add their titles to the
list of Invariant Sections in the Modified Version's license notice. 
These titles must be distinct from any other section titles.

     <p>You may add a section Entitled &ldquo;Endorsements&rdquo;, provided it contains
nothing but endorsements of your Modified Version by various
parties&mdash;for example, statements of peer review or that the text has
been approved by an organization as the authoritative definition of a
standard.

     <p>You may add a passage of up to five words as a Front-Cover Text, and a
passage of up to 25 words as a Back-Cover Text, to the end of the list
of Cover Texts in the Modified Version.  Only one passage of
Front-Cover Text and one of Back-Cover Text may be added by (or
through arrangements made by) any one entity.  If the Document already
includes a cover text for the same cover, previously added by you or
by arrangement made by the same entity you are acting on behalf of,
you may not add another; but you may replace the old one, on explicit
permission from the previous publisher that added the old one.

     <p>The author(s) and publisher(s) of the Document do not by this License
give permission to use their names for publicity for or to assert or
imply endorsement of any Modified Version.

     <li>COMBINING DOCUMENTS

     <p>You may combine the Document with other documents released under this
License, under the terms defined in section 4 above for modified
versions, provided that you include in the combination all of the
Invariant Sections of all of the original documents, unmodified, and
list them all as Invariant Sections of your combined work in its
license notice, and that you preserve all their Warranty Disclaimers.

     <p>The combined work need only contain one copy of this License, and
multiple identical Invariant Sections may be replaced with a single
copy.  If there are multiple Invariant Sections with the same name but
different contents, make the title of each such section unique by
adding at the end of it, in parentheses, the name of the original
author or publisher of that section if known, or else a unique number. 
Make the same adjustment to the section titles in the list of
Invariant Sections in the license notice of the combined work.

     <p>In the combination, you must combine any sections Entitled &ldquo;History&rdquo;
in the various original documents, forming one section Entitled
&ldquo;History&rdquo;; likewise combine any sections Entitled &ldquo;Acknowledgements&rdquo;,
and any sections Entitled &ldquo;Dedications&rdquo;.  You must delete all
sections Entitled &ldquo;Endorsements.&rdquo;

     <li>COLLECTIONS OF DOCUMENTS

     <p>You may make a collection consisting of the Document and other documents
released under this License, and replace the individual copies of this
License in the various documents with a single copy that is included in
the collection, provided that you follow the rules of this License for
verbatim copying of each of the documents in all other respects.

     <p>You may extract a single document from such a collection, and distribute
it individually under this License, provided you insert a copy of this
License into the extracted document, and follow this License in all
other respects regarding verbatim copying of that document.

     <li>AGGREGATION WITH INDEPENDENT WORKS

     <p>A compilation of the Document or its derivatives with other separate
and independent documents or works, in or on a volume of a storage or
distribution medium, is called an &ldquo;aggregate&rdquo; if the copyright
resulting from the compilation is not used to limit the legal rights
of the compilation's users beyond what the individual works permit. 
When the Document is included in an aggregate, this License does not
apply to the other works in the aggregate which are not themselves
derivative works of the Document.

     <p>If the Cover Text requirement of section 3 is applicable to these
copies of the Document, then if the Document is less than one half of
the entire aggregate, the Document's Cover Texts may be placed on
covers that bracket the Document within the aggregate, or the
electronic equivalent of covers if the Document is in electronic form. 
Otherwise they must appear on printed covers that bracket the whole
aggregate.

     <li>TRANSLATION

     <p>Translation is considered a kind of modification, so you may
distribute translations of the Document under the terms of section 4. 
Replacing Invariant Sections with translations requires special
permission from their copyright holders, but you may include
translations of some or all Invariant Sections in addition to the
original versions of these Invariant Sections.  You may include a
translation of this License, and all the license notices in the
Document, and any Warranty Disclaimers, provided that you also include
the original English version of this License and the original versions
of those notices and disclaimers.  In case of a disagreement between
the translation and the original version of this License or a notice
or disclaimer, the original version will prevail.

     <p>If a section in the Document is Entitled &ldquo;Acknowledgements&rdquo;,
&ldquo;Dedications&rdquo;, or &ldquo;History&rdquo;, the requirement (section 4) to Preserve
its Title (section 1) will typically require changing the actual
title.

     <li>TERMINATION

     <p>You may not copy, modify, sublicense, or distribute the Document except
as expressly provided for under this License.  Any other attempt to
copy, modify, sublicense or distribute the Document is void, and will
automatically terminate your rights under this License.  However,
parties who have received copies, or rights, from you under this
License will not have their licenses terminated so long as such
parties remain in full compliance.

     <li>FUTURE REVISIONS OF THIS LICENSE

     <p>The Free Software Foundation may publish new, revised versions
of the GNU Free Documentation License from time to time.  Such new
versions will be similar in spirit to the present version, but may
differ in detail to address new problems or concerns.  See
<a href="http://www.gnu.org/copyleft/">http://www.gnu.org/copyleft/</a>.

     <p>Each version of the License is given a distinguishing version number. 
If the Document specifies that a particular numbered version of this
License &ldquo;or any later version&rdquo; applies to it, you have the option of
following the terms and conditions either of that specified version or
of any later version that has been published (not as a draft) by the
Free Software Foundation.  If the Document does not specify a version
number of this License, you may choose any version ever published (not
as a draft) by the Free Software Foundation.
        </ol>

<h4 class="appendixsubsec">E.1.1 ADDENDUM: How to use this License for your documents</h4>

<p>To use this License in a document you have written, include a copy of
the License in the document and put the following copyright and
license notices just after the title page:

<pre class="smallexample">       Copyright (C)  <var>year</var>  <var>your name</var>.
       Permission is granted to copy, distribute and/or modify this document
       under the terms of the GNU Free Documentation License, Version 1.2
       or any later version published by the Free Software Foundation;
       with no Invariant Sections, no Front-Cover Texts, and no Back-Cover
       Texts.  A copy of the license is included in the section entitled ``GNU
       Free Documentation License''.
</pre>
   <p>If you have Invariant Sections, Front-Cover Texts and Back-Cover Texts,
replace the &ldquo;with...Texts.&rdquo; line with this:

<pre class="smallexample">         with the Invariant Sections being <var>list their titles</var>, with
         the Front-Cover Texts being <var>list</var>, and with the Back-Cover Texts
         being <var>list</var>.
</pre>
   <p>If you have Invariant Sections without Cover Texts, or some other
combination of the three, merge those two alternatives to suit the
situation.

   <p>If your document contains nontrivial examples of program code, we
recommend releasing these examples in parallel under your choice of
free software license, such as the GNU General Public License,
to permit their use in free software.

<!-- Local Variables: -->
<!-- ispell-local-pdict: "ispell-dict" -->
<!-- End: -->
<div class="node">
<p><hr>
<a name="Index"></a>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Copying-This-Manual">Copying This Manual</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="unnumbered">Index</h2>

<!-- Currently, we use only the Concept Index. -->
<ul class="index-cp" compact>
<li><a href="#index-blocklist-23"><code>blocklist</code></a>: <a href="#blocklist">blocklist</a></li>
<li><a href="#index-boot-24"><code>boot</code></a>: <a href="#boot">boot</a></li>
<li><a href="#index-bootp-6"><code>bootp</code></a>: <a href="#bootp">bootp</a></li>
<li><a href="#index-cat-25"><code>cat</code></a>: <a href="#cat">cat</a></li>
<li><a href="#index-chainloader-26"><code>chainloader</code></a>: <a href="#chainloader">chainloader</a></li>
<li><a href="#index-cmp-27"><code>cmp</code></a>: <a href="#cmp">cmp</a></li>
<li><a href="#index-color-7"><code>color</code></a>: <a href="#color">color</a></li>
<li><a href="#index-configfile-28"><code>configfile</code></a>: <a href="#configfile">configfile</a></li>
<li><a href="#index-current_005fdrive-61"><code>current_drive</code></a>: <a href="#Filesystem-interface">Filesystem interface</a></li>
<li><a href="#index-current_005fpartition-62"><code>current_partition</code></a>: <a href="#Filesystem-interface">Filesystem interface</a></li>
<li><a href="#index-current_005fslice-63"><code>current_slice</code></a>: <a href="#Filesystem-interface">Filesystem interface</a></li>
<li><a href="#index-debug-29"><code>debug</code></a>: <a href="#debug">debug</a></li>
<li><a href="#index-default-1"><code>default</code></a>: <a href="#default">default</a></li>
<li><a href="#index-device-8"><code>device</code></a>: <a href="#device">device</a></li>
<li><a href="#index-devread-73"><code>devread</code></a>: <a href="#Filesystem-interface">Filesystem interface</a></li>
<li><a href="#index-dhcp-9"><code>dhcp</code></a>: <a href="#dhcp">dhcp</a></li>
<li><a href="#index-disk_005fread_005ffunc-72"><code>disk_read_func</code></a>: <a href="#Filesystem-interface">Filesystem interface</a></li>
<li><a href="#index-displayapm-30"><code>displayapm</code></a>: <a href="#displayapm">displayapm</a></li>
<li><a href="#index-displaymem-31"><code>displaymem</code></a>: <a href="#displaymem">displaymem</a></li>
<li><a href="#index-embed-32"><code>embed</code></a>: <a href="#embed">embed</a></li>
<li><a href="#index-fallback-2"><code>fallback</code></a>: <a href="#fallback">fallback</a></li>
<li><a href="#index-FDL_002c-GNU-Free-Documentation-License-76">FDL, GNU Free Documentation License</a>: <a href="#GNU-Free-Documentation-License">GNU Free Documentation License</a></li>
<li><a href="#index-filemax-71"><code>filemax</code></a>: <a href="#Filesystem-interface">Filesystem interface</a></li>
<li><a href="#index-filepos-70"><code>filepos</code></a>: <a href="#Filesystem-interface">Filesystem interface</a></li>
<li><a href="#index-find-33"><code>find</code></a>: <a href="#find">find</a></li>
<li><a href="#index-fstest-34"><code>fstest</code></a>: <a href="#fstest">fstest</a></li>
<li><a href="#index-FSYS_005fBUF-69"><code>FSYS_BUF</code></a>: <a href="#Filesystem-interface">Filesystem interface</a></li>
<li><a href="#index-geometry-35"><code>geometry</code></a>: <a href="#geometry">geometry</a></li>
<li><a href="#index-grub_005fread-74"><code>grub_read</code></a>: <a href="#Filesystem-interface">Filesystem interface</a></li>
<li><a href="#index-halt-36"><code>halt</code></a>: <a href="#halt">halt</a></li>
<li><a href="#index-help-37"><code>help</code></a>: <a href="#help">help</a></li>
<li><a href="#index-hiddenmenu-3"><code>hiddenmenu</code></a>: <a href="#hiddenmenu">hiddenmenu</a></li>
<li><a href="#index-hide-10"><code>hide</code></a>: <a href="#hide">hide</a></li>
<li><a href="#index-ifconfig-11"><code>ifconfig</code></a>: <a href="#ifconfig">ifconfig</a></li>
<li><a href="#index-impsprobe-38"><code>impsprobe</code></a>: <a href="#impsprobe">impsprobe</a></li>
<li><a href="#index-initrd-39"><code>initrd</code></a>: <a href="#initrd">initrd</a></li>
<li><a href="#index-install-40"><code>install</code></a>: <a href="#install">install</a></li>
<li><a href="#index-ioprobe-41"><code>ioprobe</code></a>: <a href="#ioprobe">ioprobe</a></li>
<li><a href="#index-kernel-42"><code>kernel</code></a>: <a href="#kernel">kernel</a></li>
<li><a href="#index-lock-43"><code>lock</code></a>: <a href="#lock">lock</a></li>
<li><a href="#index-makeactive-44"><code>makeactive</code></a>: <a href="#makeactive">makeactive</a></li>
<li><a href="#index-map-45"><code>map</code></a>: <a href="#map">map</a></li>
<li><a href="#index-md5crypt-46"><code>md5crypt</code></a>: <a href="#md5crypt">md5crypt</a></li>
<li><a href="#index-module-47"><code>module</code></a>: <a href="#module">module</a></li>
<li><a href="#index-modulenounzip-48"><code>modulenounzip</code></a>: <a href="#modulenounzip">modulenounzip</a></li>
<li><a href="#index-pager-12"><code>pager</code></a>: <a href="#pager">pager</a></li>
<li><a href="#index-part_005flength-67"><code>part_length</code></a>: <a href="#Filesystem-interface">Filesystem interface</a></li>
<li><a href="#index-part_005fstart-66"><code>part_start</code></a>: <a href="#Filesystem-interface">Filesystem interface</a></li>
<li><a href="#index-partnew-13"><code>partnew</code></a>: <a href="#partnew">partnew</a></li>
<li><a href="#index-parttype-14"><code>parttype</code></a>: <a href="#parttype">parttype</a></li>
<li><a href="#index-password-15"><code>password</code></a>: <a href="#password">password</a></li>
<li><a href="#index-pause-49"><code>pause</code></a>: <a href="#pause">pause</a></li>
<li><a href="#index-print_005fa_005fcompletion-75"><code>print_a_completion</code></a>: <a href="#Filesystem-interface">Filesystem interface</a></li>
<li><a href="#index-print_005fpossibilities-68"><code>print_possibilities</code></a>: <a href="#Filesystem-interface">Filesystem interface</a></li>
<li><a href="#index-quit-50"><code>quit</code></a>: <a href="#quit">quit</a></li>
<li><a href="#index-rarp-16"><code>rarp</code></a>: <a href="#rarp">rarp</a></li>
<li><a href="#index-read-52"><code>read</code></a>: <a href="#read">read</a></li>
<li><a href="#index-reboot-51"><code>reboot</code></a>: <a href="#reboot">reboot</a></li>
<li><a href="#index-root-53"><code>root</code></a>: <a href="#root">root</a></li>
<li><a href="#index-rootnoverify-54"><code>rootnoverify</code></a>: <a href="#rootnoverify">rootnoverify</a></li>
<li><a href="#index-saved_005fdrive-64"><code>saved_drive</code></a>: <a href="#Filesystem-interface">Filesystem interface</a></li>
<li><a href="#index-saved_005fpartition-65"><code>saved_partition</code></a>: <a href="#Filesystem-interface">Filesystem interface</a></li>
<li><a href="#index-savedefault-55"><code>savedefault</code></a>: <a href="#savedefault">savedefault</a></li>
<li><a href="#index-serial-17"><code>serial</code></a>: <a href="#serial">serial</a></li>
<li><a href="#index-setkey-18"><code>setkey</code></a>: <a href="#setkey">setkey</a></li>
<li><a href="#index-setup-56"><code>setup</code></a>: <a href="#setup">setup</a></li>
<li><a href="#index-terminal-19"><code>terminal</code></a>: <a href="#terminal">terminal</a></li>
<li><a href="#index-terminfo-20"><code>terminfo</code></a>: <a href="#terminfo">terminfo</a></li>
<li><a href="#index-testload-57"><code>testload</code></a>: <a href="#testload">testload</a></li>
<li><a href="#index-testvbe-58"><code>testvbe</code></a>: <a href="#testvbe">testvbe</a></li>
<li><a href="#index-tftpserver-21"><code>tftpserver</code></a>: <a href="#tftpserver">tftpserver</a></li>
<li><a href="#index-timeout-4"><code>timeout</code></a>: <a href="#timeout">timeout</a></li>
<li><a href="#index-title-5"><code>title</code></a>: <a href="#title">title</a></li>
<li><a href="#index-unhide-22"><code>unhide</code></a>: <a href="#unhide">unhide</a></li>
<li><a href="#index-uppermem-59"><code>uppermem</code></a>: <a href="#uppermem">uppermem</a></li>
<li><a href="#index-vbeprobe-60"><code>vbeprobe</code></a>: <a href="#vbeprobe">vbeprobe</a></li>
   </ul><div class="footnote">
<hr>
<a name="texinfo-footnotes-in-document"></a><h4>Footnotes</h4><p class="footnote"><small>[<a name="fn-1" href="#fnd-1">1</a>]</small> <dfn>chain-load</dfn> is the mechanism for loading
unsupported operating systems by loading another boot loader. It is
typically used for loading DOS or Windows.</p>

   <p class="footnote"><small>[<a name="fn-2" href="#fnd-2">2</a>]</small> There are a few
pathological cases where loading a very badly organized ELF kernel might
take longer, but in practice this never happen.</p>

   <p class="footnote"><small>[<a name="fn-3" href="#fnd-3">3</a>]</small> The LInux LOader,
a boot loader that everybody uses, but nobody likes.</p>

   <p class="footnote"><small>[<a name="fn-4" href="#fnd-4">4</a>]</small> Note that GRUB's root device doesn't necessarily mean
your OS's root partition; if you need to specify a root partition for
your OS, add the argument into the command <samp><span class="command">kernel</span></samp>.</p>

   <p class="footnote"><small>[<a name="fn-5" href="#fnd-5">5</a>]</small> El Torito is a specification for bootable CD
using BIOS functions.</p>

   <p class="footnote"><small>[<a name="fn-6" href="#fnd-6">6</a>]</small> This is not necessary for most of the
modern operating systems.</p>

   <p class="footnote"><small>[<a name="fn-7" href="#fnd-7">7</a>]</small> RARP is not advised, since it cannot serve much
information</p>

   <p class="footnote"><small>[<a name="fn-8" href="#fnd-8">8</a>]</small> However, this
behavior will be changed in the future version, in a user-invisible
way.</p>

   <p class="footnote"><small>[<a name="fn-9" href="#fnd-9">9</a>]</small> The latter feature
has not been implemented yet.</p>

   <p class="footnote"><small>[<a name="fn-10" href="#fnd-10">10</a>]</small> They're loaded the same way, so we will refer to the Stage
1.5 as a Stage 2 from now on.</p>

   <p><hr></div>

</body></html>

